<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">K230 SDK CanMV Board Demo使用指南 | 正点原子</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tm330075395.github.io/docs/CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="K230 SDK CanMV Board Demo使用指南 | 正点原子"><meta data-rh="true" name="description" content="1. 概述"><meta data-rh="true" property="og:description" content="1. 概述"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tm330075395.github.io/docs/CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse" hreflang="en"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="正点原子 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="正点原子 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.fcaa3de9.js" defer="defer"></script>
<script src="/assets/js/main.252b8acf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/CanaanK230/Userdoc">CanMV-K230教程</a><a href="http://www.alientek.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">正点原子官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://www.openedv.com/forum.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tm330075395/tm330075395.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CanaanK230/Userdoc">文档阅读指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/1开发板上手指南-1">1.开发板上手指南</a><button aria-label="Expand sidebar category &#x27;1.开发板上手指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/2开发环境搭建指南-1">2.开发环境搭建指南</a><button aria-label="Expand sidebar category &#x27;2.开发环境搭建指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/3嵌入式应用开发指南-1">3.嵌入式应用开发指南</a><button aria-label="Collapse sidebar category &#x27;3.嵌入式应用开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230PracticalBasics-hello world">K230 实战基础篇 - hello world</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230AIActualcombatHHBNeuralNetworkModelDeploymentTool">K230 AI实战 - HHB神经网络模型部署工具</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230GPUPracticalapplication-VGLitedrawscoolgraphics">K230 GPU 应用实战 - VGLite 绘制酷炫图形</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230GUIpractical LVGLportingtutorials">K230 GUI实战 - LVGL移植教程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230RVVActualcombat">K230 RVV实战</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230USBapplicationisUVCtransmissionofYUVandcodedstreams">K230 USB应用实战-UVC传输YUV及编码码流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230imagepracticebootvideoandbootlogo">K230 图像实战 - 开机视频和开机logo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230codingpracticertspserverbuildandpushstreams">K230 编码实战 - rtsp sever搭建和推流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230audiopracticeaudiocollectionplaybackandencoding">K230 音频实战 - 音频采集、播放和编解码</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SceneCombatSmartDoorLockPOC">K230 场景实战-智能门锁POC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SceneCombatSmartDoorLockPOC3DStructuredLight">K230 场景实战-智能门锁POC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SceneCombatMaoyanPOC">K230 场景实战-猫眼POC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SceneCombatDictionaryPenPOC">K230 场景实战-词典笔POC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SceneCombatdpuDepthCameraPOC">K230 场景实战-dpu深度相机POC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230AIDemointroduce">K230 AI Demo介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230FancyPOCintroduce">K230 Fancy POC介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CanaanK230/part3/K230SDKCanMVBoardDemoDirectionsforuse">K230 SDK CanMV Board Demo使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part3/K230SDKEVBBoardDemoDirectionsforuse">K230 SDK EVB Board Demo使用指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/4ai应用开发指南-1">4.AI应用开发指南</a><button aria-label="Expand sidebar category &#x27;4.AI应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/5micropython应用开发指南-1">5.MicroPython应用开发指南</a><button aria-label="Expand sidebar category &#x27;5.MicroPython应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/6系统开发指南-1">6.系统开发指南</a><button aria-label="Expand sidebar category &#x27;6.系统开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/7sdk-api参考指南-1">7.SDK API参考指南</a><button aria-label="Expand sidebar category &#x27;7.SDK API参考指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/8常见问题-1">8.常见问题</a><button aria-label="Expand sidebar category &#x27;8.常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/3嵌入式应用开发指南-1"><span itemprop="name">3.嵌入式应用开发指南</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K230 SDK CanMV Board Demo使用指南</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K230 SDK CanMV Board Demo使用指南</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-概述">1. 概述<a href="#1-概述" class="hash-link" aria-label="Direct link to 1. 概述" title="Direct link to 1. 概述">​</a></h2>
<p>此文档介绍K230 SDK提供的demo功能，使用方法等。其中rt-smart上的可执行程序都默认编译到了小核/sharefs目录下, 测试大核程序时，需要等待小核完全启动，之后在大核的msh中进入/sharefs/app目录内测试。各测试demo用到的音视频资源文件，可到以下链接地址获取</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-demo介绍">2. Demo介绍<a href="#2-demo介绍" class="hash-link" aria-label="Direct link to 2. Demo介绍" title="Direct link to 2. Demo介绍">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-display_demo">2.1 Display_demo<a href="#21-display_demo" class="hash-link" aria-label="Direct link to 2.1 Display_demo" title="Direct link to 2.1 Display_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-display_demo简介">2.1.1 display_demo简介<a href="#211-display_demo简介" class="hash-link" aria-label="Direct link to 2.1.1 display_demo简介" title="Direct link to 2.1.1 display_demo简介">​</a></h4>
<p>VO（Video Output，视频输出）模块主动从内存相应位置读取视  频和图形数据，并通过相应的显示设备输出视频和图形。芯片支持的显示/回写设备、视频层和图形层情况。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-feature说明">2.1.2 Feature说明<a href="#212-feature说明" class="hash-link" aria-label="Direct link to 2.1.2 Feature说明" title="Direct link to 2.1.2 Feature说明">​</a></h4>
<p>video ouput 包含了一个用例，即vo osd层插入帧的测试</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="213-依赖资源">2.1.3 依赖资源<a href="#213-依赖资源" class="hash-link" aria-label="Direct link to 2.1.3 依赖资源" title="Direct link to 2.1.3 依赖资源">​</a></h4>
<p>带HDMI接口的显示器及HDMI连接线，显示器要求支持1080P30，否则无法显示</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="214-使用说明">2.1.4 使用说明<a href="#214-使用说明" class="hash-link" aria-label="Direct link to 2.1.4 使用说明" title="Direct link to 2.1.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2141-编译">2.1.4.1 编译<a href="#2141-编译" class="hash-link" aria-label="Direct link to 2.1.4.1 编译" title="Direct link to 2.1.4.1 编译">​</a></h5>
<p>软件编译参考release sdk软件包中的README.md</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2142-执行">2.1.4.2 执行<a href="#2142-执行" class="hash-link" aria-label="Direct link to 2.1.4.2 执行" title="Direct link to 2.1.4.2 执行">​</a></h5>
<p>vo osd 层插入帧</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vo.elf 18    //18:DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行完命令后、按一次回车会插入一张纯绿色图片、再按一次回车程序退出</p>
<p>显示效果如下：</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/sample_vo_hdmi_15-cbb739127983cad8bec81ed3d1068608.png" width="1920" height="1080" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-venc_demo">2.2 Venc_demo<a href="#22-venc_demo" class="hash-link" aria-label="Direct link to 2.2 Venc_demo" title="Direct link to 2.2 Venc_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-venc_demo简介">2.2.1 Venc_demo简介<a href="#221-venc_demo简介" class="hash-link" aria-label="Direct link to 2.2.1 Venc_demo简介" title="Direct link to 2.2.1 Venc_demo简介">​</a></h4>
<p>Venc demo实现对vi接收到到图形进行编码，并且可以对输入图像进行画框和OSD叠加。支持编码协议为H.264/H.265/JPEG。编码结果可以存储成文件，导出到本地，使用视频软件播放。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-feature说明">2.2.2 Feature说明<a href="#222-feature说明" class="hash-link" aria-label="Direct link to 2.2.2 Feature说明" title="Direct link to 2.2.2 Feature说明">​</a></h4>
<p>只支持1280x720分辨率。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-依赖资源">2.2.3 依赖资源<a href="#223-依赖资源" class="hash-link" aria-label="Direct link to 2.2.3 依赖资源" title="Direct link to 2.2.3  依赖资源">​</a></h4>
<p>摄像头</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-使用说明">2.2.4 使用说明<a href="#224-使用说明" class="hash-link" aria-label="Direct link to 2.2.4 使用说明" title="Direct link to 2.2.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2241-mpp_demo执行">2.2.4.1 mpp_demo执行<a href="#2241-mpp_demo执行" class="hash-link" aria-label="Direct link to 2.2.4.1 mpp_demo执行" title="Direct link to 2.2.4.1 mpp_demo执行">​</a></h5>
<p>执行<code>./sample_venc.elf -h</code>后，输出demo的使用说明，如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage : ./sample_venc.elf [index] -sensor [sensor_index] -o [filename]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">index:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0) H.265e.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1) JPEG encode.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2) OSD + H.264e.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3) OSD + Border + H.265e.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sensor_index: see vicap doc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>sensor_index取值参看<code>k230_docs/zh/01_software/board/mpp/K230_Camera_Sensor适配指南.md</code>文档中关于k_vicap_sensor_type的描述，默认值为7，GC2093_MIPI_CSI2_1920X1080_30FPS_10为<strong>52</strong></p>
<p>举例：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_venc.elf 0 -sensor 24 -o out.265 // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./sample_venc.elf 0 -sensor 39 -o out.265 // Canmv-K230-V2.0板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./sample_venc.elf 0 -sensor 52 -o out.265 // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2242-mapi编码demo">2.2.4.2 MAPI编码demo<a href="#2242-mapi编码demo" class="hash-link" aria-label="Direct link to 2.2.4.2 MAPI编码demo" title="Direct link to 2.2.4.2 MAPI编码demo">​</a></h5>
<p>sample_venc默认使用的sensor类型是IMX335_MIPI_2LANE_RAW12_1920X1080_30FPS_LINEAR，目前该demo支持3路编码，可通过命令行传参的方式修改sensor类型以及其他参数，具体说明如下：</p>
<p>启动开发板后:</p>
<ol>
<li>通过 <code>lsmod</code> 检查小核侧是否加载k_ipcm模块，如未加载，执行 <code>insmod k_ipcm.ko</code> 加载k_ipcm模块</li>
<li>在大核侧启动核间通信进程，执行 <code>./sample_sys_init.elf</code></li>
<li>在小核侧 /mnt 目录下，执行 <code>./sample_venc</code>，默认执行1路h264视频编码，分辨率为1280x720，生成的码流文件存放在 /tmp 目录下面，如需传参可参考如下参数说明：</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./sample_venc -s 24 -n 2 -o /tmp -t 0            // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -s or --sensor_type [sensor_index],\n&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            see vicap doc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -n or --chn_num [number], 1, 2, 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -t or --type [type_index]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            0: h264 type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            1: h265 type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            2: jpeg type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -o or --out_path [output_path]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     -h or --help, will print usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./sample_venc -s 39 -n 2 -o /tmp -t 0            // Canmv-K230-V2.0板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./sample_venc -s 52 -n 2 -o /tmp -t 0            // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>sensor_index取值参看<code>k230_docs/zh/01_software/board/mpp/K230_Camera_Sensor适配指南.md</code>文档中关于k_vicap_sensor_type的描述，默认值为7，GC2093_MIPI_CSI2_1920X1080_30FPS_10为<strong>52</strong></p>
<p>可通过<code>ctrl+c</code>停止运行，根据不同的编码类型，会在小核指定的输出目录下生成不同的码流文件，对于h264类型，会生成形如<code>stream_chn0.264</code>文件，其中 0 代表0通道；对于h265类型，会生成形如 <code>stream_chn0.265</code>文件，同样 0 代表0通道；对于jpeg类型，会生成形如<code>chn0_0.jpg</code>的jpg图片，代表0通道第0张图片，默认会生成10张jpg图片。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2243-查看结果">2.2.4.3 查看结果<a href="#2243-查看结果" class="hash-link" aria-label="Direct link to 2.2.4.3 查看结果" title="Direct link to 2.2.4.3 查看结果">​</a></h5>
<p>输出文件可以导出到本地，用视频播放软件查看。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-nonai_2d_demo">2.3 Nonai_2d_demo<a href="#23-nonai_2d_demo" class="hash-link" aria-label="Direct link to 2.3 Nonai_2d_demo" title="Direct link to 2.3 Nonai_2d_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="231-nonai_2d_demo简介">2.3.1 Nonai_2d_demo简介<a href="#231-nonai_2d_demo简介" class="hash-link" aria-label="Direct link to 2.3.1 Nonai_2d_demo简介" title="Direct link to 2.3.1 Nonai_2d_demo简介">​</a></h4>
<p>Nonai_2d demo对输入文件实现图像叠加的功能。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="232-feature说明">2.3.2 Feature说明<a href="#232-feature说明" class="hash-link" aria-label="Direct link to 2.3.2 Feature说明" title="Direct link to 2.3.2 Feature说明">​</a></h4>
<p>Nonai_2d通过读取yuv(I420格式）文件，进行图像叠加运算。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="233-依赖资源">2.3.3 依赖资源<a href="#233-依赖资源" class="hash-link" aria-label="Direct link to 2.3.3 依赖资源" title="Direct link to 2.3.3 依赖资源">​</a></h4>
<p>无。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="234-使用说明">2.3.4 使用说明<a href="#234-使用说明" class="hash-link" aria-label="Direct link to 2.3.4 使用说明" title="Direct link to 2.3.4 使用说明">​</a></h4>
<p>输入参数如下：</p>
<table><thead><tr><th>参数名</th><th>描述</th><th>默认值</th></tr></thead><tbody><tr><td>-i</td><td>输入文件名</td><td>-</td></tr><tr><td>-w</td><td>图像宽度</td><td>-</td></tr><tr><td>-h</td><td>图像高度</td><td>-</td></tr><tr><td>-o</td><td>输出文件名</td><td>-</td></tr></tbody></table>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2341-执行">2.3.4.1 执行<a href="#2341-执行" class="hash-link" aria-label="Direct link to 2.3.4.1 执行" title="Direct link to 2.3.4.1 执行">​</a></h5>
<p>举例：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_nonai_2d.elf -i /sharefs/foreman_128x64_3frames.yuv -w 128 -h 64 -o /sharefs/out_2d.yuv</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2342-查看结果">2.3.4.2 查看结果<a href="#2342-查看结果" class="hash-link" aria-label="Direct link to 2.3.4.2 查看结果" title="Direct link to 2.3.4.2 查看结果">​</a></h5>
<p>输出文件可以导出到本地，用yuv播放软件查看。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-vdec_demo">2.4 Vdec_demo<a href="#24-vdec_demo" class="hash-link" aria-label="Direct link to 2.4 Vdec_demo" title="Direct link to 2.4 Vdec_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="241-vdec_demo简介">2.4.1 Vdec_demo简介<a href="#241-vdec_demo简介" class="hash-link" aria-label="Direct link to 2.4.1 Vdec_demo简介" title="Direct link to 2.4.1 Vdec_demo简介">​</a></h4>
<p>Vdec demo实现视频解码的功能。解码功能支持H.264/H.265/JPEG解码。支持的输入数据格式为.264/.265/.jpeg。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="242-feature说明">2.4.2 Feature说明<a href="#242-feature说明" class="hash-link" aria-label="Direct link to 2.4.2 Feature说明" title="Direct link to 2.4.2 Feature说明">​</a></h4>
<p>Vdec demo通过读取流文件进行解码。解码输出结果通过屏幕显示。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="243-依赖资源">2.4.3 依赖资源<a href="#243-依赖资源" class="hash-link" aria-label="Direct link to 2.4.3 依赖资源" title="Direct link to 2.4.3 依赖资源">​</a></h4>
<p>无。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="244-使用说明">2.4.4 使用说明<a href="#244-使用说明" class="hash-link" aria-label="Direct link to 2.4.4 使用说明" title="Direct link to 2.4.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2441-执行">2.4.4.1 执行<a href="#2441-执行" class="hash-link" aria-label="Direct link to 2.4.4.1 执行" title="Direct link to 2.4.4.1 执行">​</a></h5>
<p>执行<code>./sample_vdec.elf -help</code>，可以看到可配置参数及说明，其默认值如下表所示：</p>
<table><thead><tr><th>参数名</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td>i</td><td>输入文件名，需要后缀名分别为.264/.265/.jpg</td><td>-</td></tr><tr><td>type</td><td>vo connector type, 参看vo 文档描述</td><td>0</td></tr></tbody></table>
<p>其中type取值参看<code>k230_docs/zh/01_software/board/mpp/K230_视频输出_API参考.md</code>中关于k_connector_type的描述，设置为0</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="24411-vdec绑定vo解码显示">2.4.4.1.1 VDEC绑定VO解码显示<a href="#24411-vdec绑定vo解码显示" class="hash-link" aria-label="Direct link to 2.4.4.1.1 VDEC绑定VO解码显示" title="Direct link to 2.4.4.1.1 VDEC绑定VO解码显示">​</a></h6>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vdec.elf -type 4 -i output-480-800.h264   // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="24412-mapi-vdec绑定vo解码显示">2.4.4.1.2 MAPI VDEC绑定VO解码显示<a href="#24412-mapi-vdec绑定vo解码显示" class="hash-link" aria-label="Direct link to 2.4.4.1.2 MAPI VDEC绑定VO解码显示" title="Direct link to 2.4.4.1.2 MAPI VDEC绑定VO解码显示">​</a></h6>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vdec.elf -type 4 -i output-480-800.h264   // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2442-查看结果">2.4.4.2 查看结果<a href="#2442-查看结果" class="hash-link" aria-label="Direct link to 2.4.4.2 查看结果" title="Direct link to 2.4.4.2 查看结果">​</a></h5>
<p>解码结果可以在屏幕上查看。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-audio_demo">2.5 Audio_demo<a href="#25-audio_demo" class="hash-link" aria-label="Direct link to 2.5 Audio_demo" title="Direct link to 2.5 Audio_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="251-audio_demo简介">2.5.1 audio_demo简介<a href="#251-audio_demo简介" class="hash-link" aria-label="Direct link to 2.5.1 audio_demo简介" title="Direct link to 2.5.1 audio_demo简介">​</a></h4>
<p>audio demo通过调用api接口来实现音频输入和输出功能。音频输入输出均使用i2s模块。demo中包含了可以单独测试音频输入或音频输出用例，也包含音频输入和输出同时测试的用例。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="252-feature说明">2.5.2 Feature说明<a href="#252-feature说明" class="hash-link" aria-label="Direct link to 2.5.2 Feature说明" title="Direct link to 2.5.2 Feature说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2521-音频输入">2.5.2.1 音频输入<a href="#2521-音频输入" class="hash-link" aria-label="Direct link to 2.5.2.1 音频输入" title="Direct link to 2.5.2.1 音频输入">​</a></h5>
<p>音频输入通过采集环境中的声音并将其保存成文件来分析是否正常。</p>
<p>demo中采集15s钟的音频数据，采集到的文件格式为wav，可使用vlc直接播放。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2522-音频输出">2.5.2.2 音频输出<a href="#2522-音频输出" class="hash-link" aria-label="Direct link to 2.5.2.2 音频输出" title="Direct link to 2.5.2.2 音频输出">​</a></h5>
<p>音频输出通过播放wav文件，插上耳机听声音来判断是否正常。</p>
<p>demo中通过播放wav来测试音频输出功能,可上传不同音频格式的wav文件来测试音频输出功能。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2523-音频输入输出">2.5.2.3 音频输入输出<a href="#2523-音频输入输出" class="hash-link" aria-label="Direct link to 2.5.2.3 音频输入输出" title="Direct link to 2.5.2.3 音频输入输出">​</a></h5>
<p>音频输入和输出可同时测试。</p>
<ol>
<li>测试i2s模块功能，即:通过i2s音频输入实时采集环境中声音并通过i2s音频输出，接上耳机可实时听到环境中的声音。</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2524-音频编解码">2.5.2.4 音频编解码<a href="#2524-音频编解码" class="hash-link" aria-label="Direct link to 2.5.2.4 音频编解码" title="Direct link to 2.5.2.4 音频编解码">​</a></h5>
<p>内置g711a/u 16bit 音频编解码器，用户可以注册其他外置编解码器。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="253-使用说明">2.5.3 使用说明<a href="#253-使用说明" class="hash-link" aria-label="Direct link to 2.5.3 使用说明" title="Direct link to 2.5.3 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2531-编译">2.5.3.1 编译<a href="#2531-编译" class="hash-link" aria-label="Direct link to 2.5.3.1 编译" title="Direct link to 2.5.3.1 编译">​</a></h5>
<ol>
<li>软件编译环境参考SDK中的<code>README.md</code>。</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2532-执行">2.5.3.2 执行<a href="#2532-执行" class="hash-link" aria-label="Direct link to 2.5.3.2 执行" title="Direct link to 2.5.3.2 执行">​</a></h5>
<p>进入rt-smart系统后，进入/sharefs/app目录下，<code>sample_audio.elf</code>为测试demo。</p>
<ul>
<li>可输入<code>./sample_audio.elf -help</code>查看demo使用方法。</li>
<li><code>-type</code>选项来测试不同模块功能；</li>
<li><code>-samplerate</code>选项来配置音频输入和输出不同采样率（8k-192k）,默认为44.1k；</li>
<li><code>-enablecodec</code>使用内置codec或者片外的音频子板；</li>
<li><code>-loglevel</code>打印内核日志等级；</li>
<li><code>-bitwidth</code>设置音频采样精度(16/24/32);</li>
<li><code>-filename</code>加载或存储wav/g711文件名称。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="文本 描述已自动生成" src="/assets/images/e73b403fe42ae077746ee4e5928a1d86-c9cc50852f8ff16f370da4291ea5f4de.png" width="858" height="430" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25321-i2s音频输入测试">2.5.3.2.1 I2S音频输入测试<a href="#25321-i2s音频输入测试" class="hash-link" aria-label="Direct link to 2.5.3.2.1 I2S音频输入测试" title="Direct link to 2.5.3.2.1 I2S音频输入测试">​</a></h6>
<ul>
<li>输入<code>./sample_audio.elf -type 0</code>来采集15s中的pcm音频数据，</li>
<li><code>-samplerate</code>选项来选择采集不同采样率的音频,</li>
<li><code>-bitwidth</code> 来来设置不同的采样精度，</li>
<li><code>-enablecodec</code>设置是否使用内置codec，</li>
<li><code>-filename</code> 保存数据到文件。采集15s数  据后，demo自动退出。</li>
</ul>
<p>demo实现思路:该测试通过循环调用api函数:<code>kd_mpi_ai_get_frame</code>和<code>kd_mpi_ai_release_frame</code>来采集数据。注意i2s对应的ai dev号为0。</p>
<p><img decoding="async" loading="lazy" alt="i2s input" src="/assets/images/100ece476c397937609fc134d00b06f4-22230a827a58ccd0c2e72ea79c4dcddd.png" width="1109" height="575" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25322-i2s音频输出测试">2.5.3.2.2 I2S音频输出测试<a href="#25322-i2s音频输出测试" class="hash-link" aria-label="Direct link to 2.5.3.2.2 I2S音频输出测试" title="Direct link to 2.5.3.2.2 I2S音频输出测试">​</a></h6>
<p>支持播放wav文件，需将wav文件拷贝到sharefs路径下。该demo会循环播放wav文件（其他任意wav文件也可），用户可以按任意键来退出该功能测试。</p>
<p>demo实现思路:该测试通过循环调用api函数：<code>kd_mpi_ao_send_frame</code>来实时输出声音。</p>
<p><img decoding="async" loading="lazy" alt="文本 描述已自动生成" src="/assets/images/09cbde8d64c0df2f2cb4f7c96e00ec99-86686f1bc31648e7efcca37ef4f12e4a.png" width="1039" height="347" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25323-i2s音频输入输出api接口测试">2.5.3.2.3 I2S音频输入输出api接口测试<a href="#25323-i2s音频输入输出api接口测试" class="hash-link" aria-label="Direct link to 2.5.3.2.3 I2S音频输入输出api接口测试" title="Direct link to 2.5.3.2.3 I2S音频输入输出api接口测试">​</a></h6>
<p>输入<code>./sample_audio.elf -type 3 -bitwidth 16</code>，通过api接口实时测试音频输入输出功能。</p>
<p>通过调用api接口：<code>kd_mpi_ai_get_frame</code>获取音频数据并调用<code>kd_mpi_ao_send_frame</code>输出音频数据来测试音频输入和输出整体功能。用户可以按任意键来退出该功能测试。测试过程中会实时输出ai采集到的时间戳信息。</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/d8f4d2a4c90f58fe67a7343a836f1b18-24b1e0dcc30ca95b09525998ea07af71.png" width="964" height="542" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25324-i2s音频输入和输出模块的系统绑定测试">2.5.3.2.4 I2S音频输入和输出模块的系统绑定测试<a href="#25324-i2s音频输入和输出模块的系统绑定测试" class="hash-link" aria-label="Direct link to 2.5.3.2.4 I2S音频输入和输出模块的系统绑定测试" title="Direct link to 2.5.3.2.4 I2S音频输入和输出模块的系统绑定测试">​</a></h6>
<p>输入<code>./sample_audio.elf -type 4</code>，通过ai和ao模块绑定实时测试音频输入输出功能。</p>
<p>通过调用系统绑定api接口：<code>kd_mpi_sys_bind</code>将ai和ao模块绑定，来测试音频输入和输出整体功能。用户可以按任意键来退出该功能测试。</p>
<p><img decoding="async" loading="lazy" src="https://developer.canaan-creative.com/k230/zh/dev/_images/2bd93e4768f76c6af98aa69137156f09.png" alt="文本 描述已自动生成" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25325-编码测试">2.5.3.2.5 编码测试<a href="#25325-编码测试" class="hash-link" aria-label="Direct link to 2.5.3.2.5 编码测试" title="Direct link to 2.5.3.2.5 编码测试">​</a></h6>
<p>获取ai数据并编码保存到文件。编解码只支持g711a/u，16bit。</p>
<p>系统绑定方式:<code>./sample_audio.elf -type 7 -bitwidth 16 -enablecodec 1 -filename /sharefs/i2s_codec.g711a</code></p>
<p><img decoding="async" loading="lazy" alt="audio enc bind log" src="/assets/images/d100e8aff87b92e3903227ace2822675-b7aa66d5f5cb0f8f940251348a31b948.png" width="1174" height="290" class="img_ev3q"></p>
<p>api接口方式:<code>./sample_audio.elf -type 9 -bitwidth 16 -enablecodec 1 -filename /sharefs/i2s_codec.g711a</code></p>
<p><img decoding="async" loading="lazy" alt="audio enc log" src="/assets/images/8c32c668277867b2ab314e47c2d96d03-b7f2b5bad962af610f4f12fb272b7914.png" width="1166" height="239" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25326-解码测试">2.5.3.2.6 解码测试<a href="#25326-解码测试" class="hash-link" aria-label="Direct link to 2.5.3.2.6 解码测试" title="Direct link to 2.5.3.2.6 解码测试">​</a></h6>
<p>读取文件数据并解码播放。编解码只支持g711a/u，16bit。</p>
<p>系统绑定方式:<code>./sample_audio.elf -type 8 -filename /sharefs/gyz.g711a -enablecodec 1 -bitwidth 16</code></p>
<p><img decoding="async" loading="lazy" alt="audio dec bind" src="/assets/images/764192b171dc3580719e4e2f6bfecaef-6c60071a3797b768c43fac12ef5d8a7c.png" width="1117" height="302" class="img_ev3q"></p>
<p>api接口方式:<code>./sample_audio.elf -type 10 -filename /sharefs/gyz.g711a -enablecodec 1 -bitwidth 16</code></p>
<p><img decoding="async" loading="lazy" alt="audio dec" src="/assets/images/48a50a418c0daae2a69d6bb70306b0b8-057e4546c8206cbe6e33b3b970bfcf52.png" width="1107" height="262" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25327-音频全流程测试">2.5.3.2.7 音频全流程测试<a href="#25327-音频全流程测试" class="hash-link" aria-label="Direct link to 2.5.3.2.7 音频全流程测试" title="Direct link to 2.5.3.2.7 音频全流程测试">​</a></h6>
<p>1)录制模块ai-&gt;aenc-&gt;file 和播放模块 file-&gt;adec-&gt;ao 两条链路同时运行，模拟语音对讲的场景。使用内置codec，16bit精度来模拟。<code>-filename</code>来选择待播放的文件，为g711a格式，<code>-samplerate</code>选择采样精度。录制文件名称:为播放文件名称后+<code>_rec</code>:如-filename为<code>/sharefs/test.g711a</code>,则录制文件名为:<code>/sharefs/test.g711a_rec</code>.</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/96d5c266517e45cfc95d9bcb65bcebaa-25a0dadef5852368bab3722cec3206cd.png" width="853" height="461" class="img_ev3q"></p>
<p>2)ai-&gt;aenc ，adec-&gt;ao两条链路绑定回环测试。使用内置codec，16bit精度来模拟。</p>
<p>同时测试g711编码后的stream 时间戳。</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/4ecbd28b50bd69bd41b768f4f2755970-69e5bac7d5769c4dec9e799d7e12b967.png" width="843" height="833" class="img_ev3q"></p>
<p>输入<code>cat /proc/umap/sysbind</code> 可查看模块间系统绑定。</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/23f111756ad924f5538cce7c691da0df-2fd9031d0ece2e2acbbfb152b94e9f08.png" width="1112" height="133" class="img_ev3q"></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="25328-mapi音频测试">2.5.3.2.8 mapi音频测试<a href="#25328-mapi音频测试" class="hash-link" aria-label="Direct link to 2.5.3.2.8 mapi音频测试" title="Direct link to 2.5.3.2.8 mapi音频测试">​</a></h6>
<p>确保大核已启动核间通信进程：先确认小核加载k_ipcm.ko模块，再确认大核启动:<code>/sharefs/app/sample_sys_init.elf &amp;</code></p>
<ul>
<li>可输入<code>/mnt/sample_audio -help</code>查看demo使用方法。</li>
<li><code>-type</code>选项来测试不同模块功能。</li>
<li><code>-samplerate</code>选项来配置音频输入和输出不同采样率（8k-192k）,默认为44.1k。</li>
<li><code>-enablecodec</code>使用内置codec或者片外的音频子板，默认使用内置codec。</li>
<li><code>-filename</code>加载或存储g711文件名称。</li>
<li><code>-channels</code>:指定声道数。8</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230530101801685" src="/assets/images/image-20230530101801685-c475ad735bc31611c0c80557dae0485a.png" width="617" height="215" class="img_ev3q"></p>
<ul>
<li>ai-&gt;aenc测试</li>
</ul>
<p>小核上执行命令:<code>/mnt/sample_audio -type 0 -filename test.g711a</code>,按q键可退出测试。demo能够实时采集音频数据并编码成g711a格式并保存到文件中。 <img decoding="async" loading="lazy" alt="image-20230530102014642" src="/assets/images/image-20230530102014642-ebb7338829956638a611b44ea24d21d8.png" width="1424" height="897" class="img_ev3q"></p>
<ul>
<li>adec-&gt;ao测试</li>
</ul>
<p>小核上执行命令:<code>/mnt/sample_audio -type 1 -filename tes.g711a</code>,按q键可退出测试。demo能够循环解码播放本地g711a格式的文件。 <img decoding="async" loading="lazy" alt="image-20230530102747862" src="/assets/images/image-20230530102747862-7e9f256a306a102af2be34d649f8095f.png" width="1422" height="194" class="img_ev3q"></p>
<ul>
<li>ai-&gt;aenc adec-&gt;ao loopback测试</li>
</ul>
<p>小核上执行命令:/mnt/sample_audio -type 2 ,按q键可退出测试。demo能够实时采集音频数据并编码成g711a格式，再解码g711a格式数据后播放输出。 <img decoding="async" loading="lazy" alt="image-20230530102916366" src="/assets/images/image-20230530102916366-65f7797f6c7bb1c0dcf3f22f5903ccf0.png" width="1467" height="195" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-vicap_demo">2.6 Vicap_demo<a href="#26-vicap_demo" class="hash-link" aria-label="Direct link to 2.6 Vicap_demo" title="Direct link to 2.6 Vicap_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="261-vicap_demo简介">2.6.1 vicap_demo简介<a href="#261-vicap_demo简介" class="hash-link" aria-label="Direct link to 2.6.1 vicap_demo简介" title="Direct link to 2.6.1 vicap_demo简介">​</a></h4>
<p>vicap demo通过调用mpi接口实现摄像头数据采集预览功能。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="262-feature说明">2.6.2 Feature说明<a href="#262-feature说明" class="hash-link" aria-label="Direct link to 2.6.2 Feature说明" title="Direct link to 2.6.2 Feature说明">​</a></h4>
<p>CanMV开发板默认使用OV5647摄像头模组，支持单个摄像头最多输出三路数据流。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="263-依赖资源">2.6.3 依赖资源<a href="#263-依赖资源" class="hash-link" aria-label="Direct link to 2.6.3 依 赖资源" title="Direct link to 2.6.3 依赖资源">​</a></h4>
<p>摄像头模组</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="264-使用说明">2.6.4 使用说明<a href="#264-使用说明" class="hash-link" aria-label="Direct link to 2.6.4 使用说明" title="Direct link to 2.6.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2641-编译">2.6.4.1 编译<a href="#2641-编译" class="hash-link" aria-label="Direct link to 2.6.4.1 编译" title="Direct link to 2.6.4.1 编译">​</a></h5>
<p>软件编译环境参考SDK中的<code>README.md</code>。</p>
<ol>
<li>在k230_sdk目录下执行<code>make mpp-clean &amp;&amp; rt-smart &amp;&amp; make build-image</code>，将大核的修改编译进sd卡镜像中，会在<code>k230_sdk/output/k230_evb_defconfig/images/</code>目录下生成镜像文件<code>sysimage-sdcard.img</code>。</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2642-执行">2.6.4.2 执行<a href="#2642-执行" class="hash-link" aria-label="Direct link to 2.6.4.2 执行" title="Direct link to 2.6.4.2 执行">​</a></h5>
<ol>
<li>将 <code>src/big/mpp/userapps/sample/elf/sample_vicap.elf</code>文件拷贝至本地指定的目录</li>
<li>将该目录通过nfs挂载至小核Linux的<code>/sharefs</code></li>
<li>在大核端，通过<code>cd /sharefs</code> 命令进入<code>/sharefs</code></li>
<li>在该目录下执行<code>./sample_vicap</code>命令获取命令帮助信息</li>
</ol>
<p>当输入：<code>sample_vicap</code>命令后打印如下提示信息：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">usage: ./sample_vicap -mode 0 -dev 0 -sensor 23 -chn 0 -chn 1 -ow 640 -oh 480 -preview 1 -rotation 1      // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage: ./sample_vicap -mode 0 -dev 0 -sensor 33 -chn 0 -chn 1 -ow 640 -oh 480 -preview 1 -rotation 1      // Canmv-K230-V2.0板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Options:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -mode:         vicap work mode[0: online mode, 1: offline mode. only offline mode support multiple sensor input]     default 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -dev:          vicap device id[0,1,2]        default 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -dw:           enable dewarp[0,1]    default 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -sensor:       sensor type[0: ov9732@1280x720, 1: ov9286_ir@1280x720], 2: ov9286_speckle@1280x720]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -ae:           ae status[0: disable AE, 1: enable AE]        default enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -awb:          awb status[0: disable AWB, 1: enable AWb]     default enable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -chn:          vicap output channel id[0,1,2]        default 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -ow:           the output image width, default same with input width</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -oh:           the output image height, default same with input height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -ox:           the output image start position of x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -oy:           the output image start position of y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -crop:         crop enable[0: disable, 1: enable]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -ofmt:         the output pixel format[0: yuv, 1: rgb888, 2: rgb888p, 3: raw], only channel 0 support raw data, default yuv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -preview:      the output preview enable[0: disable, 1: enable], only support 2 output channel preview</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -rotation:     display rotaion[0: degree 0, 1: degree 90, 2: degree 270, 3: degree 180, 4: unsupport rotaion]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -help:         print this help</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明如下：</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>可选参数值</strong></th><th><strong>参数说明</strong></th></tr></thead><tbody><tr><td>-dev</td><td>0：vicap设备0 1：vicap设备1 2：vicap设备2.</td><td>指定当前使用的vicap设备，系统最多支持三个vicap设备。通过指定设备号实现sensor与不同vicap设备之间的绑定关系。 例如： -dev 1 -sensor 0即表 示将ov9732 1280x720 RGB图像输出绑定到vicap设备1.</td></tr><tr><td>-mode</td><td>0：在线模式；1：离线模式</td><td>指定vicap设备工作模式，当前之前在线模式和离线模式。对于多个sensor输入，必须指定为离线模式。</td></tr><tr><td>-conn</td><td>0: 屏 hx8399； 1: HDMI lt9611-1920x1080p60； 2: HDMI lt9611-1920x1080p30</td><td>指定显示方式，可以选择屏或者HDMI 默认为0</td></tr><tr><td>-sensor</td><td>23：OV5647（Canmv-K230-V1.0/1.1板） 33：OV5647（Canmv-K230-V2.0板）</td><td>指定当前使用的sensor类型</td></tr><tr><td>-chn</td><td>0：vicap设备输出通道0 1：vicap设备输出通道1 2：vicap设备输出通道2.</td><td>指定当前使用的vicap设备的输出通道，一个vicap设备最多支持三路输出，仅通道0支持RAW图像格式输出</td></tr><tr><td>-ow</td><td></td><td>指定输出图像宽度，默认为输入图像宽度。宽度需要16字节对齐。 如果默认宽度超过显示屏输出最大宽度，则使用显示输出宽度作为图像最终输出宽度 如果输出宽度小于输入图像宽度，且未指定ox或者oy参数，则默认为缩放输出</td></tr><tr><td>-oh</td><td></td><td>指定输出图像高度，默认为输入图像高度。 如果默认高度超过显示屏输出最大高度，则使用显示输出高度作为图像最终输出高度 如果输出高度小于输入图像高度，且未指定ox或者oy参数，则默认为缩放输出</td></tr><tr><td>-ox</td><td></td><td>指定图像输出水平起始位置，该参数大于0将执行输出裁剪操作</td></tr><tr><td>-oy</td><td></td><td>指定图像输出垂直起始位置，该参数大于0将执行输出裁剪操作</td></tr><tr><td>-crop</td><td>0：禁用裁剪功能 1：使能裁剪功能</td><td>当输出图像尺寸小于输入图像尺寸时，默认未缩放输出，如果指定了该标志，则为裁剪输出</td></tr><tr><td>-ofmt</td><td>0：yuv格式输出 1：rgb格式输出 2：raw格式输出</td><td>指  定输出图像格式，默认为yuv输出。</td></tr><tr><td>-preview</td><td>0：禁用预览显示 1：使能预览显示</td><td>指定输出图像预览显示功能。默认为使能。当前最多支持2路输出图像同时预览。</td></tr><tr><td>-rotation</td><td>0：旋转0度 1：旋转90度 2：旋转180度 3：旋转270度 4：不支持旋转</td><td>指定预览显示窗口旋转角度。默认仅第一路输出图像窗口支持旋转功能。</td></tr></tbody></table>
<p>示例1：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vicap -conn 1 -dev 0 -sensor 23 -chn 0 -chn 1 -ow 640 -oh 480 -preview 0 // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vicap -conn 1 -dev 0 -sensor 33 -chn 0 -chn 1 -ow 640 -oh 480 -preview 0 // Canmv-K230-V2.0板</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>说明：将ov5647@1920x1080 RGB输出 绑定到vicap设备0,并使能vicap设备输出通道0和通道1，其中通道0输出大小默认为输入图像大小（1920x1080），通道1输出图像大小为640x480</p>
<p>示例2 ：ov5647三摄</p>
<p><img decoding="async" loading="lazy" alt="三摄OV5647" src="/assets/images/Tri_camera_board-7e1e017562a7f48e3cf2aa68fcc4216b.png" width="783" height="250" class="img_ev3q"></p>
<p>注意：背面的两个ov5647可以使用树莓派的ov5647摄像头，Canmv-K230 V1.0 V1.1版本的板子需要更换LDO为1.8V，如RT9013-18。如下图所示</p>
<p><img decoding="async" loading="lazy" alt="换LDO" src="/assets/images/pi_change_io-8e45cd805161d90b456e446031a7b008.png" width="467" height="407" class="img_ev3q"></p>
<p>如果不方便更换LDO可以等待后续的V1.2版本的板子。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vicap.elf -conn 1 -mode 1 -dev 0 -sensor 23 -chn 0 -ow 320 -oh 240 -dev 1 -sensor 26 -chn 0 -ow 320 -oh 240 -dev 2 -sensor 27 -chn 0 -ow 320 -oh 240 -ofmt 1 // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./sample_vicap.elf -conn 1 -mode 1 -dev 0 -sensor 31 -chn 0 -ow 320 -oh 240 -dev 1 -sensor 32 -chn 0 -ow 320 -oh 240 -dev 2 -sensor 33 -chn 0 -ow 320 -oh 240 -ofmt 1 // Canmv-K230-V2.0板</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="三摄结果" src="/assets/images/Tri_camera_result-5999b24e0b509d49c7e8a3d91dca89e1.png" width="888" height="576" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-dma_demo">2.7 DMA_demo<a href="#27-dma_demo" class="hash-link" aria-label="Direct link to 2.7 DMA_demo" title="Direct link to 2.7 DMA_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="271-dma_demo简介">2.7.1 DMA_demo简介<a href="#271-dma_demo简介" class="hash-link" aria-label="Direct link to 2.7.1 DMA_demo简介" title="Direct link to 2.7.1 DMA_demo简介">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2711-非绑定模式">2.7.1.1 非绑定模式<a href="#2711-非绑定模式" class="hash-link" aria-label="Direct link to 2.7.1.1 非绑定模式" title="Direct link to 2.7.1.1 非绑定模式">​</a></h5>
<p>dma 通道 0-3 是 gdma，4-7 是 sdma。</p>
<ul>
<li>通道 0 连续输入分辨率为 1920x1080 的图像，8bit，YUV400，单通道模式，旋转 90 度后输出，和 golden 数据比对</li>
<li>通道 1 连续输入分辨率为 1280x720 的图像，8bit，YUV420，双通道模式，旋转180 度后输出，和 golden 数据比对</li>
<li>通道 2 连续输入分辨率为 1280x720 的图像，10bit，YUV420，三通道模式，x-mirror，y-mirror 后输出，和 golden 数据比对</li>
<li>通道 4 为 1d 模式循环传输一段数据，传输完成后和 golden 数据比对</li>
<li>通道 5 为 2d 模式循环传输一段数据，传输完成后和 golden 数据比对</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2712-绑定模式">2.7.1.2 绑定模式<a href="#2712-绑定模式" class="hash-link" aria-label="Direct link to 2.7.1.2 绑定模式" title="Direct link to 2.7.1.2 绑定模式">​</a></h5>
<p>使用 vvi 作为 dma 模拟输入，vvi 设备 0 的通道 0 绑定 dma 的通道 0，vvi 设备 0 的通道 1 绑定 dma 的通道 1。vvi 每隔一秒，向通道 0 输入 640x320，YUV400，8bit，旋转 90° 的图像，向通道 1 输入 640x320，YUV400，8bit，旋转 180° 的图像。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="272-feature说明">2.7.2 Feature说明<a href="#272-feature说明" class="hash-link" aria-label="Direct link to 2.7.2 Feature说明" title="Direct link to 2.7.2 Feature说明">​</a></h4>
<p>包括 dma 设备属性配置，通道属性配置，图形输入、输出、释放，pipeline 绑定等功能。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="273-依赖资源">2.7.3 依赖资源<a href="#273-依赖资源" class="hash-link" aria-label="Direct link to 2.7.3 依赖资源" title="Direct link to 2.7.3 依赖资源">​</a></h4>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="274-使用说明">2.7.4 使用说明<a href="#274-使用说明" class="hash-link" aria-label="Direct link to 2.7.4 使用说明" title="Direct link to 2.7.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2741-编译">2.7.4.1 编译<a href="#2741-编译" class="hash-link" aria-label="Direct link to 2.7.4.1 编译" title="Direct link to 2.7.4.1 编译">​</a></h5>
<p>软件编译参考 release sdk 软件包中的 README.md。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2742-执行">2.7.4.2 执行<a href="#2742-执行" class="hash-link" aria-label="Direct link to 2.7.4.2 执行" title="Direct link to 2.7.4.2 执行">​</a></h5>
<ol>
<li>非绑定模式 demo 运行</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/sharefs/app/sample_dma.elf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>会有测试信息在屏幕上显示出来，输入 q 结束运行。</p>
<ol>
<li>绑定模式 demo 运行</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/sharefs/app/sample_dma_bind.elf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>会有测试信息在屏幕上显示出来，输入 q 结束运行。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="28-usb_demo">2.8 USB_demo<a href="#28-usb_demo" class="hash-link" aria-label="Direct link to 2.8 USB_demo" title="Direct link to 2.8 USB_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="281-usb_demo简介">2.8.1 USB_demo简介<a href="#281-usb_demo简介" class="hash-link" aria-label="Direct link to 2.8.1 USB_demo简介" title="Direct link to 2.8.1 USB_demo简介">​</a></h4>
<p>USB demo目前调试了4个功能，</p>
<p>作为device，模拟U盘，模拟鼠标键盘。</p>
<p>作为host，连接U盘，连接鼠标键盘。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="282-feature说明">2.8.2 Feature说明<a href="#282-feature说明" class="hash-link" aria-label="Direct link to 2.8.2 Feature说明" title="Direct link to 2.8.2 Feature说明">​</a></h4>
<p>USB demo的功能是linux系统原始集成的功能。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="283-依赖资源">2.8.3 依赖资源<a href="#283-依赖资源" class="hash-link" aria-label="Direct link to 2.8.3 依赖资源" title="Direct link to 2.8.3 依赖资源">​</a></h4>
<p>typeC线，typeC转typeA。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="284-使用说明">2.8.4 使用说明<a href="#284-使用说明" class="hash-link" aria-label="Direct link to 2.8.4 使用说明" title="Direct link to 2.8.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2841-作为device模拟u盘">2.8.4.1 作为device模拟U盘<a href="#2841-作为device模拟u盘" class="hash-link" aria-label="Direct link to 2.8.4.1 作为device模拟U盘" title="Direct link to 2.8.4.1 作为device模拟U盘">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#规划一块内存空间作为模拟U盘的磁盘空间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]#gadget-storage-mem.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2+0 records in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2+0 records out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkfs.fat 4.1 (2017-01-24)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 1218.882053] Mass Storage Function, version: 2009/09/11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 1218.887308] LUN: removable file: (no medium)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 1218.895464] dwc2 91500000.usb-otg: bound driver configfs-gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]#[ 1219.019554] dwc2 91500000.usb-otg: new device is high-speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[ 1219.056629] dwc2 91500000.usb-otg: new address 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">##使用SD/eMMC的FAT分区当作模拟U盘的磁盘空间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#gadget-storage.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  359.995510] Mass Storage Function, version: 2009/09/11</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  360.000762] LUN: removable file: (no medium)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  360.013138] dwc2 91500000.usb-otg: bound driver configfs-gadget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#[  360.136809] dwc2 91500000.usb-otg: new device is high-speed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[  360.173543] dwc2 91500000.usb-otg: new address 43</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>连接开发板的USB口，typeC连接PC，PC上显示U盘连接。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2842-作为host连接u盘">2.8.4.2 作为HOST连接U盘<a href="#2842-作为host连接u盘" class="hash-link" aria-label="Direct link to 2.8.4.2 作为HOST连接U盘" title="Direct link to 2.8.4.2 作为HOST连接U盘">​</a></h5>
<p>K230开发板USB口通过typeC转typeA连接U盘。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2843-作为device模拟鼠标键盘">2.8.4.3 作为device模拟鼠标键盘<a href="#2843-作为device模拟鼠标键盘" class="hash-link" aria-label="Direct link to 2.8.4.3 作为device模拟鼠标键盘" title="Direct link to 2.8.4.3 作为device模拟鼠标键盘">​</a></h5>
<p>K230开发板USB口通过typeC连接另外一台电脑设备来进行测试</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]#gadget-hid.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]#hid_gadget_test /dev/hidg0 mouse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#根据提示输入相应的操作，比如-123 -123，可以看到PC上的鼠标指针移动。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]#hid_gadget_test /dev/hidg1 keyboard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#根据提示输入相应的操作，可以看到PC上的类似键盘输入。比如a b c --return</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2844-作为host连接鼠标键盘">2.8.4.4 作为HOST连接鼠标键盘<a href="#2844-作为host连接鼠标键盘" class="hash-link" aria-label="Direct link to 2.8.4.4 作为HOST连接鼠标键盘" title="Direct link to 2.8.4.4 作为HOST连接鼠标键盘">​</a></h5>
<p>K230开发板USB通过typeC转typeA连接鼠标或键盘。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#通过以下命令确定input设备对应的event。K230开发板如果没有连接屏幕，连接鼠标键盘对应的event会改变。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cat /proc/bus/input/devices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Bus=0003 Vendor=046d Product=c52f Version=0111</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">N: Name=&quot;Logitech USB Receiver&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">P: Phys=usb-91500000.usb-otg-1/input0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S: Sysfs=/devices/platform/soc/91500000.usb-otg/usb1/1-1/1-1:1.0/0003:046D:C52F.0001/input/input2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">U: Uniq=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">H: Handlers=event2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: PROP=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: EV=17</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: KEY=ffff0000 0 0 0 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: REL=1943</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">B: MSC=10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]$ test_mouse /dev/input/event2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#点击或移动鼠标，串口会有对应的显示。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan / ]$ test_keyboard /dev/input/event2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#按下键盘不同的按键，串口会有对应的显示。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="29-gpu_demo">2.9 GPU_demo<a href="#29-gpu_demo" class="hash-link" aria-label="Direct link to 2.9 GPU_demo" title="Direct link to 2.9 GPU_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="291-gpu_demo简介">2.9.1 GPU_demo简介<a href="#291-gpu_demo简介" class="hash-link" aria-label="Direct link to 2.9.1 GPU_demo简介" title="Direct link to 2.9.1 GPU_demo简介">​</a></h4>
<p>GPU demo共包含三个可执行程序</p>
<ul>
<li><code>tiger</code>：绘制老虎的矢量图示例</li>
<li><code>linearGrad</code>: 绘制线性渐变示例</li>
<li><code>imgIndex</code>: 绘制颜色查找表示例</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="292-feature说明">2.9.2 Feature说明<a href="#292-feature说明" class="hash-link" aria-label="Direct link to 2.9.2 Feature说明" title="Direct link to 2.9.2 Feature说明">​</a></h4>
<p>GPU demo主要覆盖GPU的矢量绘制、线性渐变（通过pattern实现）、颜色查找表三个功能。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="293-依赖资源">2.9.3 依赖资源<a href="#293-依赖资源" class="hash-link" aria-label="Direct link to 2.9.3 依赖资源" title="Direct link to 2.9.3 依赖资源">​</a></h4>
<p>文件系统可写。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="294-使用说明">2.9.4 使用说明<a href="#294-使用说明" class="hash-link" aria-label="Direct link to 2.9.4 使用说明" title="Direct link to 2.9.4 使用说明">​</a></h4>
<p>进入一个可写的目录，执行程序</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2941-tiger">2.9.4.1 tiger<a href="#2941-tiger" class="hash-link" aria-label="Direct link to 2.9.4.1 tiger" title="Direct link to 2.9.4.1 tiger">​</a></h5>
<p>小核运行<code>tiger</code>命令，执行完成后在当前目录下生成tiger.png，如下图所示</p>
<p><img decoding="async" loading="lazy" alt="老虎图像" src="/assets/images/e54764629a9e9fb63ec4340d316e4f42-dcb96ecfbf7cdd2a0a090e87e8b53e58.png" width="640" height="480" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2942-lineargrad">2.9.4.2 linearGrad<a href="#2942-lineargrad" class="hash-link" aria-label="Direct link to 2.9.4.2 linearGrad" title="Direct link to 2.9.4.2 linearGrad">​</a></h5>
<p>小核运行<code>linearGrad</code>命令，执行完成后在当前目录生成linearGrad.png，如下图所示</p>
<p><img decoding="async" loading="lazy" alt="线性渐变" src="/assets/images/24db1c231608cd26a5a981e055aa6910-96b8921a6b1552f0649b0d07c9897068.png" width="320" height="480" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2943-imgindex">2.9.4.3 imgIndex<a href="#2943-imgindex" class="hash-link" aria-label="Direct link to 2.9.4.3 imgIndex" title="Direct link to 2.9.4.3 imgIndex">​</a></h5>
<p>小核运行<code>imgIndex</code>命令，执行完成后在当前目录生成4个图片文件，如下图所示</p>
<ul>
<li><code>imgIndex1.png</code>: index1模式，支持2种颜色</li>
</ul>
<p><img decoding="async" loading="lazy" alt="index1" src="/assets/images/9f7f9bfaedf0f183b63b59ace6e1569e-1b4b3fd117e0a553f9fa208fbc4ad740.png" width="320" height="480" class="img_ev3q"></p>
<ul>
<li><code>imgIndex2.png</code>: index2模式，支持4种颜色</li>
</ul>
<p><img decoding="async" loading="lazy" alt="index2" src="/assets/images/c4bb92a96fd0ba1f4973a27ecd6f60eb-ce48fb18508865153563f2b5d8582aaf.png" width="320" height="480" class="img_ev3q"></p>
<ul>
<li><code>imgIndex4.png</code>: index4模式，支持16种颜色</li>
</ul>
<p><img decoding="async" loading="lazy" alt="index4" src="/assets/images/9a3c47da0975b0226e75453a79a8da2c-514d847f217d5c132d6fb8bf82e32c9d.png" width="320" height="480" class="img_ev3q"></p>
<ul>
<li><code>imgIndex8.png</code>: index8模式，支持256种颜色</li>
</ul>
<p><img decoding="async" loading="lazy" alt="index8" src="/assets/images/1f24a6530d8c0d1ed22bb3eea26a33fb-755cf32a6072ac88ee9e8a12e9b34979.png" width="320" height="480" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2944-vglite_drm">2.9.4.4 vglite_drm<a href="#2944-vglite_drm" class="hash-link" aria-label="Direct link to 2.9.4.4 vglite_drm" title="Direct link to 2.9.4.4 vglite_drm">​</a></h5>
<p>小核运行<code>vglite_drm</code>命令，会在LCD屏幕上显示由GPU绘制的图案，再按一次<code>Enter</code>键显示下一个图案，如图所示</p>
<p><img decoding="async" loading="lazy" alt="第一个图案" src="/assets/images/gpu-hdmi-2-ffdb7d34c1e5b7fc190ea9fbd9a8b172.jpg" width="1920" height="1080" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2945-vglite_cube">2.9.4.5 vglite_cube<a href="#2945-vglite_cube" class="hash-link" aria-label="Direct link to 2.9.4.5 vglite_cube" title="Direct link to 2.9.4.5 vglite_cube">​</a></h5>
<p>小核运行<code>vglite_cube</code>命令，会在LCD屏幕上显示由GPU绘制的旋转的正方体，如下图所示</p>
<p><img decoding="async" loading="lazy" alt="Cube" src="/assets/images/gpu-hdmi-1-7ba96a4d48bb10cae1814459d472ba6d.jpg" width="1920" height="1080" class="img_ev3q"></p>
<p>这个demo运行时内核会有大量的打印消息，如果不希望显示这些消息可以降低内核打印级别</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sysctl -w kernel.printk=6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="210-drm显示demo">2.10 DRM显示demo<a href="#210-drm显示demo" class="hash-link" aria-label="Direct link to 2.10 DRM显示demo" title="Direct link to 2.10 DRM显示demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2101-demo使用简介">2.10.1 demo使用简介<a href="#2101-demo使用简介" class="hash-link" aria-label="Direct link to 2.10.1 demo使用简介" title="Direct link to 2.10.1 demo使用简介">​</a></h4>
<p>该demo运行在K230小核的Linux系统上，具体是将图片显示到屏幕上。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2102-features说明">2.10.2 Features说明<a href="#2102-features说明" class="hash-link" aria-label="Direct link to 2.10.2 Features说明" title="Direct link to 2.10.2 Features说明">​</a></h4>
<ol>
<li>DRM支持5个图层操作，具体包括：1个video层和4个OSD层；</li>
<li>video层支持NV12、NV21、NV16、NV61颜色空间</li>
<li>OSD层支持ARGB8888、ARGB4444、RGB888、RGB565颜色空间</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2103-依赖资源">2.10.3 依赖资源<a href="#2103-依赖资源" class="hash-link" aria-label="Direct link to 2.10.3 依赖资源" title="Direct link to 2.10.3 依赖资源">​</a></h4>
<p>HDMI显示器</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2104-使用说明">2.10.4 使用说明<a href="#2104-使用说明" class="hash-link" aria-label="Direct link to 2.10.4 使用说明" title="Direct link to 2.10.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21041-编译">2.10.4.1 编译<a href="#21041-编译" class="hash-link" aria-label="Direct link to 2.10.4.1 编译" title="Direct link to 2.10.4.1 编译">​</a></h5>
<p>软件编译参考release sdk软件包中的README.md</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21042-执行">2.10.4.2 执行<a href="#21042-执行" class="hash-link" aria-label="Direct link to 2.10.4.2 执行" title="Direct link to 2.10.4.2 执行">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modetest -M canaan-drm -D 0 -a -s 38@36:1920x1080-30  -P 32@36:1920x1080@AR24 -v -F smpte</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行完上述命令，会在HDMI显示器上显示彩条，具体如下所示：</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/modetest_ar24_smpte_hdmi-19f429b6d022f899fd89f3ba5f595846.png" width="1920" height="1080" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="211-lvgl-demo">2.11 LVGL demo<a href="#211-lvgl-demo" class="hash-link" aria-label="Direct link to 2.11 LVGL demo" title="Direct link to 2.11 LVGL demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2111-demo使用简介">2.11.1 demo使用简介<a href="#2111-demo使用简介" class="hash-link" aria-label="Direct link to 2.11.1 demo使用简介" title="Direct link to 2.11.1 demo使用简介">​</a></h4>
<p>该demo运行在K230小核的Linux系统上，会在HDMI显示器上显示一个配置界面。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2113-依赖资源">2.11.3 依赖资源<a href="#2113-依赖资源" class="hash-link" aria-label="Direct link to 2.11.3 依赖资源" title="Direct link to 2.11.3 依赖资源">​</a></h4>
<p>HDMI显示器</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2113-使用说明">2.11.3 使用说明<a href="#2113-使用说明" class="hash-link" aria-label="Direct link to 2.11.3 使用说明" title="Direct link to 2.11.3 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21131-编译">2.11.3.1 编译<a href="#21131-编译" class="hash-link" aria-label="Direct link to 2.11.3.1 编译" title="Direct link to 2.11.3.1 编译">​</a></h5>
<p>软件编译参考release sdk软件包中的README.md</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21132-执行">2.11.3.2 执行<a href="#21132-执行" class="hash-link" aria-label="Direct link to 2.11.3.2 执行" title="Direct link to 2.11.3.2 执行">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">lvgl_demo_widgets</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行完上述命令，会在HDMI显示器上显示配置界面，具体如下所示：</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/lvgl_demo_widgets_hdmi-550fe56d3c047307801307ac2418a396.png" width="1920" height="1080" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="212-rtsp推流demo">2.12 Rtsp推流Demo<a href="#212-rtsp推流demo" class="hash-link" aria-label="Direct link to 2.12 Rtsp推流Demo" title="Direct link to 2.12 Rtsp推流Demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2121-demo简介">2.12.1 Demo简介<a href="#2121-demo简介" class="hash-link" aria-label="Direct link to 2.12.1 Demo简介" title="Direct link to 2.12.1 Demo简介">​</a></h4>
<p>该demo实现rtsp推流。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2122-feature说明">2.12.2 Feature说明<a href="#2122-feature说明" class="hash-link" aria-label="Direct link to 2.12.2 Feature说明" title="Direct link to 2.12.2 Feature说明">​</a></h4>
<p>该demo支持音视频码流同时推流到rtsp server上，其中通过<code>mapi venc&amp;aenc</code>接口实现对音视频的编码；推流之后通过url进行拉取，目前该demo支持3路url推拉流。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2123-依赖资源">2.12.3 依赖资源<a href="#2123-依赖资源" class="hash-link" aria-label="Direct link to 2.12.3 依赖资源" title="Direct link to 2.12.3 依赖资源">​</a></h4>
<p>需要usb转eth网口转换器，将开发板连接网线</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2124-使用说明">2.12.4 使用说明<a href="#2124-使用说明" class="hash-link" aria-label="Direct link to 2.12.4 使用说明" title="Direct link to 2.12.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21241-编译">2.12.4.1 编译<a href="#21241-编译" class="hash-link" aria-label="Direct link to 2.12.4.1 编译" title="Direct link to 2.12.4.1 编译">​</a></h5>
<p>参考release sdk软件包中的<code>README.md</code>中介绍，在docker环境编译cdk-user即可，编译完成后在<code>k230_sdk/src/common/cdk/user/out/little</code>下生成可执行程序rtsp_demo</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21242-执行">2.12.4.2 执行<a href="#21242-执行" class="hash-link" aria-label="Direct link to 2.12.4.2 执行" title="Direct link to 2.12.4.2 执行">​</a></h5>
<p>rtsp_demo默认使用的sensor类型是IMX335_MIPI_2LANE_RAW12_1920X1080_30FPS_LINEAR，可通过命令行传参的方式修改sensor类型以及其他参数，具体说明如下：</p>
<p>启动开发板后:</p>
<ol>
<li>通过 <code>lsmod</code> 检查小核侧是否加载k_ipcm模块，如未加载，执行 <code>insmod k_ipcm.ko</code> 加载k_ipcm模块</li>
<li>在大核侧启动核间通信进程，执行 <code>./sample_sys_inif.elf</code></li>
<li>在小核侧/mnt目录下，执行 <code>./rtsp_demo</code>，默认为1路h265视频编码推流，分辨率为1280x720，如需传参参看如下参数说明，当推流mjpeg码流时，分辨率目前最大支持2032x1944，最小分辨率为640x480.</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./rtsp_demo -s 24 -n 2 -t h265 -w 1280 -h 720 -a 0  // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./rtsp_demo -s 39 -n 2 -t h265 -w 1280 -h 720 -a 0  // Canmv-K230-V2.0板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: ./rtsp_demo -s 52 -n 2 -t h264 -w 480 -h 800 -a 0   // DshanPI-CanMV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -s: the sensor type:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        see vicap doc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -n: the session number, range: 1, 2，3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -t: the video encoder type: h264/h265/mjpeg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -w: the video encoder width</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -h: the video encoder height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -a: audio input type(0:mic input  1:headphone input):default 0.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中sensor类型取值查看<code>k230_docs/zh/01_software/board/mpp/K230_Camera_Sensor适配指南.md</code>文档中关于k_vicap_sensor_type的描述 音频输入类型可选择：板载mic或者耳机输入。</p>
<p>小核上正常运行rtsp_demo后，会打印出形如：<code>rtsp://ip:8554/session0</code> 的url地址，其中 0 代表第0路，可通过vlc拉取url的流进行播放；如需停止运行，请先停止vlc拉流，然后执行<code>ctrl+c</code>停止运行 rtsp_demo。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="213-faceaedemo">2.13 FaceAeDemo<a href="#213-faceaedemo" class="hash-link" aria-label="Direct link to 2.13 FaceAeDemo" title="Direct link to 2.13 FaceAeDemo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2131-demo介绍">2.13.1 Demo介绍<a href="#2131-demo介绍" class="hash-link" aria-label="Direct link to 2.13.1 Demo介绍" title="Direct link to 2.13.1 Demo介绍">​</a></h4>
<p>该demo在大核使用，是VICAP、KPU、VO（视频输出）、AERoi联调的demo，可通过人脸检测的接口适当调节人脸曝光亮度。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2132-编译">2.13.2 编译<a href="#2132-编译" class="hash-link" aria-label="Direct link to 2.13.2 编译" title="Direct link to 2.13.2 编译">​</a></h4>
<ol>
<li>首先参考release sdk软件包中的README.md，使用docker编译镜像。</li>
<li>编译完成后，默认将该sample（sample_face_ae.elf）存放在该路径下<code>k230_sdk/src/big/mpp/userapps/sample/elf</code></li>
<li>由于KPU联动需要使用检测模型test.kmodel，编译后存放路径<code>k230_sdk/src/big/mpp/userapps/sample/elf</code></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2133-执行">2.13.3 执行<a href="#2133-执行" class="hash-link" aria-label="Direct link to 2.13.3 执行" title="Direct link to 2.13.3 执行">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /sharefs/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./sample_face_ae.elf test.kmodel 1 # arg1: 模型名称， arg2： 开启face ae</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">等待初始化完成提示任意字母+enter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">键入a，键入回车，运行face ae demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">执行成功后，会打印每一帧图像的物理地址</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="214-fft-demo">2.14 FFT Demo<a href="#214-fft-demo" class="hash-link" aria-label="Direct link to 2.14 FFT Demo" title="Direct link to 2.14 FFT Demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2141-demo-简介">2.14.1 Demo 简介<a href="#2141-demo-简介" class="hash-link" aria-label="Direct link to 2.14.1 Demo 简介" title="Direct link to 2.14.1 Demo 简介">​</a></h4>
<p>本 demo 用于验证fft api使用，测试fft功能，代码见src/big/mpp/userapps/sample/sample_fft/</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2142-feature说明">2.14.2 Feature说明<a href="#2142-feature说明" class="hash-link" aria-label="Direct link to 2.14.2 Feature说明" title="Direct link to 2.14.2 Feature说明">​</a></h4>
<p>先进行fft计算，在进行ifft计算</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2143-依赖资源">2.14.3 依赖资源<a href="#2143-依赖资源" class="hash-link" aria-label="Direct link to 2.14.3 依赖资源" title="Direct link to 2.14.3 依赖资源">​</a></h4>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2144-使用说明">2.14.4 使用说明<a href="#2144-使用说明" class="hash-link" aria-label="Direct link to 2.14.4 使用说明" title="Direct link to 2.14.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21441-编译">2.14.4.1 编译<a href="#21441-编译" class="hash-link" aria-label="Direct link to 2.14.4.1 编译" title="Direct link to 2.14.4.1 编译">​</a></h5>
<blockquote>
<p>请参考release sdk软件包中的README.md。</p>
</blockquote>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21442-执行">2.14.4.2 执行<a href="#21442-执行" class="hash-link" aria-label="Direct link to 2.14.4.2 执行" title="Direct link to 2.14.4.2 执行">​</a></h5>
<ol>
<li>
<p>大小核系统都起来后，在大核命令行执行下面命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /sharefs/app;./sample_fft.elf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>大核串口输出内容如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">msh /sharefs/app&gt;./sample_fft.elf 1 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0064  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0003 0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0045 real  hf 0000  hif fc24 org fc21 dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0003 imag  hf ffff  hif 0001 org 0000 dif 0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0064 use 133 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0128  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0003 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0015 real  hf 0001  hif fca1 org fc9e dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0031 imag  hf 0001  hif fffe org 0000 dif 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0128 use 121 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0256  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0003 0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0030 real  hf 0000  hif fca1 org fc9e dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0007 imag  hf ffff  hif 0001 org 0000 dif 0001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0256 use 148 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0512  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0003 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0060 real  hf 0000  hif fca1 org fc9e dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0314 imag  hf 0001  hif fffd org 0000 dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 0512 use 206 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 1024  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0005 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0511 real  hf 0000  hif fc00 org fc05 dif 0005</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0150 imag  hf 0000  hif fffe org 0000 dif 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 1024 use 328 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 2048  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0005 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=1022 real  hf 0000  hif fc00 org fc05 dif 0005</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=1021 imag  hf 0000  hif 0003 org 0000 dif 0003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 2048 use 574 us result: ok</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 4096  -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    max diff 0005 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=4094 real  hf 027b  hif 041f org 0424 dif 0005</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i=0122 imag  hf 0000  hif 0002 org 0000 dif 0002</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----fft ifft point 4096 use 1099 us result: ok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="215-sdio-wifi">2.15 SDIO WIFI<a href="#215-sdio-wifi" class="hash-link" aria-label="Direct link to 2.15 SDIO WIFI" title="Direct link to 2.15 SDIO WIFI">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2151-demo介绍">2.15.1 Demo介绍<a href="#2151-demo介绍" class="hash-link" aria-label="Direct link to 2.15.1 Demo介绍" title="Direct link to 2.15.1 Demo介绍">​</a></h4>
<p>CANMV开发板上使用了一颗支持2.4G的SDIO WIFI，AP6212。支持STA与softAP模式。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2152-编译">2.15.2 编译<a href="#2152-编译" class="hash-link" aria-label="Direct link to 2.15.2 编译" title="Direct link to 2.15.2 编译">​</a></h4>
<p>k230_sdk编译CANMV的配置默认是支持AP6212 WIFI的。</p>
<p>make menuconfig</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">K230 SDK Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wifi configurations  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [*] enable ap6212a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使能ap6212a后，k230_sdk 会把WIFI需要的固件或nvram配置拷贝到文件系统中。</p>
<p>make linux-menuconfig</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Linux/riscv 5.10.4 Kernel Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Device Drivers  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [*] Network device support  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Wireless LAN  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;M&gt;   Broadcom FullMAC wireless cards support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                (/etc/firmware/fw_bcm43456c5_ag.bin) Firmware path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                (/etc/firmware/nvram.txt) NVRAM path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Enable Chip Interface (SDIO bus interface support)  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Interrupt type (In-Band Interrupt)  ---&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置LINUX编译WIFI驱动，CANMV默认WIFI的STA与softAP共存模式。源码路径：</p>
<p>src/little/linux/drivers/net/wireless/bcmdhd</p>
<p>make buildroot-menuconfig</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Buildroot 2021.02-git Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Target packages  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Networking applications  ---&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*] hostapd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable hostap driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable nl80211 driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [ ]   Enable wired driver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable ACS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable EAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable WPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable WPA3 support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]   Enable VLAN support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]     Enable dynamic VLAN support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*]     Use netlink-based API for VLAN operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*] wireless tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Install shared library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            [*] wpa_supplicant</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable nl80211 support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable AP mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]     Enable Wi-Fi Display</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]     Enable mesh networking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable autoscan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable EAP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable HS20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable syslog support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable WPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable WPA3 support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Install wpa_clibinary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [ ]   Install wpa_client shared library</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Install wpa_passphrase binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [*]   Enable support for the DBus control interface</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>编译buildroot，增加无线使用的工具。</p>
<p>WIFI模块在系统启动时在uboot中进行复位。源码：</p>
<p>src/little/uboot/board/canaan/k230_canmv/board.c : board_late_init</p>
<p>WIFI模块在系统启动后，if wlan down/up 对WIFI模块进行上电下电操作。源码：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;gpio1 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;mmc_sd0{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    status = &quot;okay&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    io_fixed_1v8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rx_delay_line = &lt;0x00&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tx_delay_line = &lt;0x00&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bcmdhd_wlan {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        compatible = &quot;android,bcmdhd_wlan&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gpio_wl_reg_on = &lt;&amp;port1 0 GPIO_ACTIVE_HIGH&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2145-执行">2.14.5 执行<a href="#2145-执行" class="hash-link" aria-label="Direct link to 2.14.5 执行" title="Direct link to 2.14.5 执行">​</a></h4>
<p>STA是Station的缩写，它是无线网络中的一个终端站点设备，可以看成是一个客户端，一般来说，处在STA模式下的设备本身不接受无线的接入，该设备连接到AP节点进行网络访问，我们的手机就是作为STA连接路由器。</p>
<p>AP是Access Point的缩写，即无线接入点，它是一个无线网络的中心节点，可以看成是一个服务器。它作为一个网络的中心节点，提供无线接入服务，其他的无线设备允许接入该节点，所有接入该节点设备的无线信号数据都要通过它才能进行交换和互相访问。一般的无线路由器、网关、热点就是工作在AP模式下，AP节点和AP节点之间允许相互连接。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21451-sta测试">2.14.5.1 STA测试<a href="#21451-sta测试" class="hash-link" aria-label="Direct link to 2.14.5.1 STA测试" title="Direct link to 2.14.5.1 STA测试">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig -a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig  wlan0 up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_supplicant -D nl80211 -i wlan0 -c /etc/wpa_supplicant.conf -B</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 scan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 scan_result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 add_network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 set_network 1 psk &#x27;&quot;12345678&quot;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 set_network 1 ssid &#x27;&quot;wifi_test&quot;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wpa_cli -i wlan0 select_network 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udhcpc -i wlan0 -q</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21452-ap测试">2.14.5.2 AP测试<a href="#21452-ap测试" class="hash-link" aria-label="Direct link to 2.14.5.2 AP测试" title="Direct link to 2.14.5.2 AP测试">​</a></h5>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cat /etc/hostapd.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ctrl_interface=/var/run/hostapd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">driver=nl80211</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ieee80211n=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">interface=wlan1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hw_mode=g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">channel=6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">beacon_int=100</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dtim_period=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssid=k230_ap</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth_algs=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ap_isolate=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignore_broadcast_ssid=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ifconfig wlan1 192.168.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">udhcpd /etc/udhcpd.conf &amp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hostapd /etc/hostapd.conf &amp;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>sta可以直接连接无密码的k230_ap热点。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="215-uvc_demo">2.15 UVC_demo<a href="#215-uvc_demo" class="hash-link" aria-label="Direct link to 2.15 UVC_demo" title="Direct link to 2.15 UVC_demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2151-uvc_demo简介">2.15.1 uvc_demo简介<a href="#2151-uvc_demo简介" class="hash-link" aria-label="Direct link to 2.15.1 uvc_demo简介" title="Direct link to 2.15.1 uvc_demo简介">​</a></h4>
<p>uvc demo把K230开发板当作一个USB摄像头，USB线连接到PC，PC的播放器可以播放真实摄像头的图像。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2152-feature说明">2.15.2 Feature说明<a href="#2152-feature说明" class="hash-link" aria-label="Direct link to 2.15.2 Feature说明" title="Direct link to 2.15.2 Feature说明">​</a></h4>
<p>当前版本支持bulk传输与ISO传输。</p>
<p>当前版本只支持640x480 NV12格式图像 1280x720 H264/MJPEG格式图像。</p>
<p>支持PID、VID以及设备名称通过修改shell脚本配置。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2153-依赖资源">2.15.3 依赖资源<a href="#2153-依赖资源" class="hash-link" aria-label="Direct link to 2.15.3 依赖资源" title="Direct link to 2.15.3 依赖资源">​</a></h4>
<p>type c线连接USB0与PC</p>
<p>PC的相机应用或安装PotPlayer软件</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2154-使用说明">2.15.4 使用说明<a href="#2154-使用说明" class="hash-link" aria-label="Direct link to 2.15.4 使用说明" title="Direct link to 2.15.4 使用说明">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21541-编译">2.15.4.1 编译<a href="#21541-编译" class="hash-link" aria-label="Direct link to 2.15.4.1 编译" title="Direct link to 2.15.4.1 编译">​</a></h5>
<p>软件编译环境参考SDK中的README.md。</p>
<ol>
<li>小核用户程序源码位于<code>cdk/user/mapi/sample/camera</code></li>
<li>小核驱动程序位于<code>linux/drivers/usb/dwc2</code></li>
<li>小核驱动程序位于<code>linux/drivers/usb/gadget</code></li>
<li>大核程序涉及到mpp仓库以及cdk</li>
</ol>
<p>大核rtt实现摄像头驱动功能。</p>
<p>小核linux实现USB驱动功能，通过mapi从大核获取摄像头图像。</p>
<p>参考 <a href="https://developer.canaan-creative.com/k230/zh/dev/02_applications/tutorials/K230_USB%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98_UVC%E4%BC%A0%E8%BE%93YUV%E5%8F%8A%E7%BC%96%E7%A0%81%E7%A0%81%E6%B5%81.html" target="_blank" rel="noopener noreferrer">K230_USB应用实战_UVC传输YUV及编码码流</a></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="21542-执行">2.15.4.2 执行<a href="#21542-执行" class="hash-link" aria-label="Direct link to 2.15.4.2 执行" title="Direct link to 2.15.4.2 执行">​</a></h5>
<p>进入大核rt-smart系统后，进入/bin目录下，执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">msh /sharefs/app&gt;./sample_sys_init.elf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>进入小核linux系统后，进入<code>/mnt</code>目录下，执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./canaan-camera.sh start otg0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./camera -t 24</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./camera -t 52  // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>typec USB线连接USB0与PC，potplayer播放器播放摄像头。</p>
<p>默认使用BULK传输，使用以下命令可以更改为ISO传输。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">./canaan-camera.sh stop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./canaan-camera.sh start otg0 iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./camera -i -t 24  // Canmv-K230-V1.0/1.1板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./camera -i -t 39  // Canmv-K230-V2.0板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./camera -i -t 52  // DshanPI-CanMV</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>-t 选项用于指定vicap sensor 类型，请参考<code>k230_docs/zh/01_software/board/mpp/K230_Camera_Sensor适配指南.md</code>文档中关于k_vicap_sensor_type的描述，CanMV需指定为24。</p>
<p>进入PotPlayer -&gt; <code>选项</code> -&gt; <code>设备</code> -&gt; <code>摄像头</code> 界面, <code>视频录制设备</code>-&gt;<code>设备</code>，选择<code>UVC Camera</code> <code>视频录制设备</code>-&gt; <code>格式</code>，选择<code>H264 1280*720 30(P 16:9)</code>或<code>MJPG 1280*720 30(P 16:9)</code>或<code>NV12 640*360p 30(P 16:9)</code></p>
<p>PotPlayer -&gt; <code>打开</code> -&gt; <code>摄像头/其他设备</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="216-yuv-sensor-demo">2.16 YUV Sensor demo<a href="#216-yuv-sensor-demo" class="hash-link" aria-label="Direct link to 2.16 YUV Sensor demo" title="Direct link to 2.16 YUV Sensor demo">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2161-demo简介">2.16.1 Demo简介<a href="#2161-demo简介" class="hash-link" aria-label="Direct link to 2.16.1 Demo简介" title="Direct link to 2.16.1 Demo简介">​</a></h4>
<p>三路YUV sensor输入，通过vicap的MCM硬件输出yuv444 packed格式到ddr，利用nonai_2d硬件的CSC功能转成nv12格式。</p>
<p>vicap绑定nonai_2d，nonai_2d一出二绑定venc和vo，做rtsp推流和屏显。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2162-feature说明">2.16.2 Feature说明<a href="#2162-feature说明" class="hash-link" aria-label="Direct link to 2.16.2 Feature说明" title="Direct link to 2.16.2 Feature说明">​</a></h4>
<p>只支持1280x720分辨率。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2163-依赖资源">2.16.3 依赖资源<a href="#2163-依赖资源" class="hash-link" aria-label="Direct link to 2.16.3 依赖资源" title="Direct link to 2.16.3 依赖资源">​</a></h4>
<p>依赖特殊的转接板硬件，见下图：</p>
<p><img decoding="async" loading="lazy" alt="图片描述" src="/assets/images/yuv_sensor-89d2a65d43b09b8be1f4678dc004a99e.png" width="576" height="432" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2164-使用说明">2.16.4 使用说明<a href="#2164-使用说明" class="hash-link" aria-label="Direct link to 2.16.4 使用说  明" title="Direct link to 2.16.4 使用说明">​</a></h4>
<p>进入大核rt-smart系统后，执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/sharefs/app/sample_yuv_sensor.elf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>进入小核linux系统后，执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/mnt/yuv_sensor_demo -n </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>小核上正常运行rtsp_demo后，会打印出形如：<code>rtsp://10.100.228.150:8554/BackChannelTest0</code> 的url地址，其中 0 代表第0路，可通过vlc拉取url的流进行播放，也可接HDMI输出到屏幕观看</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part3/17_K230SDKCanMVBoardDemoDirectionsforuse.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CanaanK230/part3/K230FancyPOCintroduce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">K230 Fancy POC介绍</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CanaanK230/part3/K230SDKEVBBoardDemoDirectionsforuse"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">K230 SDK EVB Board Demo使用指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-概述" class="table-of-contents__link toc-highlight">1. 概述</a></li><li><a href="#2-demo介绍" class="table-of-contents__link toc-highlight">2. Demo介绍</a><ul><li><a href="#21-display_demo" class="table-of-contents__link toc-highlight">2.1 Display_demo</a></li><li><a href="#22-venc_demo" class="table-of-contents__link toc-highlight">2.2 Venc_demo</a></li><li><a href="#23-nonai_2d_demo" class="table-of-contents__link toc-highlight">2.3 Nonai_2d_demo</a></li><li><a href="#24-vdec_demo" class="table-of-contents__link toc-highlight">2.4 Vdec_demo</a></li><li><a href="#25-audio_demo" class="table-of-contents__link toc-highlight">2.5 Audio_demo</a></li><li><a href="#26-vicap_demo" class="table-of-contents__link toc-highlight">2.6 Vicap_demo</a></li><li><a href="#27-dma_demo" class="table-of-contents__link toc-highlight">2.7 DMA_demo</a></li><li><a href="#28-usb_demo" class="table-of-contents__link toc-highlight">2.8 USB_demo</a></li><li><a href="#29-gpu_demo" class="table-of-contents__link toc-highlight">2.9 GPU_demo</a></li><li><a href="#210-drm显示demo" class="table-of-contents__link toc-highlight">2.10 DRM显示demo</a></li><li><a href="#211-lvgl-demo" class="table-of-contents__link toc-highlight">2.11 LVGL demo</a></li><li><a href="#212-rtsp推流demo" class="table-of-contents__link toc-highlight">2.12 Rtsp推流Demo</a></li><li><a href="#213-faceaedemo" class="table-of-contents__link toc-highlight">2.13 FaceAeDemo</a></li><li><a href="#214-fft-demo" class="table-of-contents__link toc-highlight">2.14 FFT Demo</a></li><li><a href="#215-sdio-wifi" class="table-of-contents__link toc-highlight">2.15 SDIO WIFI</a></li><li><a href="#215-uvc_demo" class="table-of-contents__link toc-highlight">2.15 UVC_demo</a></li><li><a href="#216-yuv-sensor-demo" class="table-of-contents__link toc-highlight">2.16 YUV Sensor demo</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>