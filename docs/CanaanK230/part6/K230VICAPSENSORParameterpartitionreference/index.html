<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-CanaanK230/part6/K230VICAPSENSORParameterpartitionreference" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">K230 VICAP SENSOR 参数分区参考 | 正点原子</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tm330075395.github.io/docs/CanaanK230/part6/K230VICAPSENSORParameterpartitionreference"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="K230 VICAP SENSOR 参数分区参考 | 正点原子"><meta data-rh="true" name="description" content="1. 概述"><meta data-rh="true" property="og:description" content="1. 概述"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tm330075395.github.io/docs/CanaanK230/part6/K230VICAPSENSORParameterpartitionreference"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part6/K230VICAPSENSORParameterpartitionreference" hreflang="en"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part6/K230VICAPSENSORParameterpartitionreference" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="正点原子 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="正点原子 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.fcaa3de9.js" defer="defer"></script>
<script src="/assets/js/main.252b8acf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/CanaanK230/Userdoc">CanMV-K230教程</a><a href="http://www.alientek.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">正点原子官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://www.openedv.com/forum.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tm330075395/tm330075395.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CanaanK230/Userdoc">文档阅读指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/1开发板上手指南-1">1.开发板上手指南</a><button aria-label="Expand sidebar category &#x27;1.开发板上手指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/2开发环境搭建指南-1">2.开发环境搭建指南</a><button aria-label="Expand sidebar category &#x27;2.开发环境搭建指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/3嵌入式应用开发指南-1">3.嵌入式应用开发指南</a><button aria-label="Expand sidebar category &#x27;3.嵌入式应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/4ai应用开发指南-1">4.AI应用开发指南</a><button aria-label="Expand sidebar category &#x27;4.AI应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/5micropython应用开发指南-1">5.MicroPython应用开发指南</a><button aria-label="Expand sidebar category &#x27;5.MicroPython应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/6系统开发指南-1">6.系统开发指南</a><button aria-label="Collapse sidebar category &#x27;6.系统开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230RVVoptimizationperformance">K230 RVV优化性能说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230MemoryOptimizationGuide">K230 内存优化指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230MemoryAnalysisGuide">K230 内存分析指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230LaunchtheOptimizationGuide">K230 启动优化指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230IntroductiontotheuseofSharefsintheBigandSmallCoreCommunication">K230大小核通讯Sharefs使用简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230OpenBLASDeveloperGuide">K230 OpenBLAS开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230OpenCVDeveloperGuide">K230 OpenCV开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230CameraSensorAdaptationGuide">K230 Camera Sensor适配指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230PowerManagementAdaptationGuide">K230_功耗管理适配指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CanaanK230/part6/K230VICAPSENSORParameterpartitionreference">K230 VICAP SENSOR 参数分区参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230LCDAdaptationGuide">K230 LCD适配指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230PMUUserGuide">K230 PMU使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230SDKIoTWiFiAiW4211LV10Directionsforuse">K230 SDK IoT WiFi AiW4211LV10使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230SDKIoTWiFiAiW4211LV10DriverDevelopmentGuide">K230 SDK IoT WiFi AiW4211LV10驱动开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230nncaseDeveloperGuide">K230 nncase开发指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230SteckupdatedtheEncasRuntimeLibraryGuide">K230 SDK 更新nncase运行时库指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230debianubuntuillustrate">K230 debian ubuntu 说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230SDKBurntoolDirectionsforuse">K230 SDK Burntool使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230SDKDewarpDirectionsforuse">K230 SDK Dewarp 使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230ISPImageTuningGuide">K230 ISP图像调优指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230ISPInitializationConfigurationGuide">K230 ISP初始化配置指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part6/K230ISPTuningToolDirectionsforuse">K230 ISP Tuning Tool使用指南</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/7sdk-api参考指南-1">7.SDK API参考指南</a><button aria-label="Expand sidebar category &#x27;7.SDK API参考指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/8常见问题-1">8.常见问题</a><button aria-label="Expand sidebar category &#x27;8.常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/6系统开发指南-1"><span itemprop="name">6.系统开发指南</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K230 VICAP SENSOR 参数分区参考</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K230 VICAP SENSOR 参数分区参考</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-概述">1. 概述<a href="#1-概述" class="hash-link" aria-label="Direct link to 1. 概述" title="Direct link to 1. 概述">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-概述">1.1 概述<a href="#11-概述" class="hash-link" aria-label="Direct link to 1.1 概述" title="Direct link to 1.1 概述">​</a></h3>
<p>ISP对sensor输出的信号进行实时处理的过程中，调优参数和标定参数对ISP处理方式以及图像的复原、增强有着关键的作用。在SDK中默认使用标定xml、auto json、manual json文件作为VICAP运行 时导入的调优参数和标定参数配置。在快速启动模式下，默认参数导入方式耗时较高，因此提供了参数分区导入配置参数的方案。</p>
<p>本文档主要描述了制作参数分区及VICAP使用该分区的方法。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-制作流程参考">2. 制作流程参考<a href="#2-制作流程参考" class="hash-link" aria-label="Direct link to 2. 制作流程参考" title="Direct link to 2. 制作流程参考">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-流程图">2.1 流程图<a href="#21-流程图" class="hash-link" aria-label="Direct link to 2.1 流程图" title="Direct link to 2.1 流程图">​</a></h3>
<p>制作流程图如下：</p>
<p><img decoding="async" loading="lazy" alt="isp param" src="/assets/images/ISP_param-14e850f711d89281479d9e0deeebb116.png" width="167" height="341" class="img_ev3q"></p>
<p>图2-1 参数分区制作流程图</p>
<p>制作步骤如下：</p>
<ul>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id6" target="_blank" rel="noopener noreferrer">第一步，转换头文件</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id7" target="_blank" rel="noopener noreferrer">第二步，转换二进制文件</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id12" target="_blank" rel="noopener noreferrer">第三步，使用方法</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id13" target="_blank" rel="noopener noreferrer">注意事项</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-制  作步骤">2.2 制作步骤<a href="#22-制作步骤" class="hash-link" aria-label="Direct link to 2.2 制作步骤" title="Direct link to 2.2 制作步骤">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-转换头文件">2.2.1 转换头文件<a href="#221-转换头文件" class="hash-link" aria-label="Direct link to 2.2.1 转换头文件" title="Direct link to 2.2.1 转换头文件">​</a></h4>
<p>以senosr：IMX335，分辨率：2592x1944为例</p>
<p>拷贝参数文件到转换头文件的目录</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cp k230_sdk/src/big/mpp/userapps/src/sensor/config/imx335-2592x1944.xml k230_sdk/src/big/mpp/userapps/src/vicap/src/isp/sdk/t_frameworks/t_database_c/calibration_data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp k230_sdk/src/big/mpp/userapps/src/sensor/config/imx335-2592x1944_auto.json k230_sdk/src/big/mpp/userapps/src/vicap/src/isp/sdk/t_frameworks/t_database_c/calibration_data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp k230_sdk/src/big/mpp/userapps/src/sensor/config/imx335-2592x1944_manual.json k230_sdk/src/big/mpp/userapps/src/vicap/src/isp/sdk/t_frameworks/t_database_c/calibration_data/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>跳转至转换操作目录（工具源码及脚本存放目录）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd k230_sdk/src/big/mpp/userapps/src/vicap/src/isp/sdk/t_frameworks/t_database_c/calibration_data/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行转换头文件工具 <em>parse_convert.py</em> ，将拷贝的三个配置文件解析并转换为一个参数头文件（转换工具建议使用python3.x）</p>
<p><img decoding="async" loading="lazy" src="https://developer.canaan-creative.com/k230/zh/dev/_images/parse_convert.png" alt="parse_convert" class="img_ev3q"></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python parse_convert.py -s imx335 -x imx335-2592x1944.xml -a imx335-2592x1944_auto.json -m imx335-2592x1944_manual.json &gt; imx335_2592x1944_param_data.h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#ifndef __IMX335_CALIBRATION_H__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define __IMX335_CALIBRATION_H__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;isp_database.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;k_autoconf_comm.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">static const TUNING_PARAM_T database_tuning_param =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* calib data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* auto data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* manual data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* dewarp data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* version_info */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>转换后将得到如上的结构体，共五个部分：</p>
<p>calib data、auto data、manual data分别由外部指定的配置文件解析生成</p>
<p>dewarp data需要根据实际配置替换在结构体中，参考<a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#dewarp" target="_blank" rel="noopener noreferrer">dewarp参数配置</a></p>
<p>version info为转变换工具自动生成，描述sensor name以及创建日期</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-转换二进制文件">2.2.2 转换二进制文件<a href="#222-转换二进制文件" class="hash-link" aria-label="Direct link to 2.2.2 转换二进制文件" title="Direct link to 2.2.2 转换二进制文件">​</a></h4>
<p>二进制文件由header、配置参数、padding、dewarp参数四个文件拼接而成，考虑到参数分区的实际分配大小，建议最多添加三组配置文件</p>
<ul>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#header" target="_blank" rel="noopener noreferrer">第一步，header制作</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id8" target="_blank" rel="noopener noreferrer">第二步，配置参数二进制文件制作</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#padding" target="_blank" rel="noopener noreferrer">第三步，padding文件制作</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#dewarp" target="_blank" rel="noopener noreferrer">第四步，dewarp参数配置</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id9" target="_blank" rel="noopener noreferrer">第五步，合并文件</a></li>
<li><a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id10" target="_blank" rel="noopener noreferrer">其他，脚本化制作方法（推荐使用）</a></li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2221-header制作">2.2.2.1 header制作<a href="#2221-header制作" class="hash-link" aria-label="Direct link to 2.2.2.1 header制作" title="Direct link to 2.2.2.1 header制作">​</a></h5>
<p>修改 <em>gen_database_param_bin_calib_header.c</em> 中的FILENAME_00、FILENAME_01、FILENAME_02的定义，示例如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#define FILENAME_00 &quot;imx335-2592x1944&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define FILENAME_01 &quot;ov9732-1280x720&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#define FILENAME_02 &quot;ov9286-1280x720&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>格式要求为驱动中对应的sensor名称-宽x高，如imx335-2592x1944的配置在驱动中对应的sensor name为imx335且分辨率为2592x1944，则修改FILENAME_0X为”imx335-2592x1944”，该定义将作为使用参数分区时的校验头，如果校验头不匹配，则会默认使用配置文件加载的方式进行读取，并在log中打印相应的警告提示，且校验头定义的名称唯一，不能重复。</p>
<p>可添加三组校验头，一旦顺序固定，则参数分区的顺序也需要与校验头同步，同步方法参考后文<a href="https://developer.canaan-creative.com/k230/zh/dev/01_software/board/mpp/K230_VICAP_SENSOR_%E5%8F%82%E6%95%B0%E5%88%86%E5%8C%BA%E5%8F%82%E8%80%83.html#id8" target="_blank" rel="noopener noreferrer">二进制文件制作</a>。</p>
<p>修改定义后将该源码编译为可执行程序并执行，得到header: sensor_cfg_calib_header.bin</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_header gen_database_param_bin_calib_header.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./main_header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 得到sensor_cfg_calib_header.bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2222-配置参数二进制文件制作">2.2.2.2 配置参数二进制文件制作<a href="#2222-配置参数二进制文件制作" class="hash-link" aria-label="Direct link to 2.2.2.2 配置参数二进制文件制作" title="Direct link to 2.2.2.2 配置参数二进制文件制作">​</a></h5>
<p>修改 <em>gen_database_param_bin.c</em> 中的 DATABASE_SELECT定义，通过外部编译时传入不同参数制作不同的配置二进制文件，示例如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#if DATABASE_SELECT == 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;imx335_2592x1944_param_data.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#elif DATABASE_SELECT == 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;ov9732_param_data.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#elif DATABASE_SELECT == 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#include &quot;ov9286_param_data.h&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// will append new header file to convert bin, you can make DATABASE_SELECT++, build need add flag &quot;-DDATABASE_SELECT=?, ?:0, 1, 2...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>DATABASE_SELECT的编号决定了不同sensor配置参数的排列顺序，此顺序需要与header的顺序进行同步。示例中imx335_2592x1944_param_data.h、ov9732_param_data.h、ov9286_param_data.h由三组xml json生成。</p>
<p>编译源码并执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_CURRENT_DIR=$PWD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_CFLAGS=&quot;-I$DATABASE_CURRENT_DIR/../include \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_common_c/include/  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_json_c/include/    \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_mxml_c/mxml-3.3.1/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../../../../../../../../include/comm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_01 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_02 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_03 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_01 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_02 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_03 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 得到文件sensor_cfg_00.bin(imx335)、sensor_cfg_01.bin(ov9732)、sensor_cfg_02.bin(ov9286)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>编译多个执行程序，并执行，执行时传入的0 1 2参数为生成的二进制文件名中的序号。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2223-padding生成">2.2.2.3 padding生成<a href="#2223-padding生成" class="hash-link" aria-label="Direct link to 2.2.2.3 padding生成" title="Direct link to 2.2.2.3 padding生成">​</a></h5>
<p>padding文件存在的目的是为了后续dewarp参数的对齐，方便使用，padding长度会根据header+参数结构体的总长度进行变化，由脚本自动 生成。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2224-dewarp参数配置">2.2.2.4 dewarp参数配置<a href="#2224-dewarp参数配置" class="hash-link" aria-label="Direct link to 2.2.2.4 dewarp参数配置" title="Direct link to 2.2.2.4 dewarp参数配置">​</a></h5>
<p>参数分区中定义了dewarp的lut表基本参数，根据此参数可在使用分区时正确的找到dewarp对应的lut文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint8_t has_lut;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint64_t lut_offset;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint8_t split_enable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint16_t split_horizon_line;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint16_t split_vertical_line_up;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint16_t split_vertical_line_down;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} DEWARP_SPLIT_T;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>has_lut: 是否存在dewarp lut文件，此成员设置为0则表示不需要使用dewarp参数，设置为1时表示需要使用dewarp参数</p>
<p>lut_offset: 当has_lut设置为1时，该成员生效，值将对应dewarp参数在参数分区中所在地址的偏移量，具体计算方法为 参数分区基地址 + header size + 参数结构体size + padding size，参数分区基地址在k_autoconf_comm.h中定义为<em>CONFIG_MEM_SENSOR_CFG_BASE</em>，该定义随编译的硬件不同有所改变。可通过sdk提供的<em>gen_database.sh</em>脚本进行计算，执行时会进行打印：</p>
<p><img decoding="async" loading="lazy" alt="calc_isp_param_data_size" src="/assets/images/calc_isp_param_data_size-c69ea92513fac9bfb32fbce1e368c91d.png" width="500" height="223" class="img_ev3q"></p>
<p>图2-2 参数分区自动计算dewarp偏移量</p>
<p>split_enable: 默认设置为0</p>
<p>split_horizon_line: 默认8191</p>
<p>split_vertical_line_up: 默认8191</p>
<p>split_vertical_line_down: 默认8191</p>
<p>dewarp的参数文件需要在制作脚本中指定路径，参考后文</p>
<p>示例如下分别为使用dewarp和不使用dewarp时的配置</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 使用dewarp的配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* dewarp data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* has_lut */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* lut_offset */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CONFIG_MEM_SENSOR_CFG_BASE + 426528, // 426528通过脚本计算得出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_enable */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_horizon_line */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_vertical_line_up */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_vertical_line_down */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 不使用dewarp的配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/* dewarp data */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* has_lut */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* lut_offset */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_enable */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_horizon_line */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_vertical_line_up */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /* split_vertical_line_down */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    8191,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2225-合并文件">2.2.2.5 合并文件<a href="#2225-合并文件" class="hash-link" aria-label="Direct link to 2.2.2.5 合并文件" title="Direct link to 2.2.2.5 合并文件">​</a></h5>
<p>通过2.2.2.1 - 2.2.2.4产出的文件如下：</p>
<table><thead><tr><th><strong>文件名</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>sensor_cfg_calib_header.bin</td><td>header文件</td></tr><tr><td>sensor_cfg_0X.bin</td><td>配置参数文件</td></tr><tr><td>padding.bin</td><td>用于对齐的文件</td></tr><tr><td>imx335-2592x1944.bin</td><td>dewarp参数文件，生成方法参考dewarp使用指南</td></tr></tbody></table>
<p>合并上述文件得到最终用于参数分区的二进制文件 <em>sensor_cfg.bin</em></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat sensor_cfg_calib_header.bin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_cfg_00.bin sensor_cfg_01.bin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_cfg_02.bin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    padding.bin \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ../../../../../../../sensor/dewarp/imx335-2592x1944.bin &gt; sensor_cfg.bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>按顺序最后合并的文件为k230_sdk/src/big/mpp/userapps/src/sensor/dewarp中生成的dewarp参数文件，若添加新的dewarp参数文件，按顺序在末尾追加即可。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2226-脚本化制作二进制文件">2.2.2.6 脚本化制作二进制文件<a href="#2226-脚本化制作二进制文件" class="hash-link" aria-label="Direct link to 2.2.2.6 脚本化制作二进制文件" title="Direct link to 2.2.2.6 脚本化制作二进制文件">​</a></h5>
<p>sdk中提供了串联流程2.2.2.1 - 2.2.2.5的半自动化脚本 <em>gen_database.sh</em> ，用户在完成header、dewarp、参数解析的源码定义后，可通过执行该脚本进行制作，甚至不需要手动执行该脚本，直接编译sdk即可。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#!/bin/sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_CURRENT_DIR=$PWD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATA_SAVE_PATH=../../../../../../../../../../../../tools/gen_image_cfg/data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_CFLAGS=&quot;-I$DATABASE_CURRENT_DIR/../include \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_common_c/include/  \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_json_c/include/    \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../t_mxml_c/mxml-3.3.1/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> -I$DATABASE_CURRENT_DIR/../../../../../../../../../include/comm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># DATABASE_SELECT 0: imx335 2592x1944, 1: ov9732 1280x720, 2: ov9286 1280x720, ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo -n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_01 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_02 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_03 gen_database_param_bin.c $DATABASE_CFLAGS -DDATABASE_SELECT=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gcc -o main_header gen_database_param_bin_calib_header.c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_01 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_02 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$DATABASE_CURRENT_DIR/main_03 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $DATABASE_CURRENT_DIR/main_header</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $DATABASE_CURRENT_DIR/main_01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $DATABASE_CURRENT_DIR/main_02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm $DATABASE_CURRENT_DIR/main_03</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FILE_LENGTH=$(wc -c &lt; sensor_cfg_calib_header.bin)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FILE_LENGTH=$(expr $FILE_LENGTH + $(wc -c &lt; sensor_cfg_00.bin))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FILE_LENGTH=$(expr $FILE_LENGTH + $(wc -c &lt; sensor_cfg_01.bin))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FILE_LENGTH=$(expr $FILE_LENGTH + $(wc -c &lt; sensor_cfg_02.bin))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PADDING_LENGTH=$(expr 16 - $FILE_LENGTH % 16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dd if=/dev/zero of=padding.bin bs=1 count=$PADDING_LENGTH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;The first LUT offset is &quot;$(expr $PADDING_LENGTH + $FILE_LENGTH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat sensor_cfg_calib_header.bin\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_cfg_00.bin sensor_cfg_01.bin\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sensor_cfg_02.bin\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    padding.bin\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ../../../../../../../sensor/dewarp/imx335-2592x1944.bin &gt; sensor_cfg.bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="2226-打入参数分区">2.2.2.6 打入参数分区<a href="#2226-打入参数分区" class="hash-link" aria-label="Direct link to 2.2.2.6 打入参数分区" title="Direct link to 2.2.2.6 打入参数分区">​</a></h5>
<p>制作二进制文件完成后，需要将该文件置于参数分区存放位置，该操作由sdk编译脚本完成，不需要用户自行操作。只需要在k230_sdk/src/big/mpp/userapps/src/vicap/src/isp/sdk/t_frameworks/t_database_c/calibration_data/中制作好文件即可在编译时自动打入。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-使用方法">2.2.3 使用方法<a href="#223-使用方法" class="hash-link" aria-label="Direct link to 2.2.3 使用方法" title="Direct link to 2.2.3 使用方法">​</a></h4>
<p>在完成正确的制作流程后，通过VICAP提供的API进行使用</p>
<p>【说明】vicap 解析配置参数的模式</p>
<p>【定义】</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef enum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DATABASE_PARSE_XML_JSON = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DATABASE_PARSE_HEADER = 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} k_vicap_database_parse_mode;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th><strong>成员名称</strong></th><th>值</th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>VICAP_DATABASE_PARSE_XML_JSON</td><td>0</td><td>使用xml、auto json、manual json模式</td></tr><tr><td>VICAP_DATABASE_PARSE_HEADER</td><td>1</td><td>使用参数分区加载模式</td></tr></tbody></table>
<p>【注意事项】 内部只校验0和1，其他值无效</p>
<p>【说明】vicap设置参数加载模式</p>
<p>【描述】</p>
<p>根据dev_num，设置不同vicap设备加载ISP参数的方式，默认为0</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_vicap_set_database_parse_mode(k_vicap_dev dev_num, k_vicap_database_parse_mode parse_mode)</p>
<p>【参数】</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>dev_num</td><td>VICAP设备号</td><td>输入</td></tr><tr><td>parse_mode</td><td>参数加载模式</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th><strong>返回值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>正值</td><td>成功。返回设备描述符</td></tr><tr><td>负值</td><td>失败，参考错误码定义。</td></tr></tbody></table>
<p>【芯片差异】</p>
<p>无。</p>
<p>【需求】</p>
<ul>
<li>头文件：mpi_vicap_api.h</li>
<li>库文件：libvicap.a</li>
</ul>
<p>【注意】</p>
<p>需要在kd_mpi_vicap_init之前完成调用</p>
<p>【举例】</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef enum {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DEV_ID_0 = 0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DEV_ID_1 = 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DEV_ID_2 = 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    VICAP_DEV_ID_MAX,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} k_vicap_dev;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int ret = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_vicap_dev vicap_dev = VICAP_DEV_ID_0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ret = kd_mpi_vicap_set_database_parse_mode(vicap_dev, VICAP_DATABASE_PARSE_HEADER);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (ret) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    printf(&quot;kd_mpi_vicap_set_database_parse_mode failed, %d\n&quot;, ret);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return ret;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-注意事项">2.2.4 注意事项<a href="#224-注意事项" class="hash-link" aria-label="Direct link to 2.2.4 注意事项" title="Direct link to 2.2.4 注意事项">​</a></h4>
<ol>
<li>在生成参数头文件时，dewarp的结构体为默认值，需要根据实际情况填入，并计算偏移值，偏移值可以通过执行 <em>gen_database.sh</em> 来自动计算，计算后填入对应的位置</li>
<li><em>gen_database_param_bin.c</em> 根据gcc -D的编译选项定义DATABASE_SELECT的值来决定包含哪组头文件并将其制作为参数文件，顺序要与header中定义的顺序编号相同</li>
<li>参数分区功能目前仅在spi nor flash模式下使用，其他模式无参数分区，即使加载也无法使用</li>
<li>header制作源码中对于FILENAME_0X的定义格式为：sensor_name-宽x高，该header会在VICAP内部使用时进行校验，VICAP内部采用拼接方式生成校验头进行对比，校验头格式为 驱动配置中使用的sensor_name-输入宽x输入高</li>
<li>转换工具与标定xml、auto json、manual json以及vicap版本匹配，不同版本不兼容</li>
<li>使用参数分区时，VICAP会根据当前使用的sensor配置以及设置的解析模式自行对参数分区进行校验，当校验成功后会取出该组参数进行加载，无需用户额外设置。当校验头对比失败时，自动切换回默认配置参数解析模式</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part6/10_K230VICAPSENSORParameterpartitionreference.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CanaanK230/part6/K230PowerManagementAdaptationGuide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">K230_功耗管理适配指南</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CanaanK230/part6/K230LCDAdaptationGuide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">K230 LCD适配指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-概述" class="table-of-contents__link toc-highlight">1. 概述</a><ul><li><a href="#11-概述" class="table-of-contents__link toc-highlight">1.1 概述</a></li></ul></li><li><a href="#2-制作流程参考" class="table-of-contents__link toc-highlight">2. 制作流程参考</a><ul><li><a href="#21-流程图" class="table-of-contents__link toc-highlight">2.1 流程图</a></li><li><a href="#22-制作步骤" class="table-of-contents__link toc-highlight">2.2 制作步骤</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>