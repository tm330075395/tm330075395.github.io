<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-CanaanK230/part5/PeripheralsRoutineexplanation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">3.外设 例程讲解 | 正点原子</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tm330075395.github.io/docs/CanaanK230/part5/PeripheralsRoutineexplanation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="3.外设 例程讲解 | 正点原子"><meta data-rh="true" name="description" content="1. Cipher - Cipher 例程"><meta data-rh="true" property="og:description" content="1. Cipher - Cipher 例程"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tm330075395.github.io/docs/CanaanK230/part5/PeripheralsRoutineexplanation"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part5/PeripheralsRoutineexplanation" hreflang="en"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part5/PeripheralsRoutineexplanation" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="正点原子 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="正点原子 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.fcaa3de9.js" defer="defer"></script>
<script src="/assets/js/main.252b8acf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/CanaanK230/Userdoc">CanMV-K230教程</a><a href="http://www.alientek.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">正点原子官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://www.openedv.com/forum.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tm330075395/tm330075395.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CanaanK230/Userdoc">文档阅读指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/1开发板上手指南-1">1.开发板上手指南</a><button aria-label="Expand sidebar category &#x27;1.开发板上手指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/2开发环境搭建指南-1">2.开发环境搭建指南</a><button aria-label="Expand sidebar category &#x27;2.开发环境搭建指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/3嵌入式应用开发指南-1">3.嵌入式应用开发指南</a><button aria-label="Expand sidebar category &#x27;3.嵌入式应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/4ai应用开发指南-1">4.AI应用开发指南</a><button aria-label="Expand sidebar category &#x27;4.AI应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/5micropython应用开发指南-1">5.MicroPython应用开发指南</a><button aria-label="Collapse sidebar category &#x27;5.MicroPython应用开发指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/CanMV-K230QuickStartGuide">CanMV-K230 快速入门指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/IDEinstructionsforuse">2.IDE使用说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/Instructionsforuse">1.使用说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/nncase_runtimemodule">3.nncase_runtime模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/ramdiskinstructionsforuse">4.ramdisk使用说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/AIDemodocumentation">AI Demo说明文档</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/Facedetection">2.人脸检测</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CanaanK230/part5/PeripheralsRoutineexplanation">3.外设 例程讲解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/MultimediaRoutineExplanation">4.多媒体 例程讲解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/NetworkRoutineExplanation">5.网络 例程讲解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/UcryptolibmoduleAPImanual">1.1 Ucryptolib 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/HashlibmoduleAPImanual">1.2 Hashlib 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/utimetime-dependentfunctionmoduleAPImanual">1.3 utime 时间相关的功能 API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/uctypesmoduleAPImanual">2.1 uctypes 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/newworkModuleAPIManual">2.2 network 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/socketModuleAPIManual">2.3 socket 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/ADCModuleAPImanual">2.4 ADC 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/FFTmoduleAPImanual">2.5 FFT API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/K230CanMVPinModuleAPIManual">2.6 K230 CanMV Pin 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/I2CModuleAPIManual">2.7 I2C 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/K230CanMVFPIOAModuleAPIManual">2.8 K230 CanMV FPIOA 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/PWMModuleAPIManual">2.9 PWM 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/SPIModuleAPIManual">2.10 SPI 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/TimerModuleAPIManual">2.11 Timer 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/WDTModuleAPIManual">2.12 WDT 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/UARTModuleAPIManual">2.13 UART 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/machinemoduleAPImanual">2.14 machine 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/SensorModuleAPIManual">3.1 Sensor 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/DisplayModuleAPIManual">3.2 Display模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/AudioModuleAPIManual">3.3 Audio 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/MediaModuleAPIManual">3.8 Media模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/PMModuleAPIManual">3.9 PM 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/imageAPImanual">3.9 image 图像处理 API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/LVGLUserManual">3.10 LVGL 使用手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/K230CanMVnncase_runtimeModuleAPIManual">4.1 K230 CanMV nncase_runtime 模块API手册</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/FAQs">常见问题解答</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/Imprint">版本说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part5/CorrespondencewithK230_SDKandnncaseversions">与K230_SDK、nncase版本对应关系</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/6系统开发指南-1">6.系统开发指南</a><button aria-label="Expand sidebar category &#x27;6.系统开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/7sdk-api参考指南-1">7.SDK API参考指南</a><button aria-label="Expand sidebar category &#x27;7.SDK API参考指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/8常见问题-1">8.常见问题</a><button aria-label="Expand sidebar category &#x27;8.常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/5micropython应用开发指南-1"><span itemprop="name">5.MicroPython应用开发指南</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">3.外设 例程讲解</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>3.外设 例程讲解</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-cipher---cipher-例程">1. Cipher - Cipher 例程<a href="#1-cipher---cipher-例程" class="hash-link" aria-label="Direct link to 1. Cipher - Cipher 例程" title="Direct link to 1. Cipher - Cipher 例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个 Cipher 输出的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import uhashlib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;###################### SHA256 Test ##############################&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-1: Only Call update() Once ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sha256对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj = uhashlib.sha256()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入消息message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">msg = b&#x27;\x45\x11\x01\x25\x0e\xc6\xf2\x66\x52\x24\x9d\x59\xdc\x97\x4b\x73\x61\xd5\x71\xa8\x10\x1c\xdf\xd3\x6a\xba\x3b\x58\x54\xd3\xae\x08\x6b\x5f\xdd\x45\x97\x72\x1b\x66\xe3\xc0\xdc\x5d\x8c\x60\x6d\x96\x57\xd0\xe3\x23\x28\x3a\x52\x17\xd1\xf5\x3f\x2f\x28\x4f\x57\xb8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 标准哈希值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dgst0 = b&#x27;\x1a\xaa\xf9\x28\x5a\xf9\x45\xb8\xa9\x7c\xf1\x4f\x86\x9b\x18\x90\x14\xc3\x84\xf3\xc7\xc2\xb7\xd2\xdf\x8a\x97\x13\xbf\xfe\x0b\xf1&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 将消息更新到硬件IP中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj.update(msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 计算哈希值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dgst = obj.digest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(dgst0 == dgst)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(binascii.hexlify(dgst))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-2: Call update() Twice ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dgst0 = b&#x27;\x93\x6a\x18\x5c\xaa\xa2\x66\xbb\x9c\xbe\x98\x1e\x9e\x05\xcb\x78\xcd\x73\x2b\x0b\x32\x80\xeb\x94\x44\x12\xbb\x6f\x8f\x8f\x07\xaf&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj = uhashlib.sha256()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 向硬件多次更新消息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj.update(b&#x27;hello&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">obj.update(b&#x27;world&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dgst = obj.digest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(dgst0 == dgst)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(&#x27;********************** Test-3: Call digest() Twice ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># dgst0 = b&#x27;\x93\x6a\x18\x5c\xaa\xa2\x66\xbb\x9c\xbe\x98\x1e\x9e\x05\xcb\x78\xcd\x73\x2b\x0b\x32\x80\xeb\x94\x44\x12\xbb\x6f\x8f\x8f\x07\xaf&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># obj = uhashlib.sha256()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># obj.update(b&#x27;hello&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># obj.update(b&#x27;world&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># dgst = obj.digest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># dgst1 = obj.digest()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(dgst0 == dgst)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(dgst == dgst1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;\n###################### AES-GCM Test ##############################&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import ucryptolib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import collections</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建一个具名元组并返回具名元组子类</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Aes = collections.namedtuple(&#x27;Aes&#x27;, [&#x27;key&#x27;, &#x27;iv&#x27;, &#x27;aad&#x27;, &#x27;pt&#x27;, &#x27;ct&#x27;, &#x27;tag&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aes = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Aes(b&#x27;\xb5\x2c\x50\x5a\x37\xd7\x8e\xda\x5d\xd3\x4f\x20\xc2\x25\x40\xea\x1b\x58\x96\x3c\xf8\xe5\xbf\x8f\xfa\x85\xf9\xf2\x49\x25\x05\xb4&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x51\x6c\x33\x92\x9d\xf5\xa3\x28\x4f\xf4\x63\xd7&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xbd\xc1\xac\x88\x4d\x33\x24\x57\xa1\xd2\x66\x4f\x16\x8c\x76\xf0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Aes(b&#x27;\x24\x50\x1a\xd3\x84\xe4\x73\x96\x3d\x47\x6e\xdc\xfe\x08\x20\x52\x37\xac\xfd\x49\xb5\xb8\xf3\x38\x57\xf8\x11\x4e\x86\x3f\xec\x7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x9f\xf1\x85\x63\xb9\x78\xec\x28\x1b\x3f\x27\x94&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xad\xb5\xec\x72\x0c\xcf\x98\x98\x50\x00\x28\xbf\x34\xaf\xcc\xbc\xac\xa1\x26\xef&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x27&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xeb&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x63\x35\xe1\xd4\x9e\x89\x88\xea\xc4\x8e\x42\x19\x4e\x5f\x56\xdb&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Aes(b&#x27;\x1f\xde\xd3\x2d\x59\x99\xde\x4a\x76\xe0\xf8\x08\x21\x08\x82\x3a\xef\x60\x41\x7e\x18\x96\xcf\x42\x18\xa2\xfa\x90\xf6\x32\xec\x8a&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x1f\x3a\xfa\x47\x11\xe9\x47\x4f\x32\xe7\x04\x62&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x06\xb2\xc7\x58\x53\xdf\x9a\xeb\x17\xbe\xfd\x33\xce\xa8\x1c\x63\x0b\x0f\xc5\x36\x67\xff\x45\x19\x9c\x62\x9c\x8e\x15\xdc\xe4\x1e\x53\x0a\xa7\x92\xf7\x96\xb8\x13\x8e\xea\xb2\xe8\x6c\x7b\x7b\xee\x1d\x40\xb0&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x91\xfb\xd0\x61\xdd\xc5\xa7\xfc\xc9\x51\x3f\xcd\xfd\xc9\xc3\xa7\xc5\xd4\xd6\x4c\xed\xf6\xa9\xc2\x4a\xb8\xa7\x7c\x36\xee\xfb\xf1\xc5\xdc\x00\xbc\x50\x12\x1b\x96\x45\x6c\x8c\xd8\xb6\xff\x1f\x8b\x3e\x48\x0f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x30\x09\x6d\x34\x0f\x3d\x5c\x42\xd8\x2a\x6f\x47\x5d\xef\x23\xeb&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Aes(b&#x27;\x24\x50\x1a\xd3\x84\xe4\x73\x96\x3d\x47\x6e\xdc\xfe\x08\x20\x52\x37\xac\xfd\x49\xb5\xb8\xf3\x38\x57\xf8\x11\x4e\x86\x3f\xec\x7f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x9f\xf1\x85\x63\xb9\x78\xec\x28\x1b\x3f\x27\x94&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xad\xb5\xec\x72\x0c\xcf\x98\x98\x50\x00\x28\xbf\x34\xaf\xcc\xbc\xac\xa1\x26\xef&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x27\xf3\x48\xf9\xcd\xc0\xc5\xbd\x5e\x66\xb1\xcc\xb6\x3a\xd9\x20\xff\x22\x19\xd1\x4e\x8d\x63\x1b\x38\x72\x26\x5c\xf1\x17\xee\x86\x75\x7a\xcc\xb1\x58\xbd\x9a\xbb\x38\x68\xfd\xc0\xd0\xb0\x74\xb5\xf0\x1b\x2c&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xeb\x7c\xb7\x54\xc8\x24\xe8\xd9\x6f\x7c\x6d\x9b\x76\xc7\xd2\x6f\xb8\x74\xff\xbf\x1d\x65\xc6\xf6\x4a\x69\x8d\x83\x9b\x0b\x06\x14\x5d\xae\x82\x05\x7a\xd5\x59\x94\xcf\x59\xad\x7f\x67\xc0\xfa\x5e\x85\xfa\xb8&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xbc\x95\xc5\x32\xfe\xcc\x59\x4c\x36\xd1\x55\x02\x86\xa7\xa3\xf0&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-1: ivlen=12, ptlen=0, aadlen=0 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化aes-gcm密码对象，参数包含密钥key、初始化向量iv以及附加数据aad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[0].key, 0, aes[0].iv, aes[0].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[0].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密，输出格式为：密文 + tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 标准数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[0].ct + aes[0].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[0].key, 0, aes[0].iv, aes[0].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入数据格式：密文 + tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[0].ct + aes[0].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密，输出数据格式：明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val[:1] == b&#x27;\x00&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># val0 = aes[0].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-2: ivlen=12, ptlen=1, aadlen=20 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[1].key, 0, aes[1].iv, aes[1].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[1].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输出密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[1].ct + aes[1].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[1].key, 0, aes[1].iv, aes[1].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[1].ct + aes[1].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输出明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[1].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-3: ivlen=12, ptlen=51, aadlen=0 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[2].key, 0, aes[2].iv, aes[2].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[2].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(67)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输出密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[2].ct + aes[2].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[2].key, 0, aes[2].iv, aes[2].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[2].ct + aes[2].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(51)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[2].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-4: ivlen=12, ptlen=51, aadlen=20 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[3].key, 0, aes[3].iv, aes[3].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[3].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(67)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输出密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[3].ct + aes[3].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;GCM Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.aes(aes[3].key, 0, aes[3].iv, aes[3].aad)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入密文+tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = aes[3].ct + aes[3].tag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = aes[3].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val[:51] == val0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># outbuf = bytearray(51)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># val0 = aes[3].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;\n###################### SM4-ECB/CFB/OFB/CBC/CTR Test ##############################&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sm4 = collections.namedtuple(&#x27;Sm4&#x27;, [&#x27;key&#x27;, &#x27;iv&#x27;, &#x27;pt&#x27;, &#x27;ct&#x27;])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sm4 = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ecb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sm4(b&#x27;\x01\x23\x45\x67\x89\xab\xcd\xef\xfe\xdc\xba\x98\x76\x54\x32\x10&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb\xcc\xcc\xcc\xcc\xdd\xdd\xdd\xdd\xee\xee\xee\xee\xff\xff\xff\xff\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x5e\xc8\x14\x3d\xe5\x09\xcf\xf7\xb5\x17\x9f\x8f\x47\x4b\x86\x19\x2f\x1d\x30\x5a\x7f\xb1\x7d\xf9\x85\xf8\x1c\x84\x82\x19\x23\x04&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # cbc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sm4(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x01\x23\x45\x67\x89\xab\xcd\xef\xfe\xdc\xba\x98\x76\x54\x32\x10&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0a\x0b\x0c\x0d\x0e\x0f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb\xcc\xcc\xcc\xcc\xdd\xdd\xdd\xdd\xee\xee\xee\xee\xff\xff\xff\xff\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x78\xeb\xb1\x1c\xc4\x0b\x0a\x48\x31\x2a\xae\xb2\x04\x02\x44\xcb\x4c\xb7\x01\x69\x51\x90\x92\x26\x97\x9b\x0d\x15\xdc\x6a\x8f\x6d&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # cfb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sm4(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x01\x23\x45\x67\x89\xab\xcd\xef\xfe\xdc\xba\x98\x76\x54\x32\x10&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0a\x0b\x0c\x0d\x0e\x0f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb\xcc\xcc\xcc\xcc\xdd\xdd\xdd\xdd\xee\xee\xee\xee\xff\xff\xff\xff\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xac\x32\x36\xcb\x86\x1d\xd3\x16\xe6\x41\x3b\x4e\x3c\x75\x24\xb7\x69\xd4\xc5\x4e\xd4\x33\xb9\xa0\x34\x60\x09\xbe\xb3\x7b\x2b\x3f&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ofb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sm4(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x01\x23\x45\x67\x89\xab\xcd\xef\xfe\xdc\xba\x98\x76\x54\x32\x10&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0a\x0b\x0c\x0d\x0e\x0f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb\xcc\xcc\xcc\xcc\xdd\xdd\xdd\xdd\xee\xee\xee\xee\xff\xff\xff\xff\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xac\x32\x36\xcb\x86\x1d\xd3\x16\xe6\x41\x3b\x4e\x3c\x75\x24\xb7\x1d\x01\xac\xa2\x48\x7c\xa5\x82\xcb\xf5\x46\x3e\x66\x98\x53\x9b&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ctr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Sm4(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x01\x23\x45\x67\x89\xab\xcd\xef\xfe\xdc\xba\x98\x76\x54\x32\x10&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0a\x0b\x0c\x0d\x0e\x0f&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xbb\xbb\xbb\xbb\xbb\xbb\xbb\xbb\xcc\xcc\xcc\xcc\xcc\xcc\xcc\xcc\xdd\xdd\xdd\xdd\xdd\xdd\xdd\xdd\xee\xee\xee\xee\xee\xee\xee\xee\xff\xff\xff\xff\xff\xff\xff\xff\xee\xee\xee\xee\xee\xee\xee\xee\xaa\xaa\xaa\xaa\xaa\xaa\xaa\xaa&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        b&#x27;\xac\x32\x36\xcb\x97\x0c\xc2\x07\x91\x36\x4c\x39\x5a\x13\x42\xd1\xa3\xcb\xc1\x87\x8c\x6f\x30\xcd\x07\x4c\xce\x38\x5c\xdd\x70\xc7\xf2\x34\xbc\x0e\x24\xc1\x19\x80\xfd\x12\x86\x31\x0c\xe3\x7b\x92\x2a\x46\xb8\x94\xbe\xe4\xfe\xb7\x9a\x38\x22\x94\x0c\x93\x54\x05&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-1: keybits=128, ptlen=32 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-ECB Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sm4密码对象，参数包含密钥key、加解密模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[0].key, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[0].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># golden数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[0].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-ECB Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[0].key, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[0].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[0].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-2: keybits=128, ivlen=16, ptlen=32 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CBC Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sm4密码对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[1].key, 2, sm4[1].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[1].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[1].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CBC Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[1].key, 2, sm4[1].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[1].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[1].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># val0 = sm4[1].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-3: keybits=128, ivlen=16, ptlen=32 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CFB Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sm4密码对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[2].key, 3, sm4[2].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[2].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[2].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CFB Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[2].key, 3, sm4[2].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[2].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[2].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-4: keybits=128, ivlen=16, ptlen=32 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-OFB Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sm4密码对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[3].key, 5, sm4[3].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[3].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[3].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-OFB Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[3].key, 5, sm4[3].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[3].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[3].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;********************** Test-5: keybits=128, ivlen=16, ptlen=64 ******************&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CTR Encrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化sm4密码对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[4].key, 6, sm4[4].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 输入明文数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[4].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 加密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.encrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[4].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(&#x27;SM4-CTR Decrypt......&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 解密</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">crypto = ucryptolib.sm4(sm4[4].key, 6, sm4[4].iv)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">inbuf = sm4[4].ct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outbuf = bytearray(64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val = crypto.decrypt(inbuf, outbuf)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">val0 = sm4[4].pt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(val0 == val)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/cipher/K230_CanMV_Ucryptolib%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">Cipher</a>、<a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/cipher/K230_CanMV_Hashlib%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">Hash</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-adc---adc例程">2. ADC - ADC例程<a href="#2-adc---adc例程" class="hash-link" aria-label="Direct link to 2. ADC - ADC例程" title="Direct link to 2. ADC - ADC例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个ADC的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import ADC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化ADC通道0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adc = ADC(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 获取ADC通道0采样值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(adc.read_u16())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 获取ADC通道0电压值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(adc.read_uv(), &quot;uV&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_ADC%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">ADC</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-fft---fft例程">3. FFT - FFT例程<a href="#3-fft---fft例程" class="hash-link" aria-label="Direct link to 3. FFT - FFT例程" title="Direct link to 3. FFT - FFT例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个FFT的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import FFT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import math</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from ulab import numpy as np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PI = 3.14159265358979323846264338327950288419716939937510</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rx = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def input_data():</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for i in range(64):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data0 = 10 *math.cos(2* PI *i / 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data1  = 20 * math.cos(2 * 2* PI *i / 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data2  = 30* math.cos(3 *2* PI *i / 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data3  = 0.2* math.cos(4 *2 * PI * i / 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        data4  = 1000* math.cos(5 *2* PI * i / 64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rx.append((int(data0 + data1 + data2 + data3 + data4)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">input_data()                                                            #初始化需要进行FFT的数据，列表类型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(rx)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data = np.array(rx,dtype=np.uint16)                                     #把列表数据转换成数组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(data)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fft1 = FFT(data, 64, 0x555)                                             #创建一个FFT对象,运算点数为64，偏移是0x555</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = fft1.run()                                                        #获取FFT转换后的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = fft1.amplitude(res)                                               #获取各个频率点的幅值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">res = fft1.freq(64,38400)                                               #获取所有频率点的频率值  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(res)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_FFT%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">FFT</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-fpioa---fpioa例程">4. FPIOA - FPIOA例程<a href="#4-fpioa---fpioa例程" class="hash-link" aria-label="Direct link to 4. FPIOA - FPIOA例程" title="Direct link to 4. FPIOA - FPIOA例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个FPIOA的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import FPIOA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化FPIOA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa = FPIOA()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印所有引脚配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.help()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印指定引脚详细配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.help(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印指定功能所有可用的配置引脚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.help(FPIOA.IIC0_SDA, func=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置Pin0为GPIO0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.set_function(0, FPIOA.GPIO0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置Pin2为GPIO2, 同时配置其它项</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.set_function(2, FPIOA.GPIO2, ie=1, oe=1, pu=0, pd=0, st=1, sl=0, ds=7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 获取指定功能当前所在的引脚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.get_pin_num(FPIOA.UART0_TXD)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 获取指定引脚当前功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fpioa.get_pin_func(0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_FPIOA%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">FPIOA</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-pwm---pwm例程">5. PWM - PWM例程<a href="#5-pwm---pwm例程" class="hash-link" aria-label="Direct link to 5. PWM - PWM例程" title="Direct link to 5. PWM - PWM例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个PWM输出的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import PWM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化PWM通道0，频率为1000Hz，占空比为50%，默认使能输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pwm0 = PWM(0, 1000, 50, enable = True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 关闭通道0输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pwm0.enable(0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 调整通道0频率为2000Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pwm0.freq(2000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 调整通道0占空比为40%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pwm0.duty(40)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打开通道0输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pwm0.enable(1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_PWM%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">PWM</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-spi---spi例程">6. SPI - SPI例程<a href="#6-spi---spi例程" class="hash-link" aria-label="Direct link to 6. SPI - SPI例程" title="Direct link to 6. SPI - SPI例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行spi读取flash id的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import SPI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from machine import FPIOA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化SPI的gpio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a = FPIOA()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印gpio14的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(14)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置gpio14为QSPI0_CS0功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.set_function(14,a.QSPI0_CS0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(14)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印gpio15的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置gpio15为QSPI0_CLK功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.set_function(15,a.QSPI0_CLK)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(15)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印gpio16的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置gpio16为QSPI0_D0功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.set_function(16,a.QSPI0_D0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印gpio17的属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 设置gpio17为QSPI0_D1功能</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.set_function(17,a.QSPI0_D1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a.help(17)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化SPI，使用5MHz时钟，极性为0，数据位宽为8bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi=SPI(1,baudrate=5000000, polarity=0, phase=0, bits=8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 使能 gd25lq128 复位</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi.write(bytes([0x66]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># gd25lq128 复位</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi.write(bytes([0x99]))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 读id命令（0x9f）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a=bytes([0x9f])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建长度为3的接收buff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b=bytearray(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 读id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi.write_readinto(a,b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印为：bytearray(b&#x27;\xc8`\x18&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 读id命令（0x90,0,0,0）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a=bytes([0x90,0,0,0])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 创建长度为2的接收buff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b=bytearray(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 读id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spi.write_readinto(a,b)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 打印为：bytearray(b&#x27;\xc8\x17&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">print(b)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_SPI%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">SPI</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-timer---timer例程">7. Timer - Timer例程<a href="#7-timer---timer例程" class="hash-link" aria-label="Direct link to 7. Timer - Timer例程" title="Direct link to 7. Timer - Timer例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个Timer的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">from machine import Timer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化一个软定时器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tim = Timer(-1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化定时器为单次模式，周期100ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tim.init(period=100, mode=Timer.ONE_SHOT, callback=lambda t:print(1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time.sleep(0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 初始化定时器为周期模式，频率为1Hz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tim.init(freq=1, mode=Timer.PERIODIC, callback=lambda t:print(2))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 释放定时器资源</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tim.deinit()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_Timer%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">Timer</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-wdt---wdt例程">8. WDT - WDT例程<a href="#8-wdt---wdt例程" class="hash-link" aria-label="Direct link to 8. WDT - WDT例程" title="Direct link to 8. WDT - WDT例程">​</a></h2>
<p>本示例程序用于对 CanMV 开发板进行一个WDT的功能展示。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from machine import WDT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 实例化wdt1，timeout为3s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wdt1 = WDT(1,3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time.sleep(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 喂狗操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wdt1.feed()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">time.sleep(2)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>具体接口定义请参考 <a href="https://developer.canaan-creative.com/k230_canmv/main/zh/api/machine/K230_CanMV_WDT%E6%A8%A1%E5%9D%97API%E6%89%8B%E5%86%8C.html" target="_blank" rel="noopener noreferrer">WDT</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part5/08_PeripheralsRoutineexplanation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CanaanK230/part5/Facedetection"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2.人脸检测</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CanaanK230/part5/MultimediaRoutineExplanation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">4.多媒体 例程讲解</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-cipher---cipher-例程" class="table-of-contents__link toc-highlight">1. Cipher - Cipher 例程</a></li><li><a href="#2-adc---adc例程" class="table-of-contents__link toc-highlight">2. ADC - ADC例程</a></li><li><a href="#3-fft---fft例程" class="table-of-contents__link toc-highlight">3. FFT - FFT例程</a></li><li><a href="#4-fpioa---fpioa例程" class="table-of-contents__link toc-highlight">4. FPIOA - FPIOA例程</a></li><li><a href="#5-pwm---pwm例程" class="table-of-contents__link toc-highlight">5. PWM - PWM例程</a></li><li><a href="#6-spi---spi例程" class="table-of-contents__link toc-highlight">6. SPI - SPI例程</a></li><li><a href="#7-timer---timer例程" class="table-of-contents__link toc-highlight">7. Timer - Timer例程</a></li><li><a href="#8-wdt---wdt例程" class="table-of-contents__link toc-highlight">8. WDT - WDT例程</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>