<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-CanaanK230/part7/K230AudioAPIreference" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">K230音频API参考 | 正点原子</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tm330075395.github.io/docs/CanaanK230/part7/K230AudioAPIreference"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="K230音频API参考 | 正点原子"><meta data-rh="true" name="description" content="1. 概述"><meta data-rh="true" property="og:description" content="1. 概述"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230AudioAPIreference"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230AudioAPIreference" hreflang="en"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230AudioAPIreference" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="正点原子 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="正点原子 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.fcaa3de9.js" defer="defer"></script>
<script src="/assets/js/main.252b8acf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/CanaanK230/Userdoc">CanMV-K230教程</a><a href="http://www.alientek.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">正点原子官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://www.openedv.com/forum.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tm330075395/tm330075395.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CanaanK230/Userdoc">文档阅读指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/1开发板上手指南-1">1.开发板上手指南</a><button aria-label="Expand sidebar category &#x27;1.开发板上手指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/2开发环境搭建指南-1">2.开发环境搭建指南</a><button aria-label="Expand sidebar category &#x27;2.开发环境搭建指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/3嵌入式应用开发指南-1">3.嵌入式应用开发指南</a><button aria-label="Expand sidebar category &#x27;3.嵌入式应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/4ai应用开发指南-1">4.AI应用开发指南</a><button aria-label="Expand sidebar category &#x27;4.AI应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/5micropython应用开发指南-1">5.MicroPython应用开发指南</a><button aria-label="Expand sidebar category &#x27;5.MicroPython应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/6系统开发指南-1">6.系统开发指南</a><button aria-label="Expand sidebar category &#x27;6.系统开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/7sdk-api参考指南-1">7.SDK API参考指南</a><button aria-label="Collapse sidebar category &#x27;7.SDK API参考指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230Inter-corecommunicationAPIreference">K230核间通讯API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230ThesystemcontrolstheMAPIreference">K230系统控制MAPI参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230MultimediaMiddlewareAPIReference">K230 中间件API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DMAAPIreference">K230 DMA API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DPUAPIreference">K230 DPU API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230FFTAPIreference">K230 FFT API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230GPUAPIreference">K230 GPU API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230SHA256APIreference">K230 SHA256 API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VICAPAPIreference">K230 VICAP API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VICAPSENSORParameterpartitionreference">K230 VICAP SENSOR 参数分区参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230systemcontrolAPIreference">K230系统控制API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VideocodecAPIreference">K230视频编解码API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VideooutputAPIreference">K230视频输出API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CanaanK230/part7/K230AudioAPIreference">K230音频API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DRMUserGuide">K230 DRM使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230Large-corelow-speeddriveAPIreference">K230大核低速驱动API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers">K230小核Linux驱动API参考</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/8常见问题-1">8.常见问题</a><button aria-label="Expand sidebar category &#x27;8.常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/7sdk-api参考指南-1"><span itemprop="name">7.SDK API参考指南</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K230音频API参考</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K230音频API参考</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-概述">1. 概述<a href="#1-概述" class="hash-link" aria-label="Direct link to 1. 概述" title="Direct link to 1. 概述">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-概述">1.1 概述<a href="#11-概述" class="hash-link" aria-label="Direct link to 1.1 概述" title="Direct link to 1.1 概述">​</a></h3>
<p>音频模块包括音频输入ai、音频输出ao、音频编码aenc、音频解码adec四个子模块以及对内置模拟audio codec的支持。音频输入模块包括i2s和pdm两种音频接口，配合pdma做内存拷贝，支持数字麦(pdm/i2s)和模拟audio codec(i2s)声源输入，内置模拟audio codec，支持对音频数据进行声音质量增强(VQE)处理：3A(AEC回声消除、ANR降噪、AGC自动增益)。音频输出模块支持i2s音频接口，配合pdma做内存拷贝，可外接数据喇叭或模拟audio codec作为声音输出。音频编码和解码模块暂支持对 G711格式的音频编解码功能，并支持外部编解码器的注册。</p>
<p>将音频模块拆分成多个子模块，模块间以低耦合的方式实现数据流的互传，这样的设计足以满足MAIX3下现有的多媒体业务。下图仅以语音对讲业务场景下音频模块使用方式来做分析。通过音频输入模块将采集到的音频数据通过音频编码模块编码后通过网络发送到远端，从远端获取到的音频编码数据经过音频解码模块解码后经音频输出模块即可播放远端声音。</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/b96e2ea6fe9536e76af33afe46b2069e-6c1ecb8abdebe059bc15181016e7cc58.png" width="1375" height="325" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-功能描述">1.2 功能描述<a href="#12-功能描述" class="hash-link" aria-label="Direct link to 1.2 功能描述" title="Direct link to 1.2 功能描述">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-音频输入">1.2.1 音频输入<a href="#121-音频输入" class="hash-link" aria-label="Direct link to 1.2.1 音频输入" title="Direct link to 1.2.1 音频输入">​</a></h4>
<p>音频输入模块（AI）主要实现配置及启用音频输入设备、获取音频帧数据等功能。</p>
<p>音频输入模块支持I2s和pdm协议接口。i2s 支持同时采集最多2路双声道音频,pdm支持同时采集最多8路单声道音频。详细的i2s、pdm特性如下：</p>
<ul>
<li>
<p>I2s音频接口</p>
<ol>
<li>
<p>数据采样率支持8kHz/12kHz/16kHz/24kHz/32kHz/44.1kHz/48kHz/96kHz/192kHz，采样精度支持16/24/32bit。</p>
</li>
<li>
<p>支持2组可配置IO用于输入/输出I2S音频数据，支持全双工模式。</p>
</li>
</ol>
</li>
<li>
<p>pdm音频接口</p>
<ol>
<li>
<p>支持PDM音频输入，1bit位宽，采样时钟频率为0.256MHz/0.384MHz/0.512MHz/0.768MHz/1.024MHz/1.4112MHz/1.536MHz/2.048MHz/2.8224MHz/3.072MHz/4.096MHz/5.6448MHz/6.144MHz/12.288MHz/24.576MHz，输入的PCM音频采样率为8kHz/12kHz/16kHz/24kHz/32kHz/44.1kHz/48kHz/96kHz/192kHz。采样精度支持16/24/32bit.</p>
</li>
<li>
<p>支持过采样率128、64、32倍过采样。</p>
</li>
<li>
<p>支持1-4个IO用于输入PDM音频数据。</p>
</li>
<li>
<p>输入支持可配置1-8个PDM声道，支持PDM左右单声道模式和双声道模式，各IO声道模式统一，PDM双声道模式最多使用4个IO</p>
</li>
<li>
<p>使能的声道序号从小到大并且连续，不支持各声道随机使能</p>
</li>
</ol>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="122-音频输出">1.2.2 音频输出<a href="#122-音频输出" class="hash-link" aria-label="Direct link to 1.2.2 音频输出" title="Direct link to 1.2.2 音频输出">​</a></h4>
<p>音频输出（AO）主要实现启用音频输出设备、发送音频帧到输出通道等功能。</p>
<p>音频输出模块支持I2s协议接口。i2s 支持同时输出最多2路双声道音频。</p>
<ul>
<li>
<p>i2s音频接口</p>
<ol>
<li>
<p>数据采样率支持8kHz/12kHz/16kHz/24kHz/32kHz/44.1kHz/48kHz/96kHz/192kHz，采样精度16/24/32bit。</p>
</li>
<li>
<p>支持2组可配置IO用于输入/输出I2S音频数据，支持全双工模式。</p>
</li>
</ol>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-音频链路">1.2.3 音频链路<a href="#123-音频链路" class="hash-link" aria-label="Direct link to 1.2.3 音频链路" title="Direct link to 1.2.3 音频链路">​</a></h4>
<ul>
<li>
<p>audio codec从模拟麦克风接收到的信号，转变为I2S格式的PCM数据后，输入到audio中的I2S中；I2S输出的PCM数据，经过audio codec后，变为模拟信号发出，该模式不使用数字IO，固定使用I2S的sdi0和sdo0接口。</p>
</li>
<li>
<p>I2S的直接与片外的数字麦克风和PA连接。共有两组接口可以选择<!-- -->:sdi0<!-- -->、sdo0及sdi1、sdo1。</p>
</li>
<li>
<p>片外的PDM麦克风，输入最多8路PDM数据到audio的4个输入数据接口。</p>
</li>
</ul>
<p>可供选择得链路包括:</p>
<ul>
<li>
<p>3组pdm_in + 1组i2s_in + 2组i2s out，其中1组i2s_in可以使用内置audio codec或片外</p>
</li>
<li>
<p>4组pdm_in + 2组i2s out</p>
</li>
<li>
<p>2组i2s_in + 2组 pdm_in + 2组i2s out</p>
</li>
</ul>
<p>可以使用内置codec或外接设备(音频子板)来测试音频相关功能。使用内置codec可以测试一组I2S音频输入和输出及audio codec相关功能，使用音频子板可以测试2组i2s音频输入输出和4组pdm音频输入功能。</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/b76dc39c5256a09c53be0e7572c2f587-6e0689b1b0d6ff19ea30fc834e163db5.png" width="1429" height="821" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-声音质量增强">1.2.4 声音质量增强<a href="#124-声音质量增强" class="hash-link" aria-label="Direct link to 1.2.4 声音质量增强" title="Direct link to 1.2.4 声音质量增强">​</a></h4>
<p>音频模块 支持对音频数据进行声音质量增强处理，实现音频3A功能。目前支持的采样精度为16bit，支持的采样率为16k。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-api-参考">2. API 参考<a href="#2-api-参考" class="hash-link" aria-label="Direct link to 2. API 参考" title="Direct link to 2. API 参考">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-音频输入">2.1 音频输入<a href="#21-音频输入" class="hash-link" aria-label="Direct link to 2.1 音频输入" title="Direct link to 2.1 音频输入">​</a></h3>
<p>该功能模块提供以下API：</p>
<ul>
<li><a href="#211-kd_mpi_ai_set_pub_attr">kd_mpi_ai_set_pub_attr</a></li>
<li><a href="#212-kd_mpi_ai_get_pub_attr">kd_mpi_ai_get_pub_attr</a></li>
<li><a href="#213-kd_mpi_ai_enable">kd_mpi_ai_enable</a></li>
<li><a href="#214-kd_mpi_ai_disable">kd_mpi_ai_disable</a></li>
<li><a href="#215-kd_mpi_ai_enable_chn">kd_mpi_ai_enable_chn</a></li>
<li><a href="#215-kd_mpi_ai_enable_chn">kd_mpi_ai_disable_chn</a></li>
<li><a href="#217-kd_mpi_ai_get_frame">kd_mpi_ai_get_frame</a></li>
<li><a href="#218-kd_mpi_ai_release_frame">kd_mpi_ai_release_frame</a></li>
<li><a href="#219-kd_mpi_ai_set_vqe_attr">kd_mpi_ai_set_vqe_attr</a></li>
<li><a href="#2110-kd_mpi_ai_get_vqe_attr">kd_mpi_ai_get_vqe_attr</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-kd_mpi_ai_set_pub_attr">2.1.1 kd_mpi_ai_set_pub_attr<a href="#211-kd_mpi_ai_set_pub_attr" class="hash-link" aria-label="Direct link to 2.1.1 kd_mpi_ai_set_pub_attr" title="Direct link to 2.1.1 kd_mpi_ai_set_pub_attr">​</a></h4>
<p>【描述】</p>
<p>设置AI设备属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_set_pub_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev, const <a href="#3112-k_aio_dev_attr">k_aio_dev_attr</a> *attr);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>attr</td><td>AI设备属性指针。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k_aio_dev_attr aio_dev_attr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">audio_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> KD_AUDIO_INPUT_TYPE_I2S</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sample_rate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">44100</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bit_width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> KD_AUDIO_BIT_WIDTH_16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chn_cnt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> K_STANDARD_MODE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frame_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">point_num_per_frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">44100</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> K_AIO_I2STYPE_INNERCODEC</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_set_pub_attr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">aio_dev_attr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ai_set_pub_attr failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_enable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ai_set_pub_attr failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_enable_chn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ai_set_pub_attr failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-kd_mpi_ai_get_pub_attr">2.1.2 kd_mpi_ai_get_pub_attr<a href="#212-kd_mpi_ai_get_pub_attr" class="hash-link" aria-label="Direct link to 2.1.2 kd_mpi_ai_get_pub_attr" title="Direct link to 2.1.2 kd_mpi_ai_get_pub_attr">​</a></h4>
<p>【描述】</p>
<p>获取AI设备属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_get_pub_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev, <a href="#3112-k_aio_dev_attr">k_aio_dev_attr</a> *attr);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>attr</td><td>AI设备属性指针。</td><td>输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="213-kd_mpi_ai_enable">2.1.3 kd_mpi_ai_enable<a href="#213-kd_mpi_ai_enable" class="hash-link" aria-label="Direct link to 2.1.3 kd_mpi_ai_enable" title="Direct link to 2.1.3 kd_mpi_ai_enable">​</a></h4>
<p>【描述】</p>
<p>使能ai设备。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_enable(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="214-kd_mpi_ai_disable">2.1.4 kd_mpi_ai_disable<a href="#214-kd_mpi_ai_disable" class="hash-link" aria-label="Direct link to 2.1.4 kd_mpi_ai_disable" title="Direct link to 2.1.4 kd_mpi_ai_disable">​</a></h4>
<p>【描述】</p>
<p>禁用ai设备。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_disable(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="215-kd_mpi_ai_enable_chn">2.1.5 kd_mpi_ai_enable_chn<a href="#215-kd_mpi_ai_enable_chn" class="hash-link" aria-label="Direct link to 2.1.5 kd_mpi_ai_enable_chn" title="Direct link to 2.1.5 kd_mpi_ai_enable_chn">​</a></h4>
<p>【描述】</p>
<p>使能ai通道。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_enable_chn(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev,<a href="#313-k_ai_chn">k_ai_chn</a> ai_chn);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="216-kd_mpi_ai_disable_chn">2.1.6 kd_mpi_ai_disable_chn<a href="#216-kd_mpi_ai_disable_chn" class="hash-link" aria-label="Direct link to 2.1.6 kd_mpi_ai_disable_chn" title="Direct link to 2.1.6 kd_mpi_ai_disable_chn">​</a></h4>
<p>【描述】</p>
<p>禁用ai通道。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_disable_chn(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev,<a href="#313-k_ai_chn">k_ai_chn</a> ai_chn);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="217-kd_mpi_ai_get_frame">2.1.7 kd_mpi_ai_get_frame<a href="#217-kd_mpi_ai_get_frame" class="hash-link" aria-label="Direct link to 2.1.7 kd_mpi_ai_get_frame" title="Direct link to 2.1.7 kd_mpi_ai_get_frame">​</a></h4>
<p>【描述】</p>
<p>获取音频帧。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_get_frame(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev,<a href="#313-k_ai_chn">k_ai_chn</a> ai_chn,<a href="#3114-k_audio_frame">k_audio_frame</a>*frame, k_u32 milli_sec);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr><tr><td>frame</td><td>音频帧数据。</td><td>输出</td></tr><tr><td>milli_sec</td><td>获取数据的超时时间。 -1表示阻塞模式，无数据时一直等待；  0 表示非阻塞模式，无数据时则报错返回；  &gt;0表示阻塞milli_sec毫秒，超时则报错返回。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<p>【注意】</p>
<ul>
<li>milli_sec的值必须大于等于-1，等于-1时采用阻塞模式获取数据，等于0时采用非</li>
</ul>
<p>阻塞模式获取数据，大于0时，阻塞milli_sec毫秒后，没有数据则返回超时并报错。</p>
<ul>
<li>获取音频帧数据前，必须先使能对应的AI通道。</li>
</ul>
<p>【举例】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_frame audio_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//get frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_get_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dev_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;=========kd_mpi_ai_get_frame timeout\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">continue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//process frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">process_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//release frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kd_mpi_ai_release_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dev_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="218-kd_mpi_ai_release_frame">2.1.8 kd_mpi_ai_release_frame<a href="#218-kd_mpi_ai_release_frame" class="hash-link" aria-label="Direct link to 2.1.8 kd_mpi_ai_release_frame" title="Direct link to 2.1.8 kd_mpi_ai_release_frame">​</a></h4>
<p>【描述】</p>
<p>释放音频帧。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_release_frame(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev,<a href="#313-k_ai_chn">k_ai_chn</a> ai_chn,const <a href="#3114-k_audio_frame">k_audio_frame</a> *frame);【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr><tr><td>frame</td><td>音频帧数据。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="219-kd_mpi_ai_set_vqe_attr">2.1.9 kd_mpi_ai_set_vqe_attr<a href="#219-kd_mpi_ai_set_vqe_attr" class="hash-link" aria-label="Direct link to 2.1.9 kd_mpi_ai_set_vqe_attr" title="Direct link to 2.1.9 kd_mpi_ai_set_vqe_attr">​</a></h4>
<p>【描述】</p>
<p>设置AI的声音质量增强功能相关属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_set_vqe_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev, <a href="#313-k_ai_chn">k_ai_chn</a> ai_chn, const k_bool *vqe_enable);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr><tr><td>vqe_enable</td><td>声音质量增强使能标志位。 K_TRUE：使能。 K_FALSE：不使能。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
</ul>
<p>库文件：libai.a</p>
<p>【注意】</p>
<p>目前支持的采样精度为16bit，支持的采样率为8k和16k。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2110-kd_mpi_ai_get_vqe_attr">2.1.10 kd_mpi_ai_get_vqe_attr<a href="#2110-kd_mpi_ai_get_vqe_attr" class="hash-link" aria-label="Direct link to 2.1.10 kd_mpi_ai_get_vqe_attr" title="Direct link to 2.1.10 kd_mpi_ai_get_vqe_attr">​</a></h4>
<p>【描述】</p>
<p>获取AI的声音质量增强功能相关属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ai_get_vqe_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ai_dev, <a href="#313-k_ai_chn">k_ai_chn</a> ai_chn, k_bool *vqe_enable);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ai_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ai_chn</td><td>音频通道号。</td><td>输入</td></tr><tr><td>vqe_enable</td><td>声音质量增强使能标志位指针。 K_TRUE：使能。 K_FALSE：不使能。</td><td>输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-音频输出">2.2 音频输出<a href="#22-音频输出" class="hash-link" aria-label="Direct link to 2.2 音频输出" title="Direct link to 2.2 音频输出">​</a></h3>
<p>该功能模块提供以下API：</p>
<ul>
<li><a href="#221-kd_mpi_ao_set_pub_attr">kd_mpi_ao_set_pub_attr</a></li>
<li><a href="#212-kd_mpi_ai_get_pub_attr">kd_mpi_ao_get_pub_attr</a></li>
<li><a href="#223-kd_mpi_ao_enable">kd_mpi_ao_enable</a></li>
<li><a href="#224-kd_mpi_ao_disable">kd_mpi_ao_disable</a></li>
<li><a href="#225-kd_mpi_ao_enable_chn">kd_mpi_ao_enable_chn</a></li>
<li><a href="#226-kd_mpi_ao_disable_chn">kd_mpi_ao_disable_chn</a></li>
<li><a href="#227-kd_mpi_ao_send_frame">kd_mpi_ao_send_frame</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-kd_mpi_ao_set_pub_attr">2.2.1 kd_mpi_ao_set_pub_attr<a href="#221-kd_mpi_ao_set_pub_attr" class="hash-link" aria-label="Direct link to 2.2.1 kd_mpi_ao_set_pub_attr" title="Direct link to 2.2.1 kd_mpi_ao_set_pub_attr">​</a></h4>
<p>【描述】</p>
<p>设置AO设备属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_set_pub_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev, const <a href="#3112-k_aio_dev_attr">k_aio_dev_attr</a> *attr);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>attr</td><td>AO设备属性指针。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见  错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k_aio_dev_attr ao_dev_attr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">audio_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> KD_AUDIO_OUTPUT_TYPE_I2S</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sample_rate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">48000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bit_width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> KD_AUDIO_BIT_WIDTH_24</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">chn_cnt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_mode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> K_RIGHT_JUSTIFYING_MODE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">frame_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">point_num_per_frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">48000</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">kd_audio_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_attr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i2s_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> K_AIO_I2STYPE_EXTERN</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ao_set_pub_attr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ao_dev_attr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ao_set_pub_attr failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_enable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ai_enable failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_enable_chn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;kd_mpi_ai_enable_chn failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> K_FAILED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-kd_mpi_ao_get_pub_attr">2.2.2 kd_mpi_ao_get_pub_attr<a href="#222-kd_mpi_ao_get_pub_attr" class="hash-link" aria-label="Direct link to 2.2.2 kd_mpi_ao_get_pub_attr" title="Direct link to 2.2.2 kd_mpi_ao_get_pub_attr">​</a></h4>
<p>【描述】</p>
<p>获取AO设备属性。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_get_pub_attr(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev, <a href="#3112-k_aio_dev_attr">k_aio_dev_attr</a> *attr);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>attr</td><td>AO设备属性指针。</td><td>输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-kd_mpi_ao_enable">2.2.3 kd_mpi_ao_enable<a href="#223-kd_mpi_ao_enable" class="hash-link" aria-label="Direct link to 2.2.3 kd_mpi_ao_enable" title="Direct link to 2.2.3 kd_mpi_ao_enable">​</a></h4>
<p>【描述】</p>
<p>使能ao设备。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_enable(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="224-kd_mpi_ao_disable">2.2.4 kd_mpi_ao_disable<a href="#224-kd_mpi_ao_disable" class="hash-link" aria-label="Direct link to 2.2.4 kd_mpi_ao_disable" title="Direct link to 2.2.4 kd_mpi_ao_disable">​</a></h4>
<p>【描述】</p>
<p>禁用ao设备。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_disable(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="225-kd_mpi_ao_enable_chn">2.2.5 kd_mpi_ao_enable_chn<a href="#225-kd_mpi_ao_enable_chn" class="hash-link" aria-label="Direct link to 2.2.5 kd_mpi_ao_enable_chn" title="Direct link to 2.2.5 kd_mpi_ao_enable_chn">​</a></h4>
<p>【描述】</p>
<p>使能ao通道。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_enable_chn(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev,<a href="#314-k_ao_chn">k_ao_chn</a> ao_chn);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ao_chn</td><td>音频通道号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="226-kd_mpi_ao_disable_chn">2.2.6 kd_mpi_ao_disable_chn<a href="#226-kd_mpi_ao_disable_chn" class="hash-link" aria-label="Direct link to 2.2.6 kd_mpi_ao_disable_chn" title="Direct link to 2.2.6 kd_mpi_ao_disable_chn">​</a></h4>
<p>【描述】</p>
<p>禁用ao通道。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_disable_chn(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev,<a href="#314-k_ao_chn">k_ao_chn</a> ao_chn);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ao_chn</td><td>音频通道号。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ao_api.h</li>
<li>库文件：libao.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="227-kd_mpi_ao_send_frame">2.2.7 kd_mpi_ao_send_frame<a href="#227-kd_mpi_ao_send_frame" class="hash-link" aria-label="Direct link to 2.2.7 kd_mpi_ao_send_frame" title="Direct link to 2.2.7 kd_mpi_ao_send_frame">​</a></h4>
<p>【描述】</p>
<p>发送ao帧数据。</p>
<p>【语法】</p>
<p>k_s32 kd_mpi_ao_send_frame</p>
<p>(<a href="#312-k_audio_dev">k_audio_dev</a> ao_dev,<a href="#314-k_ao_chn">k_ao_chn</a> ao_chn,const <a href="#3114-k_audio_frame">k_audio_frame</a>*frame,k_s32 milli_sec);</p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>ao_dev</td><td>音频设备号。</td><td>输入</td></tr><tr><td>ao_chn</td><td>音频通道号。</td><td>输入</td></tr><tr><td>frame</td><td>音频帧数据指针。</td><td>输入</td></tr><tr><td>milli_sec</td><td>发送数  据的超时时间。 -1表示阻塞模式，无数据时一直等待；  0表示非阻塞模式，无数据时则报错返回；  &gt;0表示阻塞milli_sec毫秒，超时则报错返回。</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_ai_api.h</li>
<li>库文件：libai.a</li>
</ul>
<p>【注意】</p>
<ul>
<li>milli_sec的值必须大于等于-1，等于-1时采用阻塞模式获取数据，等于0时采用非</li>
</ul>
<p>阻塞模式获取数据，大于0时，阻塞milli_sec毫秒后，没有数据则返回超时并报错。</p>
<ul>
<li>发送音频帧数据前，必须先使能对应的AO通道。</li>
</ul>
<p>【举例】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_frame audio_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_s32 ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//get ai frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ai_get_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;=========kd_mpi_ai_get_frame timeout\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">continue</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//send ai frame to ao</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">kd_mpi_ao_send_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">K_SUCCESS </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;=======kd_mpi_ao_send_frame failed\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//release ai frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">kd_mpi_ai_release_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">audio_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-音频编码">2.3 音频编码<a href="#23-音频编码" class="hash-link" aria-label="Direct link to 2.3 音频编码" title="Direct link to 2.3 音频编码">​</a></h3>
<p>音频编码主要实现创建编码通道、发送音频帧编码及获取编码码流等功能。音频编码部分，提供g711a/u编码，暂只支持16bit采样精度。</p>
<p>该功能模块提供以下API：</p>
<ul>
<li><a href="#231-kd_mpi_aenc_register_encoder">kd_mpi_aenc_register_encoder</a>：注册编码器。</li>
<li><a href="#232-kd_mpi_aenc_unregister_encoder">kd_mpi_aenc_unregister_encoder</a>：注销编码器。</li>
<li><a href="#233-kd_mpi_aenc_create_chn">kd_mpi_aenc_create_chn</a>:创建编码通道</li>
<li><a href="#234-kd_mpi_aenc_destroy_chn">kd_mpi_aenc_destroy_chn</a>:销毁编码通道</li>
<li><a href="#235-kd_mpi_aenc_send_frame">kd_mpi_aenc_send_frame</a>：发送音频编码音频帧</li>
<li><a href="#236-kd_mpi_aenc_get_stream">kd_mpi_aenc_get_stream</a>：获取音频编码码流</li>
<li><a href="#237-kd_mpi_aenc_release_stream">kd_mpi_aenc_release_stream</a>：释放音频编码码流</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="231-kd_mpi_aenc_register_encoder">2.3.1 kd_mpi_aenc_register_encoder<a href="#231-kd_mpi_aenc_register_encoder" class="hash-link" aria-label="Direct link to 2.3.1 kd_mpi_aenc_register_encoder" title="Direct link to 2.3.1 kd_mpi_aenc_register_encoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册编码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_register_encoder(k_s32 *handle, const <a href="#322-k_aenc_encoder">k_aenc_encoder</a> *encoder);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>handle</td><td>注册句柄。</td><td>输出</td></tr><tr><td>encoder</td><td>编码器属性结构体。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>用户通过传入编码器属性结构体，向 AENC 模块注册一个编码器，并返回注册句</p>
<p>柄，用户可以最后通过注册句柄来注销该编码器。</p>
<p>AENC 模块最大可注册 20 个编码器，且自身已注册 G711.a、G711.u</p>
<p>两个编码器。</p>
<p>同一种编码协议不允许重复注册编码器，例如假如已注册 G711 编码器，不允许另</p>
<p>外再注册一个 G711 编码器</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="232-kd_mpi_aenc_unregister_encoder">2.3.2 kd_mpi_aenc_unregister_encoder<a href="#232-kd_mpi_aenc_unregister_encoder" class="hash-link" aria-label="Direct link to 2.3.2 kd_mpi_aenc_unregister_encoder" title="Direct link to 2.3.2 kd_mpi_aenc_unregister_encoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注销编码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_unregister_encoder(k_s32 handle);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>handle</td><td>注销句柄。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="233-kd_mpi_aenc_create_chn">2.3.3 kd_mpi_aenc_create_chn<a href="#233-kd_mpi_aenc_create_chn" class="hash-link" aria-label="Direct link to 2.3.3 kd_mpi_aenc_create_chn" title="Direct link to 2.3.3 kd_mpi_aenc_create_chn">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>创建音频编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_create_chn(<a href="#326-k_aenc_chn">k_aenc_chn</a> aenc_chn, const <a href="#323-k_aenc_chn_attr">k_aenc_chn_attr</a> *attr);</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>aenc_chn</td><td>通道号。 取值范围: [0, <a href="#324-aenc_max_chn_nums">AENC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr><tr><td>attr</td><td>音频编码通道属性指针。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>buffer 大小以帧为单位，取值范围是[2, <a href="#315-k_max_audio_frame_num">K_MAX_AUDIO_FRAME_NUM</a>，建议配置 为 10 以上，过小的 buffer 配置可能导致丢帧等异常。每个编码通道都会根据buffer大小来配置队列大小，用以缓存编码帧数据。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="234-kd_mpi_aenc_destroy_chn">2.3.4 kd_mpi_aenc_destroy_chn<a href="#234-kd_mpi_aenc_destroy_chn" class="hash-link" aria-label="Direct link to 2.3.4 kd_mpi_aenc_destroy_chn" title="Direct link to 2.3.4 kd_mpi_aenc_destroy_chn">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>销毁音频编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_destroy_chn(<a href="#326-k_aenc_chn">k_aenc_chn</a> aenc_chn);</p>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>aenc_chn</td><td>通道号。 取值范围: [0, <a href="#324-aenc_max_chn_nums">AENC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>无</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="235-kd_mpi_aenc_send_frame">2.3.5 kd_mpi_aenc_send_frame<a href="#235-kd_mpi_aenc_send_frame" class="hash-link" aria-label="Direct link to 2.3.5 kd_mpi_aenc_send_frame" title="Direct link to 2.3.5 kd_mpi_aenc_send_frame">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>发送音频编码帧。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_send_frame(<a href="#326-k_aenc_chn">k_aenc_chn</a> aenc_chn,const <a href="#3114-k_audio_frame">k_audio_frame</a> *frame);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>aenc_chn</td><td>通道号。  取值范围：[0, AENC_MAX_CHN_NUM)。  输入</td><td>输入</td></tr><tr><td>frame</td><td>音频帧结构体指针。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>音频编码发送码流是非阻塞接口，如果音频码流缓存满，则直接返回失败。该接口用于用户主动发送音频帧进行编码，如果 AENC 通道已经通过系统绑定接口与 AI 绑定，不需要也不建议调此接口。调用该接口发送音频编码音频帧时，必须先创建对应的编码通道。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="236-kd_mpi_aenc_get_stream">2.3.6 kd_mpi_aenc_get_stream<a href="#236-kd_mpi_aenc_get_stream" class="hash-link" aria-label="Direct link to 2.3.6 kd_mpi_aenc_get_stream" title="Direct link to 2.3.6 kd_mpi_aenc_get_stream">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取音频编码码流。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_get_stream(<a href="#326-k_aenc_chn">k_aenc_chn</a> aenc_chn, <a href="#327-k_audio_stream">k_audio_stream</a> *stream, k_s32 milli_sec);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>aenc_chn</td><td>通道号。  取值范围：[0, AENC_MAX_CHN_NUM)。</td><td>输入</td></tr><tr><td>stream</td><td>获取的音频码流。</td><td>输出</td></tr><tr><td>milli_sec</td><td>获取数据的超时时间  -1 表示阻塞模式，无数据时一直等待；  0 表示非阻塞模式，无数据时则报错返回；  &gt;0 表示阻塞 s32MilliSec 毫秒，超时则报错返回。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>必须创建通道后才可能获取码流，否则直接返回失败，如果在获取码流过程中销</p>
<p>毁通道则会立刻返回失败。</p>
<p>s32MilliSec 的值必须大于等于-1，等于-1 时采用阻塞模式获取数据，等于 0 时采</p>
<p>用非阻塞模式获取数据，大于 0 时，阻塞 s32MilliSec 毫秒后，没有数据则返回超</p>
<p>时并报错。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="237-kd_mpi_aenc_release_stream">2.3.7 kd_mpi_aenc_release_stream<a href="#237-kd_mpi_aenc_release_stream" class="hash-link" aria-label="Direct link to 2.3.7 kd_mpi_aenc_release_stream" title="Direct link to 2.3.7 kd_mpi_aenc_release_stream">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>释放音频编码码流。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_aenc_release_stream(<a href="#326-k_aenc_chn">k_aenc_chn</a> aenc_chn, const <a href="#327-k_audio_stream">k_audio_stream</a> *stream);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>aenc_chn</td><td>通道号。  取值范围：[0, AENC_MAX_CHN_NUM)。</td><td>输入</td></tr><tr><td>stream</td><td>获取的音频码流。</td><td>输出</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>无</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：mpi_aenc_api.h</li>
<li>库文件：libaenc.a</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-音频解码">2.4 音频解码<a href="#24-音频解码" class="hash-link" aria-label="Direct link to 2.4 音频解码" title="Direct link to 2.4 音频解码">​</a></h3>
<p>音频解码主要实现解码通道、发送音频码流解码及获取解码后音频帧等功能。</p>
<p>音频编解码部分，提供g711a/u解码，暂支持16bit采样精度。</p>
<p>该功能模块提供以下API：</p>
<ul>
<li><a href="#241-kd_mpi_adec_register_decoder">kd_mpi_adec_register_decoder</a>：注册解码器</li>
<li><a href="#242-kd_mpi_adec_unregister_decoder">kd_mpi_adec_unregister_decoder</a>：注销解码器</li>
<li><a href="#243-kd_mpi_adec_create_chn">kd_mpi_adec_create_chn</a>：创建音频解码通道</li>
<li><a href="#244-kd_mpi_adec_destroy_chn">kd_mpi_adec_destroy_chn</a>：销毁音频解码通道</li>
<li><a href="#245-kd_mpi_adec_send_stream">kd_mpi_adec_send_stream</a>：发送音频码流到音频解码通道</li>
<li><a href="#246-kd_mpi_adec_clr_chn_buf">kd_mpi_adec_clr_chn_buf</a>：清除 ADEC 通道中当前的音频数据缓存。</li>
<li><a href="#247-kd_mpi_adec_get_frame">kd_mpi_adec_get_frame</a>：获取音频解码帧数据</li>
<li><a href="#248-kd_mpi_adec_release_frame">kd_mpi_adec_release_frame</a>：释放音频解码帧数据</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="241-kd_mpi_adec_register_decoder">2.4.1 kd_mpi_adec_register_decoder<a href="#241-kd_mpi_adec_register_decoder" class="hash-link" aria-label="Direct link to 2.4.1 kd_mpi_adec_register_decoder" title="Direct link to 2.4.1 kd_mpi_adec_register_decoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册解码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_register_decoder(k_s32 *handle, const <a href="#329-k_adec_decoder">k_adec_decoder</a> *decoder);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>handle</td><td>注册句柄。</td><td>输出</td></tr><tr><td>decoder</td><td>解码器属性结构体。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>用户通过传入解码器属性结构体，向 ADEC 模块注册一个解码器，并返回注册句柄，用户可以最后通过注册句柄来注销该解码器。 ADEC 模块最大可注册 20 个解码器，且自身已注册 G711a、G711u两个解码器。 同一种解码协议不允许重复注册解码器，例如假如已注册 G711 解码器，不允许另外再注册一个 G711 解码器。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="242-kd_mpi_adec_unregister_decoder">2.4.2 kd_mpi_adec_unregister_decoder<a href="#242-kd_mpi_adec_unregister_decoder" class="hash-link" aria-label="Direct link to 2.4.2 kd_mpi_adec_unregister_decoder" title="Direct link to 2.4.2 kd_mpi_adec_unregister_decoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注销解码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_unregister_decoder(k_s32 handle);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数  名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>handle</td><td>注销句柄。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
<li>头文件：mpi_adec_api.h</li>
<li>库文件：libadec.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="243-kd_mpi_adec_create_chn">2.4.3 kd_mpi_adec_create_chn<a href="#243-kd_mpi_adec_create_chn" class="hash-link" aria-label="Direct link to 2.4.3 kd_mpi_adec_create_chn" title="Direct link to 2.4.3 kd_mpi_adec_create_chn">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>创建音频解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_create_chn(<a href="#3212-k_adec_chn">k_adec_chn</a> adec_chn, const <a href="#328-k_adec_chn_attr">k_adec_chn_attr</a> *attr);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>通道号。  取值范围：[0, <a href="#3211-adec_max_chn_nums">ADEC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr><tr><td>attr</td><td>通道属性指针。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>协议类型指定了该通道的解码协议，目前支持 G711。音频解码的部分属性需要与输出设备属性相匹配，例如采样率、帧长（每帧采样点数目）等。 buffer 大小以帧为单位，取值范围是[2, <a href="#315-k_max_audio_frame_num">K_MAX_AUDIO_FRAME_NUM</a>，建议配置为 10 以上，过小的 buffer 配置可能导致丢帧等异常。 在通道未创建前（或销毁后）才能使用此接口，如果通道已经被创建，则返回通道已经创建。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<p>【需求】</p>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="244-kd_mpi_adec_destroy_chn">2.4.4 kd_mpi_adec_destroy_chn<a href="#244-kd_mpi_adec_destroy_chn" class="hash-link" aria-label="Direct link to 2.4.4 kd_mpi_adec_destroy_chn" title="Direct link to 2.4.4 kd_mpi_adec_destroy_chn">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>销毁音频解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_destroy_chn(<a href="#3212-k_adec_chn">k_adec_chn</a> adec_chn);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>通道号。 取值范围: [0, <a href="#3211-adec_max_chn_nums">ADEC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>无</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
<li>头文件：mpi_adec_api.h</li>
<li>库文件：libadec.a</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="245-kd_mpi_adec_send_stream">2.4.5 kd_mpi_adec_send_stream<a href="#245-kd_mpi_adec_send_stream" class="hash-link" aria-label="Direct link to 2.4.5 kd_mpi_adec_send_stream" title="Direct link to 2.4.5 kd_mpi_adec_send_stream">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>发送音频码流到音频解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_send_stream(k_adec_chn adec_chn,const k_audio_stream *stream,k_bool block);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>通道号。  取值范围：[0, <a href="#3211-adec_max_chn_nums">ADEC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr><tr><td>stream</td><td>音频码流。</td><td>输入</td></tr><tr><td>block</td><td>阻塞标识。  HI_TRUE：阻塞。  HI_FALSE：非阻塞。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>发送数据时必须保证通道已经被创建，否则直接返回失败，如果在送数据过程中 销毁通道则会立刻返回失败。 支持阻塞或非阻塞方式发送码流。 当阻塞方式发送码流时，如果用于缓存解码后的音频帧的 Buffer 满，则此接口调用会被阻塞，直至解码后的音频帧数据被取走，或 ADEC 通道被销毁。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="246-kd_mpi_adec_clr_chn_buf">2.4.6 kd_mpi_adec_clr_chn_buf<a href="#246-kd_mpi_adec_clr_chn_buf" class="hash-link" aria-label="Direct link to 2.4.6 kd_mpi_adec_clr_chn_buf" title="Direct link to 2.4.6 kd_mpi_adec_clr_chn_buf">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>清除ADEC通道中当前的音频数据缓存。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_clr_chn_buf(<a href="#3212-k_adec_chn">k_adec_chn</a> adec_chn);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>通道号。 取值范围: [0, <a href="#3211-adec_max_chn_nums">ADEC_MAX_CHN_NUM</a>)。</td><td>输入</td></tr></tbody></table>
<ul>
<li>【说明】</li>
</ul>
<p>要求解码通道已 经被创建，如果通道未被创建则返回通道不存在错误码。</p>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="247-kd_mpi_adec_get_frame">2.4.7 kd_mpi_adec_get_frame<a href="#247-kd_mpi_adec_get_frame" class="hash-link" aria-label="Direct link to 2.4.7 kd_mpi_adec_get_frame" title="Direct link to 2.4.7 kd_mpi_adec_get_frame">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取音频解码帧数据。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_get_frame(<a href="#3212-k_adec_chn">k_adec_chn</a> adec_chn, <a href="#3114-k_audio_frame">k_audio_frame</a> *frame, k_s32 milli_sec);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>音频解码通道。</td><td>输入</td></tr><tr><td>frame_info</td><td>音频帧数据结构体  输出</td><td>输出</td></tr><tr><td>block</td><td>是否以阻塞方式获取</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="248-kd_mpi_adec_release_frame">2.4.8 kd_mpi_adec_release_frame<a href="#248-kd_mpi_adec_release_frame" class="hash-link" aria-label="Direct link to 2.4.8 kd_mpi_adec_release_frame" title="Direct link to 2.4.8 kd_mpi_adec_release_frame">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>释放获取到的音频解码 帧数据。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mpi_adec_release_frame(<a href="#326-k_aenc_chn">k_adec_chn</a> adec_chn, const <a href="#3114-k_audio_frame">k_audio_frame</a> *frame);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>adec_chn</td><td>音频解码通道。</td><td>输入</td></tr><tr><td>frame_info</td><td>音频帧数据结构体  输出</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：mpi_adec_api.h</p>
<p>库文件：libadec.a</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-内置audio-codec">2.5 内置Audio Codec<a href="#25-内置audio-codec" class="hash-link" aria-label="Direct link to 2.5 内置Audio Codec" title="Direct link to 2.5 内置Audio Codec">​</a></h3>
<p>内置Audio Codec主要通过ioctl提供对硬件设备的操作。在提供的ioctl的cmd中，有些</p>
<p>cmd用户可以不需要调用，直接使用模块加载时的默认值即可。ioctl调用实现的是对内置Audio Codec寄存器的读写。</p>
<p>当前版本对audio codec的控制操作主要包含<!-- -->:adc<!-- -->数字和模拟音量，dac数字/模拟音量，adc/dac静音控制。其中采样率，采样精度，i2s对齐模式这些控制操作由用户通过调用ai和ao的api接口内核自动完成(内核代码自动实现对codec硬件设备操作)，不再提供ioctl接口来控制。</p>
<p>内置 Audio Codec 标准功能 cmd:</p>
<ul>
<li><a href="#251-k_acodec_set_gain_micl">k_acodec_set_gain_micl</a>：左声道输入模拟增益控制</li>
<li><a href="#252-k_acodec_set_gain_micr">k_acodec_set_gain_micr</a>：右声道输入模拟增益控制</li>
<li><a href="#253-k_acodec_set_adcl_volume">k_acodec_set_adcl_volume</a>：左声道输入数字音量控制</li>
<li><a href="#254-k_acodec_set_adcr_volume">k_acodec_set_adcr_volume</a>：右声道输入数字音量控制</li>
<li><a href="#255-k_acodec_set_alc_gain_micl">k_acodec_set_alc_gain_micl</a>：alc左声道输入的模拟增益控制</li>
<li><a href="#256-k_acodec_set_alc_gain_micr">k_acodec_set_alc_gain_micr</a>：alc右声道输入的模拟增益控制</li>
<li><a href="#257-k_acodec_set_gain_hpoutl">k_acodec_set_gain_hpoutl</a>：左声道输出模拟音量控制</li>
<li><a href="#258-k_acodec_set_gain_hpoutr">k_acodec_set_gain_hpoutr</a>：右声道输出模拟音量控制</li>
<li><a href="#259-k_acodec_set_dacl_volume">k_acodec_set_dacl_volume</a>：左声道输出数字音量控制</li>
<li><a href="#2510-k_acodec_set_dacr_volume">k_acodec_set_dacr_volume</a>：右声道输出数字音量控制</li>
<li><a href="#2511-k_acodec_set_micl_mute">k_acodec_set_micl_mute</a>：左声道输入静音控制</li>
<li><a href="#2512-k_acodec_set_micr_mute">k_acodec_set_micr_mute</a>：右声道输入静音控制</li>
<li><a href="#2513-k_acodec_set_dacl_mute">k_acodec_set_dacl_mute</a>：左声道输出静音控制</li>
<li><a href="#2514-k_acodec_set_dacr_mute">k_acodec_set_dacr_mute</a>：右声道输出静音控制</li>
<li><a href="#2515-k_acodec_get_gain_micl">k_acodec_get_gain_micl</a>：获取左声道输入模拟增益值</li>
<li><a href="#2516-k_acodec_get_gain_micr">k_acodec_get_gain_micr</a>：获取右声道输入模拟增益值</li>
<li><a href="#2518-k_acodec_get_adcl_volume">k_acodec_get_adcl_volume</a>：获取左声道输入数字音量值</li>
<li><a href="#2519-k_acodec_get_adcr_volume">k_acodec_get_adcr_volume</a>：获取右声道输入数字音量值</li>
<li><a href="#255-k_acodec_get_alc_gain_micl">k_acodec_get_alc_gain_micl</a>：获取alc左声道输入的模拟增益值</li>
<li><a href="#256-k_acodec_get_alc_gain_micr">k_acodec_get_alc_gain_micr</a>：获取alc右声道输入的模拟增益值</li>
<li><a href="#257-k_acodec_get_gain_hpoutl">k_acodec_get_gain_hpoutl</a>：获取左声道输出模拟音量值</li>
<li><a href="#258-k_acodec_get_gain_hpoutr">k_acodec_get_gain_hpoutr</a>：获取右声道输出模拟音量值</li>
<li><a href="#259-k_acodec_get_dacl_volume">k_acodec_get_dacl_volume</a>：获取左声道输出数字音量值</li>
<li><a href="#2510-k_acodec_get_dacr_volume">k_acodec_get_dacr_volume</a>：获取右声道输出数字音量值</li>
<li><a href="#2510-k_acodec_reset">k_acodec_reset</a>：音量重置</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="251-k_acodec_set_gain_micl">2.5.1 k_acodec_set_gain_micl<a href="#251-k_acodec_set_gain_micl" class="hash-link" aria-label="Direct link to 2.5.1 k_acodec_set_gain_micl" title="Direct link to 2.5.1 k_acodec_set_gain_micl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输入模拟增益控制</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_gain_micl, k_u32 *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_gain_micl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>无符号整型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围为0db,6db,20db,30db。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="252-k_acodec_set_gain_micr">2.5.2 k_acodec_set_gain_micr<a href="#252-k_acodec_set_gain_micr" class="hash-link" aria-label="Direct link to 2.5.2 k_acodec_set_gain_micr" title="Direct link to 2.5.2 k_acodec_set_gain_micr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输入模拟增益控制</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_gain_micr, k_u32 *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_gain_micr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>无符号整型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围为0db,6db,20db,30db。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="253-k_acodec_set_adcl_volume">2.5.3 k_acodec_set_adcl_volume<a href="#253-k_acodec_set_adcl_volume" class="hash-link" aria-label="Direct link to 2.5.3 k_acodec_set_adcl_volume" title="Direct link to 2.5.3 k_acodec_set_adcl_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输入数字增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_adcl_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_adcl_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-97,30]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="254-k_acodec_set_adcr_volume">2.5.4 k_acodec_set_adcr_volume<a href="#254-k_acodec_set_adcr_volume" class="hash-link" aria-label="Direct link to 2.5.4 k_acodec_set_adcr_volume" title="Direct link to 2.5.4 k_acodec_set_adcr_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输入数字增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_adcr_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_adcr_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-97,30]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="255-k_acodec_set_alc_gain_micl">2.5.5 k_acodec_set_alc_gain_micl<a href="#255-k_acodec_set_alc_gain_micl" class="hash-link" aria-label="Direct link to 2.5.5 k_acodec_set_alc_gain_micl" title="Direct link to 2.5.5 k_acodec_set_alc_gain_micl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道alc输入模拟增益控制。</p>
<ul>
<li>【语法 】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_alc_gain_micl, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_alc_gain_micl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-18,28.5]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="256-k_acodec_set_alc_gain_micr">2.5.6 k_acodec_set_alc_gain_micr<a href="#256-k_acodec_set_alc_gain_micr" class="hash-link" aria-label="Direct link to 2.5.6 k_acodec_set_alc_gain_micr" title="Direct link to 2.5.6 k_acodec_set_alc_gain_micr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道alc输入模拟增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_alc_gain_micr, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_alc_gain_micr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-18,28.5]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="257-k_acodec_set_gain_hpoutl">2.5.7 k_acodec_set_gain_hpoutl<a href="#257-k_acodec_set_gain_hpoutl" class="hash-link" aria-label="Direct link to 2.5.7 k_acodec_set_gain_hpoutl" title="Direct link to 2.5.7 k_acodec_set_gain_hpoutl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输出模拟增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_gain_hpoutl, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_gain_hpoutl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-39,6]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="258-k_acodec_set_gain_hpoutr">2.5.8 k_acodec_set_gain_hpoutr<a href="#258-k_acodec_set_gain_hpoutr" class="hash-link" aria-label="Direct link to 2.5.8 k_acodec_set_gain_hpoutr" title="Direct link to 2.5.8 k_acodec_set_gain_hpoutr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输出模拟增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_gain_hpoutr, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_gain_hpoutr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-39,6]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="259-k_acodec_set_dacl_volume">2.5.9 k_acodec_set_dacl_volume<a href="#259-k_acodec_set_dacl_volume" class="hash-link" aria-label="Direct link to 2.5.9 k_acodec_set_dacl_volume" title="Direct link to 2.5.9 k_acodec_set_dacl_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输出数字增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_dacl_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_dacl_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文 件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-120,7]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2510-k_acodec_set_dacr_volume">2.5.10 k_acodec_set_dacr_volume<a href="#2510-k_acodec_set_dacr_volume" class="hash-link" aria-label="Direct link to 2.5.10 k_acodec_set_dacr_volume" title="Direct link to 2.5.10 k_acodec_set_dacr_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输出数字增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_dacr_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_dacr_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-120,7]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2511-k_acodec_set_micl_mute">2.5.11 k_acodec_set_micl_mute<a href="#2511-k_acodec_set_micl_mute" class="hash-link" aria-label="Direct link to 2.5.11 k_acodec_set_micl_mute" title="Direct link to 2.5.11 k_acodec_set_micl_mute">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输入静音控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_micl_mute, k_bool *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>  描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_micl_mute</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>bool型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>取值范围<!-- -->:K_TRUE<!-- -->静音，K_FALSE取消静音。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2512-k_acodec_set_micr_mute">2.5.12 k_acodec_set_micr_mute<a href="#2512-k_acodec_set_micr_mute" class="hash-link" aria-label="Direct link to 2.5.12 k_acodec_set_micr_mute" title="Direct link to 2.5.12 k_acodec_set_micr_mute">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输入静音控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_micr_mute, k_bool *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_micr_mute</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>bool型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>取值范围<!-- -->:K_TRUE<!-- -->静音，K_FALSE取消静音。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2513-k_acodec_set_dacl_mute">2.5.13 k_acodec_set_dacl_mute<a href="#2513-k_acodec_set_dacl_mute" class="hash-link" aria-label="Direct link to 2.5.13 k_acodec_set_dacl_mute" title="Direct link to 2.5.13 k_acodec_set_dacl_mute">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>左声道输出静音控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_dacl_mute, k_bool *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_dacl_mute</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>bool型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>取值范围<!-- -->:K_TRUE<!-- -->静音，K_FALSE取消静音。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2514-k_acodec_set_dacr_mute">2.5.14 k_acodec_set_dacr_mute<a href="#2514-k_acodec_set_dacr_mute" class="hash-link" aria-label="Direct link to 2.5.14 k_acodec_set_dacr_mute" title="Direct link to 2.5.14 k_acodec_set_dacr_mute">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>右声道输出静音控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_dacr_mute, k_bool *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_set_dacr_mute</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>bool型指针</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>取值范围<!-- -->:K_TRUE<!-- -->静音，K_FALSE取消静音。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2515-k_acodec_get_gain_micl">2.5.15 k_acodec_get_gain_micl<a href="#2515-k_acodec_get_gain_micl" class="hash-link" aria-label="Direct link to 2.5.15 k_acodec_get_gain_micl" title="Direct link to 2.5.15 k_acodec_get_gain_micl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取左声道输入模拟增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_gain_micl, k_u32 *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_gain_micl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>无符号整型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>获取到得模拟增益范围为0db,6db,20db,30db。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2516-k_acodec_get_gain_micr">2.5.16 k_acodec_get_gain_micr<a href="#2516-k_acodec_get_gain_micr" class="hash-link" aria-label="Direct link to 2.5.16 k_acodec_get_gain_micr" title="Direct link to 2.5.16 k_acodec_get_gain_micr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取右声道输入模拟增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_gain_micr, k_u32 *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_gain_micr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>无符号整型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>获取到得模拟增益范围为0db,6db,20db,30db。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2518-k_acodec_get_adcl_volume">2.5.18 k_acodec_get_adcl_volume<a href="#2518-k_acodec_get_adcl_volume" class="hash-link" aria-label="Direct link to 2.5.18 k_acodec_get_adcl_volume" title="Direct link to 2.5.18 k_acodec_get_adcl_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取左声道输入数字音量值</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_adcl_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_adcl_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-97,30]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2519-k_acodec_get_adcr_volume">2.5.19 k_acodec_get_adcr_volume<a href="#2519-k_acodec_get_adcr_volume" class="hash-link" aria-label="Direct link to 2.5.19 k_acodec_get_adcr_volume" title="Direct link to 2.5.19 k_acodec_get_adcr_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取右声道输入数字增益控制值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_adcr_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_adcr_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-97,30]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="255-k_acodec_get_alc_gain_micl">2.5.5 k_acodec_get_alc_gain_micl<a href="#255-k_acodec_get_alc_gain_micl" class="hash-link" aria-label="Direct link to 2.5.5 k_acodec_get_alc_gain_micl" title="Direct link to 2.5.5 k_acodec_get_alc_gain_micl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取左声道alc输入模拟增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_set_alc_gain_micl, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_alc_gain_micl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-18,28.5]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="256-k_acodec_get_alc_gain_micr">2.5.6 k_acodec_get_alc_gain_micr<a href="#256-k_acodec_get_alc_gain_micr" class="hash-link" aria-label="Direct link to 2.5.6 k_acodec_get_alc_gain_micr" title="Direct link to 2.5.6 k_acodec_get_alc_gain_micr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取右声道alc输入模拟增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_alc_gain_micr, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_alc_gain_micr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参  见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-18,28.5]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="257-k_acodec_get_gain_hpoutl">2.5.7 k_acodec_get_gain_hpoutl<a href="#257-k_acodec_get_gain_hpoutl" class="hash-link" aria-label="Direct link to 2.5.7 k_acodec_get_gain_hpoutl" title="Direct link to 2.5.7 k_acodec_get_gain_hpoutl">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取左声道输出模拟增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_gain_hpoutl, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_gain_hpoutl</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-39,6]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="258-k_acodec_get_gain_hpoutr">2.5.8 k_acodec_get_gain_hpoutr<a href="#258-k_acodec_get_gain_hpoutr" class="hash-link" aria-label="Direct link to 2.5.8 k_acodec_get_gain_hpoutr" title="Direct link to 2.5.8 k_acodec_get_gain_hpoutr">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取右声道输出模拟增益控制。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_gain_hpoutr, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_gain_hpoutr</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-39,6]</code>,赋值越大，音量越大，按1.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="259-k_acodec_get_dacl_volume">2.5.9 k_acodec_get_dacl_volume<a href="#259-k_acodec_get_dacl_volume" class="hash-link" aria-label="Direct link to 2.5.9 k_acodec_get_dacl_volume" title="Direct link to 2.5.9 k_acodec_get_dacl_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取左声道输出数字增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_dacl_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_dacl_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-120,7]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2510-k_acodec_get_dacr_volume">2.5.10 k_acodec_get_dacr_volume<a href="#2510-k_acodec_get_dacr_volume" class="hash-link" aria-label="Direct link to 2.5.10 k_acodec_get_dacr_volume" title="Direct link to 2.5.10 k_acodec_get_dacr_volume">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>获取右声道输出数字增益值。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_get_dacr_volume, float *arg);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_get_dacr_volume</td><td>ioctl号</td><td>输入</td></tr><tr><td>arg</td><td>有符号浮点型指针</td><td>输出</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>模拟增益范围<code>[-120,7]</code>,赋值越大，音量越大，按0.5db递增。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2510-k_acodec_reset">2.5.10 k_acodec_reset<a href="#2510-k_acodec_reset" class="hash-link" aria-label="Direct link to 2.5.10 k_acodec_reset" title="Direct link to 2.5.10 k_acodec_reset">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>音量重置:包括adc、dac、alc数字模拟增益。</p>
<ul>
<li>【语法】</li>
</ul>
<p>int ioctl (int fd, k_acodec_reset, ...);</p>
<ul>
<li>【参数】</li>
</ul>
<table><thead><tr><th><strong>参数名称</strong></th><th><strong>  描述</strong></th><th><strong>输入/输出</strong></th></tr></thead><tbody><tr><td>fd</td><td>Audio Codec设备文件描述符</td><td>输入</td></tr><tr><td>k_acodec_reset</td><td>ioctl号</td><td>输入</td></tr></tbody></table>
<ul>
<li>【返回值】</li>
</ul>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>0</td><td>成功</td></tr><tr><td>非0</td><td>失败，其值参见错误码</td></tr></tbody></table>
<ul>
<li>【需求】</li>
</ul>
<p>头文件：k_acodec_comm.h</p>
<p>库文件：libacodec.a</p>
<ul>
<li>【注意】</li>
</ul>
<p>无</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-音频编码mapi">2.6 音频编码MAPI<a href="#26-音频编码mapi" class="hash-link" aria-label="Direct link to 2.6 音频编码MAPI" title="Direct link to 2.6 音频编码MAPI">​</a></h3>
<p>音频编码功能模块提供以下 MAPI：</p>
<ul>
<li><a href="#261-kd_mapi_aenc_init">kd_mapi_aenc_init</a>：初始化编码通道</li>
<li><a href="#262-kd_mapi_aenc_deinit">kd_mapi_aenc_deinit</a>：去初始化编码通道。</li>
<li><a href="#263-kd_mapi_aenc_start">kd_mapi_aenc_start</a>：启动编码通道。</li>
<li><a href="#264-kd_mapi_aenc_stop">kd_mapi_aenc_stop</a>：停止编码通道。</li>
<li><a href="#265-kd_mapi_aenc_registercallback">kd_mapi_aenc_registercallback</a>：注册编码回调函数。</li>
<li><a href="#266-kd_mapi_aenc_unregistercallback">kd_mapi_aenc_unregistercallback</a>：解注册编码回调函数。</li>
<li><a href="#267-kd_mapi_aenc_bind_ai">kd_mapi_aenc_bind_ai</a>：绑定 ai。</li>
<li><a href="#268-kd_mapi_aenc_unbind_ai">kd_mapi_aenc_unbind_ai</a>：解绑定 ai。</li>
<li><a href="#269-kd_mapi_register_ext_audio_encoder">kd_mapi_register_ext_audio_encoder</a>：注册外部音频编码器。</li>
<li><a href="#2610-kd_mapi_unregister_ext_audio_encoder">kd_mapi_unregister_ext_audio_encoder</a>：解注册外部音频编码器。</li>
<li><a href="#2611-kd_mapi_aenc_send_frame">kd_mapi_aenc_send_frame</a>：发送音频编码音频帧。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="261-kd_mapi_aenc_init">2.6.1 kd_mapi_aenc_init<a href="#261-kd_mapi_aenc_init" class="hash-link" aria-label="Direct link to 2.6.1 kd_mapi_aenc_init" title="Direct link to 2.6.1 kd_mapi_aenc_init">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>初始化编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_aenc_init(<a href="#331-k_handle">k_handle</a> aenc_hdl,const <a href="#323-k_aenc_chn_attr">k_aenc_chn_attr</a> *attr);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="262-kd_mapi_aenc_deinit">2.6.2 kd_mapi_aenc_deinit<a href="#262-kd_mapi_aenc_deinit" class="hash-link" aria-label="Direct link to 2.6.2 kd_mapi_aenc_deinit" title="Direct link to 2.6.2 kd_mapi_aenc_deinit">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>去初始化编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_aenc_deinit(<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="263-kd_mapi_aenc_start">2.6.3 kd_mapi_aenc_start<a href="#263-kd_mapi_aenc_start" class="hash-link" aria-label="Direct link to 2.6.3 kd_mapi_aenc_start" title="Direct link to 2.6.3 kd_mapi_aenc_start">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>启动编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_aenc_start(<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="264-kd_mapi_aenc_stop">2.6.4 kd_mapi_aenc_stop<a href="#264-kd_mapi_aenc_stop" class="hash-link" aria-label="Direct link to 2.6.4 kd_mapi_aenc_stop" title="Direct link to 2.6.4 kd_mapi_aenc_stop">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>停止编码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_aenc_stop(<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="265-kd_mapi_aenc_registercallback">2.6.5 kd_mapi_aenc_registercallback<a href="#265-kd_mapi_aenc_registercallback" class="hash-link" aria-label="Direct link to 2.6.5 kd_mapi_aenc_registercallback" title="Direct link to 2.6.5 kd_mapi_aenc_registercallback">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册编码回调函数。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_aenc_registercallback(<a href="#331-k_handle">k_handle</a> aenc_hdl,k_aenc_callback_s *aenc_cb);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="266-kd_mapi_aenc_unregistercallback">2.6.6 kd_mapi_aenc_unregistercallback<a href="#266-kd_mapi_aenc_unregistercallback" class="hash-link" aria-label="Direct link to 2.6.6 kd_mapi_aenc_unregistercallback" title="Direct link to 2.6.6 kd_mapi_aenc_unregistercallback">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册编码回调函数。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_aenc_unregistercallback(<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="267-kd_mapi_aenc_bind_ai">2.6.7 kd_mapi_aenc_bind_ai<a href="#267-kd_mapi_aenc_bind_ai" class="hash-link" aria-label="Direct link to 2.6.7 kd_mapi_aenc_bind_ai" title="Direct link to 2.6.7 kd_mapi_aenc_bind_ai">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>绑定ai。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_aenc_bind_ai(<a href="#331-k_handle">k_handle</a> ai_hdl,<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="268-kd_mapi_aenc_unbind_ai">2.6.8 kd_mapi_aenc_unbind_ai<a href="#268-kd_mapi_aenc_unbind_ai" class="hash-link" aria-label="Direct link to 2.6.8 kd_mapi_aenc_unbind_ai" title="Direct link to 2.6.8 kd_mapi_aenc_unbind_ai">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>解绑定ai。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_aenc_unbind_ai(<a href="#331-k_handle">k_handle</a> ai_hdl,<a href="#331-k_handle">k_handle</a> aenc_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="269-kd_mapi_register_ext_audio_encoder">2.6.9 kd_mapi_register_ext_audio_encoder<a href="#269-kd_mapi_register_ext_audio_encoder" class="hash-link" aria-label="Direct link to 2.6.9 kd_mapi_register_ext_audio_encoder" title="Direct link to 2.6.9 kd_mapi_register_ext_audio_encoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册外置编码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_register_ext_audio_encoder(const <a href="#322-k_aenc_encoder">k_aenc_encoder</a> *encoder,<a href="#331-k_handle">k_handle</a> * aencoder_hdl)；</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2610-kd_mapi_unregister_ext_audio_encoder">2.6.10 kd_mapi_unregister_ext_audio_encoder<a href="#2610-kd_mapi_unregister_ext_audio_encoder" class="hash-link" aria-label="Direct link to 2.6.10 kd_mapi_unregister_ext_audio_encoder" title="Direct link to 2.6.10 kd_mapi_unregister_ext_audio_encoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>解注册外部音频编码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_unregister_ext_audio_encoder( <a href="#331-k_handle">k_handle</a> aencoder_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2611-kd_mapi_aenc_send_frame">2.6.11 kd_mapi_aenc_send_frame<a href="#2611-kd_mapi_aenc_send_frame" class="hash-link" aria-label="Direct link to 2.6.11 kd_mapi_aenc_send_frame" title="Direct link to 2.6.11 kd_mapi_aenc_send_frame">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>发送音频编码音频帧</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_aenc_send_frame(<a href="#331-k_handle">k_handle</a> ai_hdl,const <a href="#3114-k_audio_frame">k_audio_frame</a> *frame);</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-音频解码mapi">2.7 音频解码MAPI<a href="#27-音频解码mapi" class="hash-link" aria-label="Direct link to 2.7 音频解码MAPI" title="Direct link to 2.7 音频解码MAPI">​</a></h3>
<p>音频解码功能模块提供以下 MAPI：</p>
<ul>
<li><a href="#261-kd_mapi_aenc_init">kd_mapi_adec_init</a>：初始化解码通道</li>
<li><a href="#271-kd_mapi_adec_init">kd_mapi_adec_deinit</a>：去初始化解码通道。</li>
<li><a href="#273-kd_mapi_adec_start">kd_mapi_adec_start</a>：启动解码通道。</li>
<li><a href="#274-kd_mapi_adec_stop">kd_mapi_adec_stop</a>：停止解码通道。</li>
<li><a href="#275-kd_mapi_adec_registercallback">kd_mapi_adec_registercallback</a>：注册解码回调函数。</li>
<li><a href="#276-kd_mapi_adec_unregistercallback">kd_mapi_adec_unregistercallback</a>：解注册解码回调函数。</li>
<li><a href="#277-kd_mapi_adec_bind_ao">kd_mapi_adec_bind_ao</a>：绑定 ao。</li>
<li><a href="#278-kd_mapi_adec_unbind_ao">kd_mapi_adec_unbind_ao</a>：解绑定 ao。</li>
<li><a href="#279-kd_mapi_register_ext_audio_decoder">kd_mapi_register_ext_audio_decoder</a>：注册外部音频解码器。</li>
<li><a href="#2710-kd_mapi_unregister_ext_audio_decoder">kd_mapi_unregister_ext_audio_decoder</a>：解注册外部音频解码器。</li>
<li><a href="#2711-kd_mapi_adec_send_stream">kd_mapi_adec_send_stream</a>：发送音频解码音频帧。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="271-kd_mapi_adec_init">2.7.1 kd_mapi_adec_init<a href="#271-kd_mapi_adec_init" class="hash-link" aria-label="Direct link to 2.7.1 kd_mapi_adec_init" title="Direct link to 2.7.1 kd_mapi_adec_init">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>初始化解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_adec_init(<a href="#331-k_handle">k_handle</a> adec_hdl,const <a href="#323-k_aenc_chn_attr">k_adec_chn_attr</a> *attr);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="272-kd_mapi_adec_deinit">2.7.2 kd_mapi_adec_deinit<a href="#272-kd_mapi_adec_deinit" class="hash-link" aria-label="Direct link to 2.7.2 kd_mapi_adec_deinit" title="Direct link to 2.7.2 kd_mapi_adec_deinit">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>去初始化解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_adec_deinit(<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="273-kd_mapi_adec_start">2.7.3 kd_mapi_adec_start<a href="#273-kd_mapi_adec_start" class="hash-link" aria-label="Direct link to 2.7.3 kd_mapi_adec_start" title="Direct link to 2.7.3 kd_mapi_adec_start">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>启动解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_adec_start(<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="274-kd_mapi_adec_stop">2.7.4 kd_mapi_adec_stop<a href="#274-kd_mapi_adec_stop" class="hash-link" aria-label="Direct link to 2.7.4 kd_mapi_adec_stop" title="Direct link to 2.7.4 kd_mapi_adec_stop">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>停止解码通道。</p>
<ul>
<li>【语法】</li>
</ul>
<p>kd_mapi_adec_stop(<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="275-kd_mapi_adec_registercallback">2.7.5 kd_mapi_adec_registercallback<a href="#275-kd_mapi_adec_registercallback" class="hash-link" aria-label="Direct link to 2.7.5 kd_mapi_adec_registercallback" title="Direct link to 2.7.5 kd_mapi_adec_registercallback">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册解码回调函数。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_adec_registercallback(<a href="#331-k_handle">k_handle</a> adec_hdl,k_adec_callback_s *adec_cb);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="276-kd_mapi_adec_unregistercallback">2.7.6 kd_mapi_adec_unregistercallback<a href="#276-kd_mapi_adec_unregistercallback" class="hash-link" aria-label="Direct link to 2.7.6 kd_mapi_adec_unregistercallback" title="Direct link to 2.7.6 kd_mapi_adec_unregistercallback">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册解码回调函数。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_adec_unregistercallback(<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="277-kd_mapi_adec_bind_ao">2.7.7 kd_mapi_adec_bind_ao<a href="#277-kd_mapi_adec_bind_ao" class="hash-link" aria-label="Direct link to 2.7.7 kd_mapi_adec_bind_ao" title="Direct link to 2.7.7 kd_mapi_adec_bind_ao">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>绑定ao.</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_adec_bind_ao(<a href="#331-k_handle">k_handle</a> ao_hdl,<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="278-kd_mapi_adec_unbind_ao">2.7.8 kd_mapi_adec_unbind_ao<a href="#278-kd_mapi_adec_unbind_ao" class="hash-link" aria-label="Direct link to 2.7.8 kd_mapi_adec_unbind_ao" title="Direct link to 2.7.8 kd_mapi_adec_unbind_ao">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>解绑定ao。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_adec_unbind_ao(<a href="#331-k_handle">k_handle</a> ao_hdl,<a href="#331-k_handle">k_handle</a> adec_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="279-kd_mapi_register_ext_audio_decoder">2.7.9 kd_mapi_register_ext_audio_decoder<a href="#279-kd_mapi_register_ext_audio_decoder" class="hash-link" aria-label="Direct link to 2.7.9 kd_mapi_register_ext_audio_decoder" title="Direct link to 2.7.9 kd_mapi_register_ext_audio_decoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>注册外置解码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_register_ext_audio_decoder(const <a href="#329-k_adec_decoder">k_adec_decoder</a> *decoder,<a href="#331-k_handle">k_handle</a> * adecoder_hdl)；</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2710-kd_mapi_unregister_ext_audio_decoder">2.7.10 kd_mapi_unregister_ext_audio_decoder<a href="#2710-kd_mapi_unregister_ext_audio_decoder" class="hash-link" aria-label="Direct link to 2.7.10 kd_mapi_unregister_ext_audio_decoder" title="Direct link to 2.7.10 kd_mapi_unregister_ext_audio_decoder">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>解注册外部音频解码器。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_unregister_ext_audio_decoder( <a href="#331-k_handle">k_handle</a> adecoder_hdl);</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2711-kd_mapi_adec_send_stream">2.7.11 kd_mapi_adec_send_stream<a href="#2711-kd_mapi_adec_send_stream" class="hash-link" aria-label="Direct link to 2.7.11 kd_mapi_adec_send_stream" title="Direct link to 2.7.11 kd_mapi_adec_send_stream">​</a></h4>
<ul>
<li>【描述】</li>
</ul>
<p>发送音频解码音频帧。</p>
<ul>
<li>【语法】</li>
</ul>
<p>k_s32 kd_mapi_adec_send_stream(<a href="#331-k_handle">k_handle</a> ai_hdl,const <a href="#327-k_audio_stream">k_audio_stream</a> *stream)；</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-数据类型">3. 数据类型<a href="#3-数据类型" class="hash-link" aria-label="Direct link to 3. 数据类型" title="Direct link to 3. 数据类型">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-音频输入输出">3.1 音频输入输出<a href="#31-音频输入输出" class="hash-link" aria-label="Direct link to 3.1 音频输入输出" title="Direct link to 3.1 音频输入输出">​</a></h3>
<p>音频输入输出相关数据类型、数据结构定义如下：</p>
<ul>
<li><a href="#311-k_audio_type">k_audio_type</a>:定义音频输入输出类型。</li>
<li><a href="#312-k_audio_dev">k_audio_dev</a>：定义音频设备。</li>
<li><a href="#313-k_ai_chn">k_ai_chn</a>：定义ai通道。</li>
<li><a href="#314-k_ao_chn">k_ao_chn</a>：定义ao通道。</li>
<li><a href="#315-k_max_audio_frame_num">K_MAX_AUDIO_FRAME_NUM</a>：定义最大音频解码缓存帧数。</li>
<li><a href="#316-k_audio_bit_width">k_audio_bit_width</a>：定义音频采样精度。</li>
<li><a href="#317-k_audio_snd_mode">k_audio_snd_mode</a>：定义音频声道模式。</li>
<li><a href="#318-k_audio_pdm_oversample">k_audio_pdm_oversample</a>:定义pdm过采样。</li>
<li><a href="#3112-k_aio_dev_attr">k_aio_dev_attr</a>:定义音频输入输出设备属性结构体。</li>
<li><a href="#319-k_audio_pdm_attr">k_audio_pdm_attr</a>:定义pdm音频输入属性。</li>
<li><a href="#3111-k_i2s_work_mode">k_i2s_work_mode</a>:定义i2s工作模式。</li>
<li><a href="#3110-k_audio_i2s_attr">k_audio_i2s_attr</a>:定义i2s音频输入属性。</li>
<li><a href="#3113-k_aio_i2s_type">k_aio_i2s_type</a>:定义i2s对接设备类型。</li>
<li><a href="#3114-k_audio_frame">k_audio_frame</a>:定义音频帧结构体。</li>
<li><a href="#3115-k_audio_anr_cfg">k_audio_anr_cfg</a>：定义音频语音降噪功能配置信息结构体。</li>
<li><a href="#3116-k_audio_agc_cfg">k_audio_agc_cfg</a>：定义音频自动增益功能配置信息结构体。</li>
<li><a href="#3117-k_ai_vqe_cfg">k_ai_vqe_cfg</a>：定义音频输入声音质量增强配置信息结构体。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-k_audio_type">3.1.1 k_audio_type<a href="#311-k_audio_type" class="hash-link" aria-label="Direct link to 3.1.1 k_audio_type" title="Direct link to 3.1.1 k_audio_type">​</a></h4>
<p>【说明】</p>
<p>定义音频输入输出类型。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_INPUT_TYPE_I2S </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//i2s in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_INPUT_TYPE_PDM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//pdm in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_OUTPUT_TYPE_I2S </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//i2s out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_type</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【注意事项】</p>
<p>音频输入包括i2s和pdm两种，音频输出只有i2s。</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-k_audio_dev">3.1.2 k_audio_dev<a href="#312-k_audio_dev" class="hash-link" aria-label="Direct link to 3.1.2 k_audio_dev" title="Direct link to 3.1.2 k_audio_dev">​</a></h4>
<p>【说明】</p>
<p>定义音频设备。</p>
<p>【定义】</p>
<p><strong>typedef k_u32 k_audio_dev;</strong></p>
<p>【注意事项】</p>
<p>ai模块，k_audio_dev取值为0和1，其中0为i2s音频输入，1为pdm音频输入。</p>
<p>ao模块，k_audio_dev取值固定为0，即i2s音频输出。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="313-k_ai_chn">3.1.3 k_ai_chn<a href="#313-k_ai_chn" class="hash-link" aria-label="Direct link to 3.1.3 k_ai_chn" title="Direct link to 3.1.3 k_ai_chn">​</a></h4>
<p>【说明】</p>
<p>定义ai音频通道。</p>
<p>【定义】</p>
<p><strong>typedef k_u32 k_ai_chn;</strong></p>
<p>【注意事项】</p>
<p>I2s音频输入，共有2组，取值范围为<code>[0,1]</code>。</p>
<p>pdm音频输入，共有4组，取值范围为<code>[0,3]</code>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="314-k_ao_chn">3.1.4 k_ao_chn<a href="#314-k_ao_chn" class="hash-link" aria-label="Direct link to 3.1.4 k_ao_chn" title="Direct link to 3.1.4 k_ao_chn">​</a></h4>
<p>【说明】</p>
<p>定义ao音频通道。</p>
<p>【定义】</p>
<p><strong>typedef k_u32 k_ao_chn;</strong></p>
<p>【注意事项】</p>
<p>I2s音频输出，共有2组，取值范围为<code>[0,1]</code>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="315-k_max_audio_frame_num">3.1.5 K_MAX_AUDIO_FRAME_NUM<a href="#315-k_max_audio_frame_num" class="hash-link" aria-label="Direct link to 3.1.5 K_MAX_AUDIO_FRAME_NUM" title="Direct link to 3.1.5 K_MAX_AUDIO_FRAME_NUM">​</a></h4>
<p>【说明】</p>
<p>定义最大音频解码缓存帧数。</p>
<p>【定义】</p>
<p>#define K_MAX_AUDIO_FRAME_NUM 50</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="316-k_audio_bit_width">3.1.6 k_audio_bit_width<a href="#316-k_audio_bit_width" class="hash-link" aria-label="Direct link to 3.1.6 k_audio_bit_width" title="Direct link to 3.1.6 k_audio_bit_width">​</a></h4>
<p>【说明】</p>
<ul>
<li>定义音频采样精度。</li>
</ul>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_BIT_WIDTH_16 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* 16bit width */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_BIT_WIDTH_24 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* 24bit width */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_BIT_WIDTH_32 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* 32bit width */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_bit_width</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="317-k_audio_snd_mode">3.1.7 k_audio_snd_mode<a href="#317-k_audio_snd_mode" class="hash-link" aria-label="Direct link to 3.1.7 k_audio_snd_mode" title="Direct link to 3.1.7 k_audio_snd_mode">​</a></h4>
<p>【说明】</p>
<ul>
<li>定义声道模式。</li>
</ul>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_SOUND_MODE_MONO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* mono */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_SOUND_MODE_STEREO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* stereo */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_snd_mode</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="318-k_audio_pdm_oversample">3.1.8 k_audio_pdm_oversample<a href="#318-k_audio_pdm_oversample" class="hash-link" aria-label="Direct link to 3.1.8 k_audio_pdm_oversample" title="Direct link to 3.1.8 k_audio_pdm_oversample">​</a></h4>
<p>【说明】</p>
<p>定义pdm 过采样。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_PDM_INPUT_OVERSAMPLE_32 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_PDM_INPUT_OVERSAMPLE_64 </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">KD_AUDIO_PDM_INPUT_OVERSAMPLE_128 </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_pdm_oversample</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="319-k_audio_pdm_attr">3.1.9 k_audio_pdm_attr<a href="#319-k_audio_pdm_attr" class="hash-link" aria-label="Direct link to 3.1.9 k_audio_pdm_attr" title="Direct link to 3.1.9 k_audio_pdm_attr">​</a></h4>
<p>【说明】</p>
<p>定义pdm音频输入属性。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 chn_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* channle number on FS,i2s valid value:1/2,pdm valid value:1/2/3/4*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_sample_rate rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_bit_width width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_snd_mode mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_pdm_oversample oversample</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 frame_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* frame num in buf[2,K_MAX_AUDIO_FRAME_NUM] */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 point_num_per_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_pdm_attr</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>chn_cnt</td><td>支持的通道数目。  支持1-4个通道，通道使能需要连续。</td></tr><tr><td>sample_rate</td><td>采样率:支持8k~192k</td></tr><tr><td>bit_width</td><td>采样精度：支持16/24/32</td></tr><tr><td>snd_mode</td><td>音频声道模式。支持单声道和双声道。</td></tr><tr><td>pdm_oversample</td><td>过采样：支持32、64、128倍过采样。</td></tr><tr><td>frame_num</td><td>缓存帧数目<code>[2,K_MAX_AUDIO_FRAME_NUM]</code>。</td></tr><tr><td>point_num_per_frame</td><td>每帧的采样点个数。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3110-k_audio_i2s_attr">3.1.10 k_audio_i2s_attr<a href="#3110-k_audio_i2s_attr" class="hash-link" aria-label="Direct link to 3.1.10 k_audio_i2s_attr" title="Direct link to 3.1.10 k_audio_i2s_attr">​</a></h4>
<p>【说明】</p>
<p>定义i2s音频输入属性。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 chn_cnt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* channle number on FS,i2s valid value:1/2,pdm valid value:1/2/3/4 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 sample_rate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* sample rate 8k ~192k */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_bit_width bit_width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_snd_mode snd_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* momo or stereo */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_i2s_work_mode   i2s_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/*i2s work mode*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 frame_num</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* frame num in buf[2,K_MAX_AUDIO_FRAME_NUM] */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 point_num_per_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_aio_i2s_type type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_i2s_attr</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>chn_cnt</td><td>支持的通道数目。  支持1-2个通道。</td></tr><tr><td>sample_rate</td><td>采样率:支持8k~192k</td></tr><tr><td>bit_width</td><td>采样精度：支持16/24/32</td></tr><tr><td>snd_mode</td><td>音频声道模式。支持单声道和双声道。</td></tr><tr><td>I2s_mode</td><td>I2s工作模式:支持飞利浦模式，左对齐模式，右对齐模式。</td></tr><tr><td>frame_num</td><td>缓存帧数目<code>[2,K_MAX_AUDIO_FRAME_NUM]</code>。</td></tr><tr><td>point_num_per_frame</td><td>每帧的采样点个数<code>[sample_rate/100,sample_rate]</code>。</td></tr><tr><td>i2s_type</td><td>i2s对接设备类型:内置codec或外接设备。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>每帧的采样点个数point_num_per_frame和采样率sample_rate的取值决定了硬件产生</p>
<p>中断的频率，频率过高会影响系统的性能，跟其他业务也 会相互影响，建议这两个参</p>
<p>数的取值满足算式：(point_num_per_frame *1000)/ sample_rate &gt;=10(中断100次)，比如在采样</p>
<p>率为16000Hz时，建议设置采样点个数大于或者等于160。</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3111-k_i2s_work_mode">3.1.11 k_i2s_work_mode<a href="#3111-k_i2s_work_mode" class="hash-link" aria-label="Direct link to 3.1.11 k_i2s_work_mode" title="Direct link to 3.1.11 k_i2s_work_mode">​</a></h4>
<p>【说明】</p>
<p>定义i2s工作模式。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_STANDARD_MODE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_RIGHT_JUSTIFYING_MODE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_LEFT_JUSTIFYING_MODE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_i2s_work_mode</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3112-k_aio_dev_attr">3.1.12 k_aio_dev_attr<a href="#3112-k_aio_dev_attr" class="hash-link" aria-label="Direct link to 3.1.12 k_aio_dev_attr" title="Direct link to 3.1.12 k_aio_dev_attr">​</a></h4>
<p>【说明】</p>
<p>定义音频输入输出设备属性结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_type type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">union</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_pdm_attr pdm_attr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_i2s_attr i2s_attr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> kd_audio_attr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_aio_dev_attr</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>audio_type</td><td>音频类型。</td></tr><tr><td>kd_audio_attr</td><td>音频属性设置</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3113-k_aio_i2s_type">3.1.13 k_aio_i2s_type<a href="#3113-k_aio_i2s_type" class="hash-link" aria-label="Direct link to 3.1.13 k_aio_i2s_type" title="Direct link to 3.1.13 k_aio_i2s_type">​</a></h4>
<p>【说明】</p>
<p>定义i2s对接设备类型。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_AIO_I2STYPE_INNERCODEC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* AIO I2S connect inner audio CODEC */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_AIO_I2STYPE_EXTERN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">/* AIO I2S connect extern hardware */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_aio_i2s_type</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【注意事项】</p>
<p>内置audio codec固定使用第0组i2s 通路，第1组i2s通路仍使用外部codec。</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3114-k_audio_frame">3.1.14 k_audio_frame<a href="#3114-k_audio_frame" class="hash-link" aria-label="Direct link to 3.1.14 k_audio_frame" title="Direct link to 3.1.14 k_audio_frame">​</a></h4>
<p>【说明】</p>
<p>定义音频帧结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_bit_width bit_width</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_snd_mode snd_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> virt_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u64 phys_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u64 time_stamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* audio frame time stamp */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 seq</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* audio frame seq */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 len</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* data lenth per channel in frame */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 pool_id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_frame</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>bit_width</td><td>采样精度。</td></tr><tr><td>snd_mode</td><td>音频声道模式。</td></tr><tr><td>virt_addr</td><td>音频帧数据虚拟地址。</td></tr><tr><td>phys_addr</td><td>音频帧数据物理地址。</td></tr><tr><td>time_stamp</td><td>音频帧时间戳，以μs为单位。</td></tr><tr><td>seq</td><td>音频帧序号。</td></tr><tr><td>len</td><td>音频帧长度，以byte为单位。</td></tr><tr><td>pool_id</td><td>音频帧缓存池ID。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3115-k_audio_anr_cfg">3.1.15 k_audio_anr_cfg<a href="#3115-k_audio_anr_cfg" class="hash-link" aria-label="Direct link to 3.1.15 k_audio_anr_cfg" title="Direct link to 3.1.15 k_audio_anr_cfg">​</a></h4>
<p>【说明】</p>
<p>定义音频语音降噪功能配置信息结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_bool anr_switch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_anr_cfg</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>anr_switch</td><td>音频语音降噪功能使能。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3116-k_audio_agc_cfg">3.1.16 k_audio_agc_cfg<a href="#3116-k_audio_agc_cfg" class="hash-link" aria-label="Direct link to 3.1.16 k_audio_agc_cfg" title="Direct link to 3.1.16 k_audio_agc_cfg">​</a></h4>
<p>【说明】</p>
<p>定义音频自动增益功能配置信息结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_bool agc_switch</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_agc_cfg</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>agc_switch</td><td>音频自动增益功能使能。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3117-k_ai_vqe_cfg">3.1.17 k_ai_vqe_cfg<a href="#3117-k_ai_vqe_cfg" class="hash-link" aria-label="Direct link to 3.1.17 k_ai_vqe_cfg" title="Direct link to 3.1.17 k_ai_vqe_cfg">​</a></h4>
<p>【说明】</p>
<p>定义音频输入声音质量增强配置信息结构体。</p>
<p>【定义】</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">typedef struct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_anr_cfg anr_cfg;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_audio_agc_cfg agc_cfg;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} k_ai_vqe_cfg;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>anr_cfg</td><td>音频语音降噪功能配置参数。</td></tr><tr><td>agc_cfg</td><td>音频自动增益控制配置参数。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-音频编解码">3.2 音频编解码<a href="#32-音频编解码" class="hash-link" aria-label="Direct link to 3.2 音频编解码" title="Direct link to 3.2 音频编解码">​</a></h3>
<p>音频编解码相关数据类型、数据结构定义如下：</p>
<p><a href="#321-k_payload_type">k_payload_type</a></p>
<p><a href="#322-k_aenc_encoder">k_aenc_encoder</a></p>
<p><a href="#323-k_aenc_chn_attr">k_aenc_chn_attr</a></p>
<p><a href="#324-aenc_max_chn_nums">AENC_MAX_CHN_NUMS</a></p>
<p><a href="#325-k_max_encoder_name_len">K_MAX_ENCODER_NAME_LEN</a></p>
<p><a href="#326-k_aenc_chn">k_aenc_chn</a></p>
<p><a href="#327-k_audio_stream">k_audio_stream</a></p>
<p><a href="#328-k_adec_chn_attr">k_adec_chn_attr</a></p>
<p><a href="#329-k_adec_decoder">k_adec_decoder</a></p>
<p><a href="#3210-k_max_decoder_name_len">K_MAX_DECODER_NAME_LEN</a></p>
<p><a href="#3211-adec_max_chn_nums">ADEC_MAX_CHN_NUMS</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-k_payload_type">3.2.1 k_payload_type<a href="#321-k_payload_type" class="hash-link" aria-label="Direct link to 3.2.1 k_payload_type" title="Direct link to 3.2.1 k_payload_type">​</a></h4>
<p>【说明】</p>
<p>定义音视频净荷类型枚举。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PCMU </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_1016 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G721 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_GSM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G723 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_DVI4_8K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_DVI4_16K </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_LPC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PCMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G722 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_S16BE_STEREO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_S16BE_MONO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">11</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_QCELP </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_CN </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">13</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MPEGAUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G728 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_DVI4_3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_DVI4_4 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G729 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G711A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">19</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G711U </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G726 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_G729A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">22</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_LPCM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">23</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_CelB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_JPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">26</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_CUSM </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_NV </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PICW </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">29</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_CPV </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_H261 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MPEGVIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MPEG2TS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_H263 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_SPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MPEG2VIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">36</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_AAC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">37</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_WMA9STD </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">38</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_HEAAC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">39</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PCM_VOICE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PCM_AUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">41</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MP3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">43</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_ADPCMA </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">49</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_AEC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_X_LD </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">95</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_H264 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">96</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_GSM_HR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_GSM_EFR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_L8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">202</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_RED </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">203</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_VDVI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">204</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_BT656 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">220</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_H263_1998 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">221</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_MP1S </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">222</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_MP2P </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">223</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_BMPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">224</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MP4VIDEO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">230</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MP4AUDIO </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">237</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_VC1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">238</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_JVC_ASF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_D_AVI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_DIVX3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">257</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_AVS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">258</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_REAL8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">259</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_REAL9 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">260</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_VP6 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">261</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_VP6F </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">262</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_VP6A </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">263</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_SORENSON </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">264</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_H265 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">265</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_VP8 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">266</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MVC </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">267</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PNG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">268</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_AMR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_MJPEG </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1002</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_AMRWB </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1003</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_PRORES </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1006</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_OPUS </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1007</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">K_PT_BUTT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_payload_type</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-k_aenc_encoder">3.2.2 k_aenc_encoder<a href="#322-k_aenc_encoder" class="hash-link" aria-label="Direct link to 3.2.2 k_aenc_encoder" title="Direct link to 3.2.2 k_aenc_encoder">​</a></h4>
<p>【说明】</p>
<p>定义编码器属性结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_payload_type k_u32 max_frame_len</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_char name</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">K_MAX_ENCODER_NAME_LEN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">func_open_encoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> encoder_attr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">encoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">func_enc_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">encoder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> k_audio_frame </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">k_u8 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">outbuf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_u32 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">out_len</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">func_close_encoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">encoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_aenc_encoder</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>编码协议类型。</td></tr><tr><td>max_frame_len</td><td>最大码流长度。</td></tr><tr><td>name</td><td>编码器名称。</td></tr><tr><td>func_open_encoder</td><td>打开编码器的函数指针。</td></tr><tr><td>func_enc_frame</td><td>进行编码的函数指针。</td></tr><tr><td>func_close_encoder</td><td>关闭编码器的函数指针。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-k_aenc_chn_attr">3.2.3 k_aenc_chn_attr<a href="#323-k_aenc_chn_attr" class="hash-link" aria-label="Direct link to 3.2.3 k_aenc_chn_attr" title="Direct link to 3.2.3 k_aenc_chn_attr">​</a></h4>
<p>【说明】</p>
<p>定义编码器通道属性结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_payload_type type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 point_num_per_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 buf_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// buf size[2,K_MAX_AUDIO_FRAME_NUM]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_aenc_chn_attr</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>音频编码协议类型。</td></tr><tr><td>point_num_per_frame</td><td>音频编码协议对应的帧长（编码时收到的音频帧长小于等  于该帧长都可以进行编码）。</td></tr><tr><td>buf_size</td><td>音频编码缓存大小。  取值范围：<code>[2, K_MAX_AUDIO_FRAME_NUM]</code>，以帧为  单位。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="324-aenc_max_chn_nums">3.2.4 AENC_MAX_CHN_NUMS<a href="#324-aenc_max_chn_nums" class="hash-link" aria-label="Direct link to 3.2.4 AENC_MAX_CHN_NUMS" title="Direct link to 3.2.4 AENC_MAX_CHN_NUMS">​</a></h4>
<p>【说明】</p>
<p>定义最大编码通道数。</p>
<p>【定义】</p>
<p>#define AENC_MAX_CHN_NUMS 4</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="325-k_max_encoder_name_len">3.2.5 K_MAX_ENCODER_NAME_LEN<a href="#325-k_max_encoder_name_len" class="hash-link" aria-label="Direct link to 3.2.5 K_MAX_ENCODER_NAME_LEN" title="Direct link to 3.2.5 K_MAX_ENCODER_NAME_LEN">​</a></h4>
<p>【说明】</p>
<p>定义音频编码器名称最大长度。</p>
<p>【定义】</p>
<p>#define K_MAX_ENCODER_NAME_LEN 25</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="326-k_aenc_chn">3.2.6 k_aenc_chn<a href="#326-k_aenc_chn" class="hash-link" aria-label="Direct link to 3.2.6 k_aenc_chn" title="Direct link to 3.2.6 k_aenc_chn">​</a></h4>
<p>【说明】</p>
<p>定义编码通道类型。</p>
<p>【定义】</p>
<p>typedef k_u32 k_aenc_chn;</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="327-k_audio_stream">3.2.7 k_audio_stream<a href="#327-k_audio_stream" class="hash-link" aria-label="Direct link to 3.2.7 k_audio_stream" title="Direct link to 3.2.7 k_audio_stream">​</a></h4>
<p>【说明】</p>
<p>定义码流结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">stream</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* the virtual address of stream */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u64 phys_addr</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* the physics address of stream */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 len</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* stream lenth, by bytes */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u64 time_stamp</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* frame time stamp */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 seq</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* frame seq, if stream is not a valid frame,seq is 0 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_audio_stream</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>stream</td><td>音频码流数据指针</td></tr><tr><td>phys_addr</td><td>音频码流的物理地址。</td></tr><tr><td>len</td><td>音频码流长度。以byte为单位。</td></tr><tr><td>time_stamp</td><td>音频码流时间戳。</td></tr><tr><td>seq</td><td>音频码流序号。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="328-k_adec_chn_attr">3.2.8 k_adec_chn_attr<a href="#328-k_adec_chn_attr" class="hash-link" aria-label="Direct link to 3.2.8 k_adec_chn_attr" title="Direct link to 3.2.8 k_adec_chn_attr">​</a></h4>
<p>【说明】</p>
<p>定义解码器通道属性结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_payload_type payload_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 point_num_per_frame</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_u32 buf_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* buf size[2~K_MAX_AUDIO_FRAME_NUM] */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_adec_chn_attr</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>音频解码协议类型。</td></tr><tr><td>point_num_per_frame</td><td>音频解码协议对应的帧长</td></tr><tr><td>buf_size</td><td>音频编码缓存大小。  取值范围：<code>[2, K_MAX_AUDIO_FRAME_NUM]</code>，以帧为  单位。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>音频解码的部分属性需要与输出设备属性相匹配，例如采样率、帧长（每帧采样</p>
<p>点数目）等。</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="329-k_adec_decoder">3.2.9 k_adec_decoder<a href="#329-k_adec_decoder" class="hash-link" aria-label="Direct link to 3.2.9 k_adec_decoder" title="Direct link to 3.2.9 k_adec_decoder">​</a></h4>
<p>【说明】</p>
<p>定义解码器属性结构体。</p>
<p>【定义】</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_payload_type payload_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">k_char name</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">K_MAX_DECODER_NAME_LEN</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">func_open_decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder_attr</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">func_dec_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_u8 </span><span class="token operator" style="color:#393A34">*</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">inbuf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_s32 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">left_byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_u16</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">outbuf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_u32 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">out_len</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k_u32 </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">chns</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">func_get_frame_info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">func_close_decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">k_s32</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">func_reset_decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">decoder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> k_adec_decoder</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>【成员】</p>
<table><thead><tr><th>成员名称</th><th>描述</th></tr></thead><tbody><tr><td>type</td><td>解码协议类型。</td></tr><tr><td>name</td><td>解码器名称。</td></tr><tr><td>func_open_decoder</td><td>打开解码器的函数指针。</td></tr><tr><td>func_get_frame_info</td><td>获取音频帧信息的函数指针。</td></tr><tr><td>func_close_decoder</td><td>关闭解码器的函数指针。</td></tr><tr><td>func_reset_decoder</td><td>清空缓存buffer，复位解码器的函数指针。</td></tr></tbody></table>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3210-k_max_decoder_name_len">3.2.10 K_MAX_DECODER_NAME_LEN<a href="#3210-k_max_decoder_name_len" class="hash-link" aria-label="Direct link to 3.2.10 K_MAX_DECODER_NAME_LEN" title="Direct link to 3.2.10 K_MAX_DECODER_NAME_LEN">​</a></h4>
<p>【说明】</p>
<p>定义音频解码器名称最大长度。</p>
<p>【定义】</p>
<p>#define K_MAX_DECODER_NAME_LEN 25</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3211-adec_max_chn_nums">3.2.11 ADEC_MAX_CHN_NUMS<a href="#3211-adec_max_chn_nums" class="hash-link" aria-label="Direct link to 3.2.11 ADEC_MAX_CHN_NUMS" title="Direct link to 3.2.11 ADEC_MAX_CHN_NUMS">​</a></h4>
<p>【说明】</p>
<p>定义最大解码通道数。</p>
<p>【定义】</p>
<p>#define ADEC_MAX_CHN_NUMS 4</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3212-k_adec_chn">3.2.12 k_adec_chn<a href="#3212-k_adec_chn" class="hash-link" aria-label="Direct link to 3.2.12 k_adec_chn" title="Direct link to 3.2.12 k_adec_chn">​</a></h4>
<p>【说明】</p>
<p>定义解码通道类型。</p>
<p>【定义】</p>
<p>typedef k_u32 k_adec_chn;</p>
<p>【注意事项】</p>
<p>无</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-mapi">3.3 MAPI<a href="#33-mapi" class="hash-link" aria-label="Direct link to 3.3 MAPI" title="Direct link to 3.3 MAPI">​</a></h3>
<p>音频mapi相关数据类型、数据结构定义如下</p>
<p><a href="#331-k_handle">k_handle</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-k_handle">3.3.1 k_handle<a href="#331-k_handle" class="hash-link" aria-label="Direct link to 3.3.1 k_handle" title="Direct link to 3.3.1 k_handle">​</a></h4>
<p>【说明】</p>
<p>定义操作句柄。</p>
<p>【定义】</p>
<p>typedef k_u32 k_handle;</p>
<p>【相关数据类型及接口】</p>
<p>无</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-错误码">4. 错误码<a href="#4-错误码" class="hash-link" aria-label="Direct link to 4. 错误码" title="Direct link to 4. 错误码">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-音频输入api-错误码">4.1 音频输入API 错误码<a href="#41-音频输入api-错误码" class="hash-link" aria-label="Direct link to 4.1 音频输入API 错误码" title="Direct link to 4.1 音频输入API 错误码">​</a></h3>
<table><thead><tr><th>错误代码</th><th>宏定义</th><th>描述</th></tr></thead><tbody><tr><td>0xA0158001</td><td>K_ERR_AI_INVALID_DEVID</td><td>音频输入设备号无效</td></tr><tr><td>0xA0158002</td><td>K_ERR_AI_INVALID_CHNID</td><td>音频输入通道号无效</td></tr><tr><td>0xA0158003</td><td>K_ERR_AI_ILLEGAL_PARAM</td><td>音频输入参数设置无效</td></tr><tr><td>0xA0158004</td><td>K_ERR_AI_NOT_ENABLED</td><td>音频输入设备或通道没有使 能</td></tr><tr><td>0xA0158005</td><td>K_ERR_AI_NULL_PTR</td><td>输入参数空指针错误</td></tr><tr><td>0xA0158006</td><td>K_ERR_AI_NOT_CFG</td><td>音频输入设备属性未设置</td></tr><tr><td>0xA0158007</td><td>K_ERR_AI_NOT_SUPPORT</td><td>操作不支持</td></tr><tr><td>0xA0158008</td><td>K_ERR_AI_NOT_PERM</td><td>操作不允许</td></tr><tr><td>0xA0158009</td><td>K_ERR_AI_NO_MEM</td><td>分配内存失败</td></tr><tr><td>0xA015800A</td><td>K_ERR_AI_NO_BUF</td><td>音频输入缓存不足</td></tr><tr><td>0xA015800B</td><td>K_ERR_AI_BUF_EMPTY</td><td>音频输入缓存为空</td></tr><tr><td>0xA015800C</td><td>K_ERR_AI_BUF_FULL</td><td>音频输入缓存为满</td></tr><tr><td>0xA015800D</td><td>K_ERR_AI_NOT_READY</td><td>音频输入系统未初始化</td></tr><tr><td>0xA015800E</td><td>K_ERR_AI_BUSY</td><td>音频输入系统忙</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-音频输出api-错误码">4.2 音频输出API 错误码<a href="#42-音频输出api-错误码" class="hash-link" aria-label="Direct link to 4.2 音频输出API 错误码" title="Direct link to 4.2 音频输出API 错误码">​</a></h3>
<table><thead><tr><th>错误代码</th><th>宏定义</th><th>描述</th></tr></thead><tbody><tr><td>0xA0159001</td><td>K_ERR_AO_INVALID_DEV_ID</td><td>音频输出设备号无效</td></tr><tr><td>0xA0159002</td><td>K_ERR_AO_INVALID_CHN_ID</td><td>音频输出通道号无效</td></tr><tr><td>0xA0159003</td><td>K_ERR_AO_ILLEGAL_PARAM</td><td>音频输  出参数设置无效</td></tr><tr><td>0xA0159004</td><td>K_ERR_AO_NOT_ENABLED</td><td>音频输出设备或通道没使能</td></tr><tr><td>0xA0159005</td><td>K_ERR_AO_NULL_PTR</td><td>输出空指针错误</td></tr><tr><td>0xA0159006</td><td>K_ERR_AO_NOT_CFG</td><td>音频输出设备属性未设置</td></tr><tr><td>0xA0159007</td><td>K_ERR_AO_NOT_SUPPORT</td><td>操作不被支持</td></tr><tr><td>0xA0159008</td><td>K_ERR_AO_NOT_PERM</td><td>操作不允许</td></tr><tr><td>0xA0159009</td><td>K_ERR_AO_NO_MEM</td><td>系统内存不足</td></tr><tr><td>0xA015900A</td><td>K_ERR_AO_NO_BUF</td><td>音频输出缓存不足</td></tr><tr><td>0xA015900B</td><td>K_ERR_AO_BUF_EMPTY</td><td>音频输出缓存为空</td></tr><tr><td>0xA015900C</td><td>K_ERR_AO_BUF_FULL</td><td>音频输出缓存为满</td></tr><tr><td>0xA015900D</td><td>K_ERR_AO_NOT_READY</td><td>音频输出系统未初始化</td></tr><tr><td>0xA015900E</td><td>K_ERR_AO_BUSY</td><td>音频输出系统忙</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part7/14_K230AudioAPIreference.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CanaanK230/part7/K230VideooutputAPIreference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">K230视频输出API参考</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/CanaanK230/part7/K230DRMUserGuide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">K230 DRM使用指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-概述" class="table-of-contents__link toc-highlight">1. 概述</a><ul><li><a href="#11-概述" class="table-of-contents__link toc-highlight">1.1 概述</a></li><li><a href="#12-功能描述" class="table-of-contents__link toc-highlight">1.2 功能描述</a></li></ul></li><li><a href="#2-api-参考" class="table-of-contents__link toc-highlight">2. API 参考</a><ul><li><a href="#21-音频输入" class="table-of-contents__link toc-highlight">2.1 音频输入</a></li><li><a href="#22-音频输出" class="table-of-contents__link toc-highlight">2.2 音频输出</a></li><li><a href="#23-音频编码" class="table-of-contents__link toc-highlight">2.3 音频编码</a></li><li><a href="#24-音频解码" class="table-of-contents__link toc-highlight">2.4 音频解码</a></li><li><a href="#25-内置audio-codec" class="table-of-contents__link toc-highlight">2.5 内置Audio Codec</a></li><li><a href="#26-音频编码mapi" class="table-of-contents__link toc-highlight">2.6 音频编码MAPI</a></li><li><a href="#27-音频解码mapi" class="table-of-contents__link toc-highlight">2.7 音频解码MAPI</a></li></ul></li><li><a href="#3-数据类型" class="table-of-contents__link toc-highlight">3. 数据类型</a><ul><li><a href="#31-音频输入输出" class="table-of-contents__link toc-highlight">3.1 音频输入输出</a></li><li><a href="#32-音频编解码" class="table-of-contents__link toc-highlight">3.2 音频编解码</a></li><li><a href="#33-mapi" class="table-of-contents__link toc-highlight">3.3 MAPI</a></li></ul></li><li><a href="#4-错误码" class="table-of-contents__link toc-highlight">4. 错误码</a><ul><li><a href="#41-  音频输入api-错误码" class="table-of-contents__link toc-highlight">4.1 音频输入API 错误码</a></li><li><a href="#42-音频输出api-错误码" class="table-of-contents__link toc-highlight">4.2 音频输出API 错误码</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>