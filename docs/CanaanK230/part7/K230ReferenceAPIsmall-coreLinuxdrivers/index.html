<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">K230小核Linux驱动API参考 | 正点原子</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://tm330075395.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://tm330075395.github.io/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="K230小核Linux驱动API参考 | 正点原子"><meta data-rh="true" name="description" content="1 概述"><meta data-rh="true" property="og:description" content="1 概述"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers" hreflang="en"><link data-rh="true" rel="alternate" href="https://tm330075395.github.io/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="正点原子 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="正点原子 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ce37c9a8.css">
<script src="/assets/js/runtime~main.fcaa3de9.js" defer="defer"></script>
<script src="/assets/js/main.252b8acf.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a class="navbar__item navbar__link" href="/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/CanaanK230/Userdoc">CanMV-K230教程</a><a href="http://www.alientek.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">正点原子官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="http://www.openedv.com/forum.php" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">论坛<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/tm330075395/tm330075395.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/CanaanK230/Userdoc">文档阅读指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/1开发板上手指南-1">1.开发板上手指南</a><button aria-label="Expand sidebar category &#x27;1.开发板上手指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/2开发环境搭建指南-1">2.开发环境搭建指南</a><button aria-label="Expand sidebar category &#x27;2.开发环境搭建指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/3嵌入式应用开发指南-1">3.嵌入式应用开发指南</a><button aria-label="Expand sidebar category &#x27;3.嵌入式应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/4ai应用开发指南-1">4.AI应用开发指南</a><button aria-label="Expand sidebar category &#x27;4.AI应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/5micropython应用开发指南-1">5.MicroPython应用开发指南</a><button aria-label="Expand sidebar category &#x27;5.MicroPython应用开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/6系统开发指南-1">6.系统开发指南</a><button aria-label="Expand sidebar category &#x27;6.系统开发指南&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/7sdk-api参考指南-1">7.SDK API参考指南</a><button aria-label="Collapse sidebar category &#x27;7.SDK API参考指南&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230Inter-corecommunicationAPIreference">K230核间通讯API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230ThesystemcontrolstheMAPIreference">K230系统控制MAPI参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230MultimediaMiddlewareAPIReference">K230 中间件API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DMAAPIreference">K230 DMA API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DPUAPIreference">K230 DPU API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230FFTAPIreference">K230 FFT API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230GPUAPIreference">K230 GPU API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230SHA256APIreference">K230 SHA256 API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VICAPAPIreference">K230 VICAP API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VICAPSENSORParameterpartitionreference">K230 VICAP SENSOR 参数分区参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230systemcontrolAPIreference">K230系统控制API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VideocodecAPIreference">K230视频编解码API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230VideooutputAPIreference">K230视频输出API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230AudioAPIreference">K230音频API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230DRMUserGuide">K230 DRM使用指南</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/CanaanK230/part7/K230Large-corelow-speeddriveAPIreference">K230大核低速驱动API参考</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/CanaanK230/part7/K230ReferenceAPIsmall-coreLinuxdrivers">K230小核Linux驱动API参考</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/8常见问题-1">8.常见问题</a><button aria-label="Expand sidebar category &#x27;8.常见问题&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/7sdk-api参考指南-1"><span itemprop="name">7.SDK API参考指南</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">K230小核Linux驱动API参考</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>K230小核Linux驱动API参考</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-概述">1 概述<a href="#1-概述" class="hash-link" aria-label="Direct link to 1 概述" title="Direct link to 1 概述">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-概述">1.1 概述<a href="#11-概述" class="hash-link" aria-label="Direct link to 1.1 概述" title="Direct link to 1.1 概述">​</a></h3>
<p>UART：
通用异步收发器，该总线双向通信，可以实现全双工传输和接收。在嵌入式设计中，UART用来与PC进行通信，包括与监控调试器和其它器件，如EEPROM通信。</p>
<p>I2C：
由Philips公司（2006年迁移到NXP）在1980年代初开发的一种简单、双线双向的同步串行总线，它利用一根时钟线和一根数据线在连接总线的两个器件之间进行信息的传递，为设备之间数据交换提供了一种简单高效的方法。每个连接到总线上的器件都有唯一的地址，任何器件既可以作为主机也可以作为从机，但同一时刻只允许有一个主机。</p>
<p>GPIO：
（general porpose intput output）通用输入输出端口的简称。可以通过软件控制其输出和输入，通俗来说就是常用引脚，可以控制引脚的高低电平，对其进行读取或者写入。</p>
<p>Hard-lock：
嘉楠自研模块，用于同核不通进程间或异核之间对共享资源的互斥而实现的硬件互斥锁，可用于对共享资源的互斥使用。</p>
<p>WDT：
WDT是watchdog的简称，本质上是一个硬件定时器，软件程序需要每隔一段时间喂一次狗，如果WDT超时则可以产生一个中断信号或复位信号到CPU，由此通过软硬件结合的方式防止程序运行异常而不能恢复。</p>
<p>OTP：
OTP 主要用于存储安全敏感的机密信息，例如 bootrom 的固件信息、加解密密钥、签名信息以及用户自己定义的安全信息等。</p>
<p>TS：
K230 TS（Temperature Sensor），自研温度传感器，采用 TSMC 12nm 工艺，TS 的应用场景是降频。</p>
<p>TRNG：
TRNG 主要用于产生真随机数，从而为加解密运算提供一个随机熵源。</p>
<p>ADC：
ADC 指模数转换器，是指将连续变化的模拟信号转换为离散的数字信号的器件。</p>
<p>PWM：
PWM 脉冲宽度调制，是一种对模拟信号电平进行数字编码的方法，通过调制正脉冲周期所占的比例来对一个具体模拟信号的电平进行编码。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-功能描述">1.2 功能描述<a href="#12-功能描述" class="hash-link" aria-label="Direct link to 1.2 功能描述" title="Direct link to 1.2 功能描述">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="121-uart模块">1.2.1 uart模块<a href="#121-uart模块" class="hash-link" aria-label="Direct link to 1.2.1 uart模块" title="Direct link to 1.2.1 uart模块">​</a></h4>
<p>K230共有5路uart，且uart模块支持红外模式，支持RS485模式，支持DMA，部分端口支持流控，数据位支持5/6/7/8比特，停止位1/2比特，波特率可以支持到1.5MHz。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="122-i2c模块">1.2.2 i2c模块<a href="#122-i2c模块" class="hash-link" aria-label="Direct link to 1.2.2 i2c模块" title="Direct link to 1.2.2 i2c模块">​</a></h4>
<p>K230共有5路i2c，i2c模块支持主模式，支持DMA，支持7/10比特寻址，支持中断，i2c模块传输速率支持100k/400k/1M/3.4M.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="123-gpio模块">1.2.3 gpio模块<a href="#123-gpio模块" class="hash-link" aria-label="Direct link to 1.2.3 gpio模块" title="Direct link to 1.2.3 gpio模块">​</a></h4>
<p>k230共有2路gpio，每路gpio包含32个gpio端口，共64个gpio端口，每个gpio端口均支持输入输出功能，支持上升沿中断，下降沿中断，高低电平中断，和双边沿中断。k230的每个gpio端口的中断相互独立互不影响 。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="124-hard-lock模块">1.2.4 hard-lock模块<a href="#124-hard-lock模块" class="hash-link" aria-label="Direct link to 1.2.4 hard-lock模块" title="Direct link to 1.2.4 hard-lock模块">​</a></h4>
<p>k230有128个硬件互斥锁，其作用类似Linux的自旋锁，可以用于对同一资源的互斥。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="125-wdt模块">1.2.5 wdt模块<a href="#125-wdt模块" class="hash-link" aria-label="Direct link to 1.2.5 wdt模块" title="Direct link to 1.2.5 wdt模块">​</a></h4>
<p>wdt，watchdog模块，k230有两路wdt，大小核分别使用一路，wdt支持中断和复位两种模式，默认使用复位模式，即当wdt的超时时间溢出时，直接使soc复位。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="126-otp模块">1.2.6 OTP模块<a href="#126-otp模块" class="hash-link" aria-label="Direct link to 1.2.6 OTP模块" title="Direct link to 1.2.6 OTP模块">​</a></h4>
<p>OTP 集成在安全模块 PUF 中，为整个 SoC 提供安全存储功能，保护根密钥和启动代码等关键数据不被攻击者破坏。小核侧 OTP 驱动主要提供读功能，可读区域为包括生产信息在内的 24Kbits 空间。Linux 侧 OTP 驱动挂载在 nvmem 框架上，具体的框架结构如下图所示：</p>
<p><img decoding="async" loading="lazy" alt="otp" src="/assets/images/otp_linux-ddb0d470d32d3698cf766af9f4d4845e.png" width="2426" height="2298" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="127-ts模块">1.2.7 TS模块<a href="#127-ts模块" class="hash-link" aria-label="Direct link to 1.2.7 TS模块" title="Direct link to 1.2.7 TS模块">​</a></h4>
<p>大核侧 TS 驱动主要提供读功能，在读 TS 之前，首先需要配置 TS 寄存器使能信号、输出模式，然后才能读出芯片的结温。另外，TS 寄存器每 2.6s 读取一次芯片结温。Rt-smart 侧 TS 驱动的结构如下图所示：</p>
<p><img decoding="async" loading="lazy" alt="ts" src="/assets/images/ts_linux-bf1609db0c054a5ba8d9ce1ad28527d3.png" width="2426" height="2250" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="128-trng模块">1.2.8 TRNG模块<a href="#128-trng模块" class="hash-link" aria-label="Direct link to 1.2.8 TRNG模块" title="Direct link to 1.2.8 TRNG模块">​</a></h4>
<p>TRNG 集成在安全模块 PUF 中，为整个 SoC 提供真随机数功能，保护根密钥和启动代码等关键数据不被攻击者破坏。小核侧 TRNG 驱动主要提供读功能，TRNG 驱动挂载在 HW random 框架上，具体的框架结构如下图所示：</p>
<p><img decoding="async" loading="lazy" alt="trng" src="/assets/images/trng_linux-11da0e7d3cb4f44052173f4595da582a.png" width="2433" height="1978" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="129-adc模块">1.2.9 ADC模块<a href="#129-adc模块" class="hash-link" aria-label="Direct link to 1.2.9 ADC模块" title="Direct link to 1.2.9 ADC模块">​</a></h4>
<p>K230集成一路ADC转换器，共6各通道，分辨率12bit，最高每秒1M次的单通道连续模数转换。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1210-pwm模块">1.2.10 PWM模块<a href="#1210-pwm模块" class="hash-link" aria-label="Direct link to 1.2.10 PWM模块" title="Direct link to 1.2.10 PWM模块">​</a></h4>
<p>K230集成了2路PWM，每一路有3各通道，即通道 0<del>2 属于PWM0，通道 3</del>5 属于PWM1（软件上表现为通道 0~5 ），每一路都可输出独立波形。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-api参考">2 API参考<a href="#2-api参考" class="hash-link" aria-label="Direct link to 2 API参考" title="Direct link to 2 API参考">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-uart-api参考">2.1 UART API参考<a href="#21-uart-api参考" class="hash-link" aria-label="Direct link to 2.1 UART API参考" title="Direct link to 2.1 UART API参考">​</a></h3>
<p>Linux封装了termios API用来给用户使用，termios API描述了一个通用的终端接口，提供了控制异步通讯端口的配置和读写。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">termios API举例：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcgetattr(int fd,struct termios *termios_p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcsetattr(int fd,int potional_actions,struct termios *termios_p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcsendbreak(int fd,int duration);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcdrain(int fd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcflush(int fd, int queue_selector);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int tcflow(int fd, int action);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">void cfmakeraw(struct termios *termios_p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">speed_t cfgetispeed(const struct termios *termios_p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">speed_t cfgetospeed(const struct termios *termios_p);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int cfsetispeed(struct termios *termios_p, speed_t speed);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int cfsetospeed(struct termios *termios_p, speed_t speed);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int cfsetspeed(struct termios *termios_p, speed_t speed);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>详细请参考<code>Documentation/driver-api/serial/tty.rst</code>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-i2c-api参考">2.2 I2C API参考<a href="#22-i2c-api参考" class="hash-link" aria-label="Direct link to 2.2 I2C API参考" title="Direct link to 2.2 I2C API参考">​</a></h3>
<p>linux为用户称封装了系统调用来使用i2c。</p>
<p><a href="#211-open">open</a></p>
<p><a href="#212-ioctl">ioctl</a></p>
<p><a href="#213-read">read</a></p>
<p><a href="#214-write">write</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-gpio-api参考">2.3 GPIO API参考<a href="#23-gpio-api参考" class="hash-link" aria-label="Direct link to 2.3 GPIO API参考" title="Direct link to 2.3 GPIO API参考">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="231-sysfs控制gpio">2.3.1 sysfs控制gpio<a href="#231-sysfs控制gpio" class="hash-link" aria-label="Direct link to 2.3.1 sysfs控制gpio" title="Direct link to 2.3.1 sysfs控制gpio">​</a></h4>
<p>GPIO驱动加载后会在 <code>/sys/class/gpio/</code> 下创建gpio端口的设备节点，每个节点代表一个gpio端口，通过sysfs操作这个gpio端口即可达到操作gpio输入输出和中断的作用。</p>
<p>方法1：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo N &gt; /sys/class/gpio/export        //将编号为 N 的gpio端口导出到sysfs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo in &gt; /sys/class/gpio/gpioN/direction    //将该gpio端口设置成输入模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cat /sys/class/gpio/gpioN/value      //读取该gpio端口电平状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo out &gt; /sys/class/gpio/gpioN/direction    //将该gpio端口设置成输出模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /sys/class/gpio/gpioN/value     //将该端口输出高电平，注意active_low极性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 0 &gt; /sys/class/gpio/gpioN/value     //将该端口输出低电平，注意active_low极性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">设置中断属性：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo rising &gt; /sys/class/gpio/gpioN/edge    上升沿中断，中断只能在direction为in时才可以设置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo falling &gt; /sys/class/gpio/gpioN/edge   下降沿中断</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo both &gt; /sys/class/gpio/gpioN/edge      双边沿中断</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>方法2：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">设置好中断模式后通过poll函数监听中断:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct pollfd fds[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fd = open(&quot;/sys/class/gpio/gpioN/value&quot;, O_RDONLY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fds[0].fd = gpio_fd;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fds[0].events = POLLPRI;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    poll(fds, 1, -1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (fds[0].revents &amp; POLLPRI)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /* 接收中断 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="232-ioctl控制gpio">2.3.2 ioctl控制gpio<a href="#232-ioctl控制gpio" class="hash-link" aria-label="Direct link to 2.3.2 ioctl控制gpio" title="Direct link to 2.3.2 ioctl控制gpio">​</a></h4>
<p>用户程序直接操作 <code>/dev/gpiochipN</code>：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">struct gpiohandle_request req;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct gpiohandle_data data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct gpioevent_request event_req;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct gpioevent_data event_data;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct pollfd poll_fd;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fd = open(&quot;/dev/gpiochipN&quot;, O_RDONLY);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req.lineoffsets[0] = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req.flags = GPIOHANDLE_REQUEST_OUTPUT;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req.lines = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event_req.lineoffset = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event_req.handleflags = GPIOHANDLE_REQUEST_INPUT;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event_req.eventflags = GPIOEVENT_REQUEST_RISING_EDGE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, GPIO_GET_LINEHANDLE_IOCTL, &amp;req);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, GPIO_GET_LINEEVENT_IOCTL, &amp;event_req);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">close(fd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poll_fd.fd = event_req.fd;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poll_fd.events = POLLIN;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data.values[0] = !data.values[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ioctl(req.fd, GPIOHANDLE_SET_LINE_VALUES_IOCTL, &amp;data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ret = poll(&amp;poll_fd, 1, 3000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     if(ret == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     ....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        read(event_req.fd, &amp;event_data, sizeof(event_data));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">close(req.fd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-hardlock-api参考">2.4 Hardlock API参考<a href="#24-hardlock-api参考" class="hash-link" aria-label="Direct link to 2.4 Hardlock API参考" title="Direct link to 2.4 Hardlock API参考">​</a></h3>
<p>Hardlock未提供用户api接口，其使用方法仅限内核态驱动之间使用。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="25-wadtchdog-api参考">2.5 Wadtchdog API参考<a href="#25-wadtchdog-api参考" class="hash-link" aria-label="Direct link to 2.5 Wadtchdog API参考" title="Direct link to 2.5 Wadtchdog API参考">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="251-通过ioctl使用watchdog">2.5.1 通过ioctl使用watchdog<a href="#251-通过ioctl使用watchdog" class="hash-link" aria-label="Direct link to 2.5.1 通过ioctl使用watchdog" title="Direct link to 2.5.1 通过ioctl使用watchdog">​</a></h4>
<p><a href="#211-open">open</a></p>
<p><a href="#212-ioctl">ioctl</a></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">示例：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fd = open(&quot;/dev/watchdog&quot;, O_WRONLY)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_SETTIMEOUT, &amp;flags); /* 设置超时 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_GETTIMEOUT, &amp;flags); /* 获取超时设置 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_SETPRETIMEOUT, &amp;flags); /* 设置预超时 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_GETPRETIMEOUT, &amp;flags); /* 获取预超时 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_GETTIMELEFT, &amp;flags); /* 获取剩余超时时间 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ioctl(fd, WDIOC_KEEPALIVE, &amp;dummy); /* 喂狗 */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.....</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="252-通过文件系统使用watchdog">2.5.2 通过文件系统使用watchdog<a href="#252-通过文件系统使用watchdog" class="hash-link" aria-label="Direct link to 2.5.2 通过文件系统使用watchdog" title="Direct link to 2.5.2 通过文件系统使用watchdog">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo V &gt; /dev/watchdog     watchdog开始计时，内核自动喂狗线程启动</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo A &gt; /dev/watchdog     内核喂狗线程停止喂狗，但计时仍然继续，在默认超时时间后系统复位</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>注意：在命令行向watchdog节点写字符时，watchdog被使能并使用默认超时时间计数，且内核自动喂狗线程被唤醒</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="26-otp-api-参考">2.6 OTP API 参考<a href="#26-otp-api-参考" class="hash-link" aria-label="Direct link to 2.6 OTP API 参考" title="Direct link to 2.6 OTP API 参考">​</a></h3>
<p>用户可通过 <code>sysfs</code> 来访问 OTP 硬件，还可以通过运行用户态程序读取 OTP 空间。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="261-sysfs-文件系统">2.6.1 sysfs 文件系统<a href="#261-sysfs-文件系统" class="hash-link" aria-label="Direct link to 2.6.1 sysfs 文件系统" title="Direct link to 2.6.1 sysfs 文件系统">​</a></h4>
<p>Linux 内核使用 <code>sysfs</code> 文件系统，它的作用是将设备和驱动程序的信息导出到用户空间，方便了用户读取设备信息，同时支持修改和调整。<code>Sysfs</code> 虚拟文件系统一般被挂载在 <code>/sys</code> 目录下。OTP 一旦被注册到 Linux 中的 <code>NVMEM</code> 框架中之后，通过 <code>sysfs</code> 虚拟文件系统，可以很容易查看到 OTP 的信息。</p>
<p>OTP sysfs位于 <code>/sys/bus/nvmem/devices/kendryte_otp0/</code> 目录下，文件结构如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- nvmem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- of_node -&gt; ../../../../../../firmware/devicetree/base/soc/security/otp@91214000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- subsystem -&gt; ../../../../../../bus/nvmem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- uevent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动 Linux 之后，运行下列命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]# hexdump -C -v /sys/bus/nvmem/devices/kendryte_otp0/nvmem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000010  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000020  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000030  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000040  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000050  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000060  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000070  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000080  00 02 00 00 50 02 00 00  00 01 00 00 00 00 00 00  |....P...........|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000090  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000000a0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>或者，利用 <code>dd</code> 命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]# dd if=/sys/bus/nvmem/devices/kendryte_otp0/nvmem of=/tmp/file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6+0 records in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6+0 records out</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]# hexdump -C -v /tmp/file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000010  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000020  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000030  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000040  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000050  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000060  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000070  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000080  00 02 00 00 50 02 00 00  00 01 00 00 00 00 00 00  |....P...........|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000090  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="262-用户态访问-otp">2.6.2 用户态访问 OTP<a href="#262-用户态访问-otp" class="hash-link" aria-label="Direct link to 2.6.2 用户态访问 OTP" title="Direct link to 2.6.2 用户态访问 OTP">​</a></h4>
<p>编写一个用户态应用程序，用户态应用程序通过标准的系统调用open()、close()、read()等函数陷入到内核态，最终会调用 OTP 驱动中注册的接口中，以测试 OTP 功能。</p>
<p>目前用户态应用程序已经编写完成，生成的可执行文件在 <code>/usr/bin/otp_test_demo</code> 目录下。</p>
<p>运行步骤如下：</p>
<ol>
<li>进入应用程序 demo 目录；</li>
<li>在 demo 目录下运行 otp demo，读取长度作为参数；</li>
<li>执行 otp demo。</li>
<li>改变读取长度（长度范围：1~768），重新执行 otp demo。</li>
</ol>
<p>启动小核Linux之后，运行下列命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cd /usr/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan /usr/bin ]# ./otp_test_demo 768</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Addr                    Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000000                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000004                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000008                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000000c                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000010                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000014                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000018                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000001c                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000020                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000024                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000028                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000002c                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000030                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000034                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000038                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0000003c                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000040                0xffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="263-otp-空间默认值">2.6.3 OTP 空间默认值<a href="#263-otp-空间默认值" class="hash-link" aria-label="Direct link to 2.6.3 OTP 空间默认值" title="Direct link to 2.6.3 OTP 空间默认值">​</a></h4>
<p>OTP 空间默认值信息如下所示，请对照默认值验证读取OTP空间是否正确。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">00000000  ff ff ff ff ff ff ff ff  ff ff ff ff ff ff ff ff  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000080  00 02 00 00 50 02 00 00  00 01 00 00 00 00 00 00  |....P...........|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000090  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000100  8d 3d da 24 1c f6 fa f6  88 4b c3 91 fb 2d 7b 09  |.=.$.....K...-{.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000110  a6 64 03 7d ce 98 e0 d2  92 5a a0 cf 3c 58 50 d0  |.d.}.....Z..&lt;XP.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000120  3b 77 37 e6 0d 36 eb 9a  21 42 a1 2a 53 d8 aa 87  |;w7..6..!B.*S...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000130  ab 53 5c e7 ab 3e 7a c6  f4 29 16 71 45 f1 30 0d  |.S\..&gt;z..).qE.0.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000140  91 3f a6 3d 48 30 dd 6d  18 c2 1c 13 97 fe 1f 9b  |.?.=H0.m........|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000150  fd 08 1c 16 1b a7 9a 20  1d 80 70 8a 20 08 61 a3  |....... ..p. .a.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000160  24 2b cf ec 97 9e 3f 25  89 b9 f2 a8 7a 63 5c c7  |$+....?%....zc\.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000170  44 86 70 30 45 e4 4f 35  4d 2e 3e 8c e5 3a 49 29  |D.p0E.O5M.&gt;..:I)|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000180  b6 06 6e 15 6b 62 d3 94  5f 8a ea e3 ea a3 a1 fc  |..n.kb.._.......|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000190  0f 19 f5 50 05 4d 63 47  77 14 c1 c0 bf 06 3b 55  |...P.McGw.....;U|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001a0  47 be 7c c6 93 e2 e1 31  05 27 f5 a2 77 16 1f 75  |G.|....1.&#x27;..w..u|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001b0  5a 95 0a 15 24 16 a8 1a  fc d8 67 f4 dd 15 e4 8c  |Z...$.....g.....|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001c0  25 44 b9 48 59 b1 17 bb  8e 05 15 db ff fa 77 47  |%D.HY.........wG|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001d0  52 ce f7 86 bf 20 b5 46  ac 83 e9 ac 08 a7 e3 67  |R.... .F.......g|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001e0  02 24 50 de 49 9d 24 57  9f 78 bb 74 21 8f 74 f0  |.$P.I.$W.x.t!.t.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000001f0  47 25 9b cb 99 e7 6a 0f  51 52 be 4b ea 6a a3 ee  |G%....j.QR.K.j..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000200  7b 8d f8 ad c8 c6 5e c4  13 66 4b 50 3b 02 98 c8  |{.....^..fKP;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000210  20 11 c5 ca 54 ee 32 ea  89 e4 38 58 cd 5a cb 34  | ...T.2...8X.Z.4|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000220  2f d2 d9 b3 d9 97 50 a8  10 74 73 17 b0 76 19 ec  |/.....P..ts..v..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000230  8e 1e 07 58 ba f5 5b b9  a3 6e 0b f8 ae 8c ba 35  |...X..[..n.....5|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000240  53 6b 5d 52 9d e9 76 46  ae f7 1f 8d 45 b4 93 b6  |Sk]R..vF....E...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000250  28 93 b4 07 6f 8e be 37  41 57 86 19 c1 d0 fb 9b  |(...o..7AW......|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000260  8e 09 7a 77 a4 23 83 db  39 64 6c 5f 73 0d 82 2e  |..zw.#..9dl_s...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000270  ca 5b 2e c4 5f b0 6b 23  3d fd 96 88 e8 b9 e9 02  |.[.._.k#=.......|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000280  a8 e1 22 b1 c4 af 61 4c  bc ab 93 a1 d1 80 aa 6f  |..&quot;...aL.......o|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000290  01 dc cd c1 a0 71 36 58  86 ed 7e d9 c1 15 95 50  |.....q6X..~....P|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002a0  f2 4e 9a 0e c9 d8 58 d6  14 93 c9 de 86 0e 87 52  |.N....X........R|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002b0  85 e6 ff d6 28 e8 dd 29  5a ab b4 b3 ce de 35 e9  |....(..)Z.....5.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002c0  48 f2 1f a8 22 8f e3 17  d7 86 d8 e8 de 24 4d 2a  |H...&quot;........$M*|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002d0  70 89 37 47 9c 53 9b 33  0b 74 95 30 d6 4e e0 36  |p.7G.S.3.t.0.N.6|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002e0  bc 10 ff da ab bd 74 e7  df 04 08 11 e7 43 94 09  |......t......C..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000002f0  4d 74 df 13 84 a0 86 54  4c d0 cb c2 63 fb 42 7d  |Mt.....TL...c.B}|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000300  5b e6 9d 3b dc 86 59 d7  cb df 29 65 53 51 54 8b  |[..;..Y...)eSQT.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000310  b1 50 96 a2 85 e0 b6 b4  d2 ce 6d 63 48 09 b3 62  |.P........mcH..b|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000320  9d f5 d4 16 4c 81 5f b4  e1 f7 91 7b 5f 7f c9 29  |....L._....{_..)|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000330  43 22 56 e8 f5 ae 68 b3  a0 a8 f9 7d 7b d9 b1 2e  |C&quot;V...h....}{...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000340  98 25 07 7b 38 33 9c 99  f6 85 c7 49 cb dc 6f 1d  |.%.{83.....I..o.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000350  1c 45 d1 ff 57 a4 b9 d7  2a 6c 3f 9e dd 9a ee 5b  |.E..W...*l?....[|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000360  f3 0b 21 af 2e d8 e5 ce  4f b7 4d 07 ea ba 5a e9  |..!.....O.M...Z.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000370  df 85 d8 6d 88 78 84 9a  dd 1a 4a 4a 86 2e e4 62  |...m.x....JJ...b|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000380  c2 94 4c e7 77 0b 2c 7a  38 03 2c 2a a1 f7 5b dd  |..L.w.,z8.,*..[.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000390  14 a7 d8 4a 66 38 d0 9f  e8 28 a8 7c 33 36 39 72  |...Jf8...(.|369r|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003a0  1b 7b 84 68 a6 a8 dd 7e  a9 5b f0 8e 2b 50 6e 40  |.{.h...~.[..+Pn@|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003b0  d2 a5 62 43 5e f1 f4 bf  90 11 0f e2 16 b5 80 4e  |..bC^..........N|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003c0  10 68 a7 a2 aa 2d dd ba  c1 d7 d6 0c b7 17 a5 a3  |.h...-..........|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003d0  c2 e2 77 e8 7c 9a ff 23  8c 30 ae b3 5a 79 1c fd  |..w.|..#.0..Zy..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003e0  77 4a f6 41 78 53 36 52  d4 45 a6 f9 c2 8e 8d fc  |wJ.AxS6R.E......|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">000003f0  03 2e f4 00 58 e8 15 85  bf d9 3f b8 62 58 e2 97  |....X.....?.bX..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000400  d2 ea 7f b2 a2 ef 40 f2  fc 68 07 64 51 f7 c9 6e  |......@..h.dQ..n|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000410  68 eb 68 ec 15 a8 a7 7e  1d 86 8b 12 f1 33 a0 18  |h.h....~.....3..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000420  21 06 f4 0a 58 4b ec 17  7d 87 2c ec ea ce 3e ce  |!...XK..}.,...&gt;.|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000430  02 2f 02 a5 76 61 57 dd  85 6e f5 14 d4 6b fb f9  |./..vaW..n...k..|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000440  64 d3 60 2c 1f 45 00 9c  50 d4 2a aa 1d f0 96 82  |d.`,.E..P.*.....|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000450  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00000bf0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="27-ts-api-参考">2.7 TS API 参考<a href="#27-ts-api-参考" class="hash-link" aria-label="Direct link to 2.7 TS API 参考" title="Direct link to 2.7 TS API 参考">​</a></h3>
<p>用户可通过 <code>sysfs</code> 来访问 TS 硬件，还可以通过运行用户态程序读取芯片结温。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="271-sysfs-文件系统">2.7.1 sysfs 文件系统<a href="#271-sysfs-文件系统" class="hash-link" aria-label="Direct link to 2.7.1 sysfs 文件系统" title="Direct link to 2.7.1 sysfs 文件系统">​</a></h4>
<p>Linux 内核使用 <code>sysfs</code> 文件系统，它的作用是将设备和驱动程序的信息导出到用户空间，方便了用户读取设备信息，同时支持修改和调整。<code>sysfs</code> 虚拟文件系统一般被挂载在 <code>/sys</code> 目录下。TS 一旦被注册到 Linux 中的 Thermal 框架中之后，通过 <code>sysfs</code> 虚拟文件系统，可以很容易查看到 TS 的信息。</p>
<p>TS sysfs位于 <code>/sys/class/thermal/thermal_zone0/</code> 目录下，文件结构如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- available_policies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- integral_cutoff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- k_d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- k_i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- k_po</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- k_pu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- passive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- policy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- slope</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- subsystem -&gt; ../../../../class/thermal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- sustainable_power</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- temp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- uevent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动 Linux 之后，运行下列命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cat /sys/class/thermal/thermal_zone0/temp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7182</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">......</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>7182</code> 这个值表示的含义为：读取 tsensor 寄存器的值，并没有做任何数学运算。相应的数学表达式如下:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">code = ts_val &amp; 0xfff;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">temp = (1e-10 * pow(code, 4) * 1.01472 - 1e-6 * pow(code, 3) * 1.10063 + 4.36150 * 1e-3 * pow(code, 2) - 7.10128 * code + 3565.87);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>ts_val：实际读取 TS 寄存器的值；</li>
<li>code：TS 寄存器的值保留低12位得到的结果；</li>
<li>temp：计算得到的温度值。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="272-用户态访问-ts">2.7.2 用户态访问 TS<a href="#272-用户态访问-ts" class="hash-link" aria-label="Direct link to 2.7.2 用户态访问 TS" title="Direct link to 2.7.2 用户态访问 TS">​</a></h4>
<p>编写一个用户态应用程序，用户态应用程序通过标准的系统调用open()、close()、read()等函数陷入到内核态，最终会调用 TS 驱动中注册的接口中，以测试 TS 功能。</p>
<p>目前用户态应用程序已经编写完成，生成的可执行文件在 <code>/usr/bin/ts_test_demo</code> 目录下。</p>
<p>运行步骤如下：</p>
<ol>
<li>进入应用程序 demo 目录；</li>
<li>在 demo 目录下运行 ts demo，循环次数作为参数；</li>
<li>执行 ts demo。</li>
<li>改变循环次数，重新执行 ts demo。</li>
</ol>
<p>启动小核Linux之后，运行下列命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cd /usr/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan /usr/bin ]#./ts_test_demo 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ts_val: 0x1c08, TS = 42.176993 C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ts_val: 0x1c07, TS = 41.875168 C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ts_val: 0x1c06, TS = 41.573277 C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ts_val: 0x1c07, TS = 41.875168 C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ts_val: 0x1c0a, TS = 42.780447 C</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="28-trng-api-参考">2.8 TRNG API 参考<a href="#28-trng-api-参考" class="hash-link" aria-label="Direct link to 2.8 TRNG API 参考" title="Direct link to 2.8 TRNG API 参考">​</a></h3>
<p>用户可通过 <code>sysfs</code> 来访问 TRNG 硬件，还可以通过运行用户态程序读取真随机数。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="281-sysfs-文件系统">2.8.1 sysfs 文件系统<a href="#281-sysfs-文件系统" class="hash-link" aria-label="Direct link to 2.8.1 sysfs 文件系统" title="Direct link to 2.8.1 sysfs 文件系统">​</a></h4>
<p>Linux 内核使用 <code>sysfs</code> 文件系统，它的作用是将设备和驱动程序的信息导出到用户空间，方便了用户读取设备信息，同时支持修改和调整。<code>sysfs</code> 虚拟文件系统一般被挂载在 <code>/sys</code> 目录下。TRNG 一旦被注册到 Linux 中的 HW random 框架中之后，通过 <code>sysfs</code> 虚拟文件系统，可以很容易查看到 TRNG 的信息。</p>
<p>TRNG sysfs位于 <code>/sys/class/misc/hw_random/</code> 目录下，文件结构如下：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- rng_available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- rng_current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- rng_selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- subsystem -&gt; ../../../../class/misc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|-- uevent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动 Linux 之后，运行下列命令：</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]# cat /sys/class/misc/hw_random/rng_current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">91213000.trng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]# cat /sys/class/misc/hw_random/rng_available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">91213000.trng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="282-用户态访问-trng">2.8.2 用户态访问 TRNG<a href="#282-用户态访问-trng" class="hash-link" aria-label="Direct link to 2.8.2 用户态访问 TRNG" title="Direct link to 2.8.2 用户态访问 TRNG">​</a></h4>
<p>编写一个用户态应用程序，用户态应用程序通过标准的系统调用open()、close()、read()等函数陷入到内核态，最终会调用 TRNG 驱动中注册的接口中，查看每次读取得到的数据是否不一致，从而测试 TRNG 的功能。</p>
<p>目前用户态应用程序已经编写完成，生成的可执行文件在 <em>/usr/bin/trng_test_demo</em> 目录下。</p>
<p>运行步骤如下：</p>
<ol>
<li>进入应用程序 demo 目录；</li>
<li>在 demo 目录下运行 trng demo；</li>
<li>执行 trng demo。</li>
<li>重复执行 trng demo，查看每次读取的随机数是否一致。</li>
</ol>
<p>启动小核Linux之后，运行下列命令：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#cd /usr/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan /usr/bin ]#./trng_test_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2C 10 B3 29 C3 98 10 41 3C 2A 90 75 EB C4 61 A5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan /usr/bin ]#./trng_test_demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6E AB 46 DD C1 7D FC 97 65 02 0C 58 1E A1 80 B9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@canaan ~ ]#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>默认每次打印16个字节的随机数，每次打印的随机数不同。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="29-adc-api参考">2.9 ADC API参考<a href="#29-adc-api参考" class="hash-link" aria-label="Direct link to 2.9 ADC API参考" title="Direct link to 2.9 ADC API参考">​</a></h3>
<p>用户可通过 <code>sysfs</code> 来访问 ADC 各通道，还可以通过运行用户态程序读取各通道电压转换数据。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="291-sysfs访问-adc">2.9.1 sysfs访问 ADC<a href="#291-sysfs访问-adc" class="hash-link" aria-label="Direct link to 2.9.1 sysfs访问 ADC" title="Direct link to 2.9.1 sysfs访问 ADC">​</a></h4>
<p>Linux下ADC是挂载在IIO子系统下的，通过<code>sysfs</code>访问可以参考如下示例；</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1、cd /sys/devices/platform/soc/9140d000.adc/iio:device0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2、cat in_voltage0_raw   读取通道0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3、cat in_voltage1_raw   读取通道1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4、cat in_voltage2_raw   读取通道2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5、cat in_voltage3_raw   读取通道3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6、cat in_voltage4_raw   读取通道4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">7、cat in_voltage5_raw   读取通道5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：在嘉楠 K230_EVB 开发板上，ADC通道5另一端已经接在音频输出接口上，所以不建议将此通道用作他用。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="292-用户态访问-adc">2.9.2 用户态访问 ADC<a href="#292-用户态访问-adc" class="hash-link" aria-label="Direct link to 2.9.2 用户态访问 ADC" title="Direct link to 2.9.2 用户态访问 ADC">​</a></h4>
<p>略。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="210-pwm-api参考">2.10 PWM API参考<a href="#210-pwm-api参考" class="hash-link" aria-label="Direct link to 2.10 PWM API参考" title="Direct link to 2.10 PWM API参考">​</a></h3>
<p>用户可通过 <code>sysfs</code> 来访问 PWM 各通道，还可以通过运行用户态程序控制各通道输出波形周期及占空比。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2101-sysfs访问-pwm">2.10.1 sysfs访问 PWM<a href="#2101-sysfs访问-pwm" class="hash-link" aria-label="Direct link to 2.10.1 sysfs访问 PWM" title="Direct link to 2.10.1 sysfs访问 PWM">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1、cd /sys/devices/platform/soc/9140a000.pwm/pwm/pwmchip0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2、echo 4 &gt; export          导出通道4 即PWM4；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3、cd pwm4/                 出现pwm4的目录，进入；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4、echo 100000 &gt; period     设置周期 100us，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5、echo 50000 &gt; duty_cycle  设置正占空比周期 50us，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">6、echo 1 &gt;enable           当前通道使能；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2102-用户态访问-pwm">2.10.2 用户态访问 PWM<a href="#2102-用户态访问-pwm" class="hash-link" aria-label="Direct link to 2.10.2 用户态访问 PWM" title="Direct link to 2.10.2 用户态访问 PWM">​</a></h4>
<p>略。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="211-open">2.11 open<a href="#211-open" class="hash-link" aria-label="Direct link to 2.11 open" title="Direct link to 2.11 open">​</a></h3>
<p>【描述】</p>
<p>打开设备节点。</p>
<p>【语法】</p>
<p><code>int open(const char *pathname, int flags)</code></p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>patchname</td><td>全路径设备名</td><td>输入</td></tr><tr><td>flags</td><td>打开方式</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>负值</td><td>错误</td></tr><tr><td>正值</td><td>打开的文件描述符id</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：<code>sys/types.h</code>, <code>sys/stat.h</code>, <code>fcntl.h</code></li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<p><code>int fd = open(&quot;/dev/i2c-0&quot;, O_RDWR);</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="212-ioctl">2.12 ioctl<a href="#212-ioctl" class="hash-link" aria-label="Direct link to 2.12 ioctl" title="Direct link to 2.12 ioctl">​</a></h3>
<p>【描述】</p>
<p>设备控制。</p>
<p>【语法】</p>
<p><code>int ioctl(int fd, unsigned long request, ...);</code></p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>fd</td><td>打开的文件描述符</td><td>输入</td></tr><tr><td>request</td><td>32位命令码</td><td>--</td></tr></tbody></table>
<p>命令码请参考<code>include/uapi/asm-generic/ioctl.h</code></p>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>负值</td><td>错误</td></tr><tr><td>非负值</td><td>成功</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：<code>sys/ioctl.h</code></li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<p><code>err = ioctl(file, I2C_SMBUS, &amp;args);</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="213-read">2.13 read<a href="#213-read" class="hash-link" aria-label="Direct link to 2.13 read" title="Direct link to 2.13 read">​</a></h3>
<p>【描述】</p>
<p>读取打开的文件描述符内容。</p>
<p>【语法】</p>
<p><code>ssize_t read(int fd, void *buf, size_t count);</code></p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>fd</td><td>打开的文件描述符</td><td>输入</td></tr><tr><td>buf</td><td>存放输出数据的空间</td><td>输出</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>-1</td><td>错误</td></tr><tr><td>非负值</td><td>读取到的字节数</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：<code>unistd.h</code></li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<p><code>int n = read(fd, &amp;buf, num);</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="214-write">2.14 write<a href="#214-write" class="hash-link" aria-label="Direct link to 2.14 write" title="Direct link to 2.14 write">​</a></h3>
<p>【描述】</p>
<p>向打开的文件描述符写数据。</p>
<p>【语法】</p>
<p><code>ssize_t write(int fd, const void *buf, size_t count);</code></p>
<p>【参数】</p>
<table><thead><tr><th>参数名称</th><th>描述</th><th>输入/输出</th></tr></thead><tbody><tr><td>fd</td><td>打开的文件描述符</td><td>输入</td></tr><tr><td>buf</td><td>存放数据的空间</td><td>输出</td></tr><tr><td>count</td><td>需要写入的长度</td><td>输入</td></tr></tbody></table>
<p>【返回值】</p>
<table><thead><tr><th>返回值</th><th>描述</th></tr></thead><tbody><tr><td>-1</td><td>错误</td></tr><tr><td>0</td><td>未写入</td></tr><tr><td>正值</td><td>写入的字节数</td></tr></tbody></table>
<p>【需求】</p>
<ul>
<li>头文件：<code>unistd.h</code></li>
</ul>
<p>【注意】</p>
<p>无</p>
<p>【举例】</p>
<p><code>int n = write(fd, &amp;buf, num);</code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part7/17_K230ReferenceAPIsmall-coreLinuxdrivers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/CanaanK230/part7/K230Large-corelow-speeddriveAPIreference"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">K230大核低速驱动API参考</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/8常见问题-1"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">8.常见问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-概述" class="table-of-contents__link toc-highlight">1 概述</a><ul><li><a href="#11-概述" class="table-of-contents__link toc-highlight">1.1 概述</a></li><li><a href="#12-功能描述" class="table-of-contents__link toc-highlight">1.2 功能描述</a></li></ul></li><li><a href="#2-api参考" class="table-of-contents__link toc-highlight">2 API参考</a><ul><li><a href="#21-uart-api参考" class="table-of-contents__link toc-highlight">2.1 UART API参考</a></li><li><a href="#22-i2c-api参考" class="table-of-contents__link toc-highlight">2.2 I2C API参考</a></li><li><a href="#23-gpio-api参考" class="table-of-contents__link toc-highlight">2.3 GPIO API参考</a></li><li><a href="#24-hardlock-api参考" class="table-of-contents__link toc-highlight">2.4 Hardlock API参考</a></li><li><a href="#25-wadtchdog-api参考" class="table-of-contents__link toc-highlight">2.5 Wadtchdog API参考</a></li><li><a href="#26-otp-api-参考" class="table-of-contents__link toc-highlight">2.6 OTP API 参考</a></li><li><a href="#27-ts-api-参考" class="table-of-contents__link toc-highlight">2.7 TS API 参考</a></li><li><a href="#28-trng-api-参考" class="table-of-contents__link toc-highlight">2.8 TRNG API 参考</a></li><li><a href="#29-adc-api参考" class="table-of-contents__link toc-highlight">2.9 ADC API参考</a></li><li><a href="#210-pwm-api参考" class="table-of-contents__link toc-highlight">2.10 PWM API参考</a></li><li><a href="#211-open" class="table-of-contents__link toc-highlight">2.11 open</a></li><li><a href="#212-ioctl" class="table-of-contents__link toc-highlight">2.12 ioctl</a></li><li><a href="#213-read" class="table-of-contents__link toc-highlight">2.13 read</a></li><li><a href="#214-write" class="table-of-contents__link toc-highlight">2.14 write</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://dongshanpi.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">DongshanPI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://canaan-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Canaan-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://renesas-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Renesas-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://rtos.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">RTOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://tina.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TinaSDK-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://allwinner-docs.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Allwinner-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aw-r128.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">R128-Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://space.bilibili.com/275908810" target="_blank" rel="noopener noreferrer" class="footer__link-item">BiliBili<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://forums.100ask.net" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://video.100ask.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VideoCenter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/dongshanpi" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weidongshan.coding.net/public/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Coding<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/100askTeam" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitee.com/weidongshan" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>