"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7790],{1647:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>_,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=i(74848),t=i(28453);const r={sidebar_position:10},d="10. \u6e90\u7801\u7ea7\u5e94\u7528\u5f00\u53d1",a={id:"CanaanK230/part4/Source-levelapplicationdevelopment",title:"10. \u6e90\u7801\u7ea7\u5e94\u7528\u5f00\u53d1",description:"\u6ce8\uff1a",source:"@site/docs/CanaanK230/part4/10-Source-levelapplicationdevelopment.md",sourceDirName:"CanaanK230/part4",slug:"/CanaanK230/part4/Source-levelapplicationdevelopment",permalink:"/docs/CanaanK230/part4/Source-levelapplicationdevelopment",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part4/10-Source-levelapplicationdevelopment.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"canaanK230Sidebar",previous:{title:"9. \u4f7f\u7528AI Cube\u5f00\u53d1",permalink:"/docs/CanaanK230/part4/DevelopedwithAICube"},next:{title:"11. CanCollectorPlus",permalink:"/docs/CanaanK230/part4/CanCollectorPlus"}},o={},c=[{value:"10.1 \u4f7f\u7528KTS\u5b9e\u73b0\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1",id:"101-\u4f7f\u7528kts\u5b9e\u73b0\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1",level:2},{value:"10.1.1 \u73af\u5883\u642d\u5efa",id:"1011-\u73af\u5883\u642d\u5efa",level:3},{value:"10.1.2 \u6570\u636e\u51c6\u5907",id:"1012-\u6570\u636e\u51c6\u5907",level:3},{value:"10.1.3 \u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",id:"1013-\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",level:3},{value:"10.1.3.1 \u521b\u5efa\u865a\u62df\u73af\u5883",id:"10131-\u521b\u5efa\u865a\u62df\u73af\u5883",level:4},{value:"10.1.3.2 \u5b89\u88c5python\u4f9d\u8d56\u5e93",id:"10132-\u5b89\u88c5python\u4f9d\u8d56\u5e93",level:4},{value:"10.1.3.3 \u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",id:"10133-\u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",level:4},{value:"10.1.3.4 \u6a21\u578b\u8bad\u7ec3",id:"10134-\u6a21\u578b\u8bad\u7ec3",level:4},{value:"10.1.3.5 \u6a21\u578b\u6d4b\u8bd5",id:"10135-\u6a21\u578b\u6d4b\u8bd5",level:4},{value:"10.1.3.6 \u51c6\u5907\u6587\u4ef6",id:"10136-\u51c6\u5907\u6587\u4ef6",level:4},{value:"10.1.4 K230_SDK\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",id:"1014-k230_sdk\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",level:3},{value:"10.1.4.1 Docker\u73af\u5883\u642d\u5efa",id:"10141-docker\u73af\u5883\u642d\u5efa",level:4},{value:"10.1.4.2 \u955c\u50cf\u7f16\u8bd1",id:"10142-\u955c\u50cf\u7f16\u8bd1",level:4},{value:"10.1.4.3 \u955c\u50cf\u70e7\u5f55",id:"10143-\u955c\u50cf\u70e7\u5f55",level:4},{value:"10.1.4.4 \u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",id:"10144-\u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",level:4},{value:"10.1.5 C++\u4ee3\u7801\u7f16\u8bd1",id:"1015-c\u4ee3\u7801\u7f16\u8bd1",level:3},{value:"10.1.5.1 \u4ee3\u7801\u7ed3\u6784",id:"10151-\u4ee3\u7801\u7ed3\u6784",level:4},{value:"10.1.5.2 \u6838\u5fc3\u4ee3\u7801",id:"10152-\u6838\u5fc3\u4ee3\u7801",level:4},{value:"10.1.5.3 \u4ee3\u7801\u7f16\u8bd1",id:"10153-\u4ee3\u7801\u7f16\u8bd1",level:4},{value:"10.1.5.4 \u51c6\u5907ELF\u6587\u4ef6",id:"10154-\u51c6\u5907elf\u6587\u4ef6",level:4},{value:"10.1.6 \u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",id:"1016-\u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",level:3},{value:"10.1.6.1 \u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",id:"10161-\u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",level:4},{value:"10.1.6.2 tftp\u6587\u4ef6\u4f20\u8f93",id:"10162-tftp\u6587\u4ef6\u4f20\u8f93",level:4},{value:"10.1.6.2 scp\u6587\u4ef6\u4f20\u8f93",id:"10162-scp\u6587\u4ef6\u4f20\u8f93",level:4},{value:"10.1.7 K230\u7aef\u90e8\u7f72",id:"1017-k230\u7aef\u90e8\u7f72",level:3},{value:"10.1.7.1 \u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",id:"10171-\u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",level:4},{value:"10.1.7.2 \u4e0a\u677f\u90e8\u7f72\u6548\u679c",id:"10172-\u4e0a\u677f\u90e8\u7f72\u6548\u679c",level:4},{value:"10.2 \u4f7f\u7528KTS\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1",id:"102-\u4f7f\u7528kts\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1",level:2},{value:"10.2.1 \u73af\u5883\u642d\u5efa",id:"1021-\u73af\u5883\u642d\u5efa",level:3},{value:"10.2.2 \u6570\u636e\u51c6\u5907",id:"1022-\u6570\u636e\u51c6\u5907",level:3},{value:"10.2.3 \u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",id:"1023-\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",level:3},{value:"10.2.3.1 \u521b\u5efa\u865a\u62df\u73af\u5883",id:"10231-\u521b\u5efa\u865a\u62df\u73af\u5883",level:4},{value:"10.2.3.2 \u5b89\u88c5python\u4f9d\u8d56\u5e93",id:"10232-\u5b89\u88c5python\u4f9d\u8d56\u5e93",level:4},{value:"10.2.3.3 \u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",id:"10233-\u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",level:4},{value:"10.2.3.4 \u6a21\u578b\u8bad\u7ec3",id:"10234-\u6a21\u578b\u8bad\u7ec3",level:4},{value:"10.2.3.5 \u6a21\u578b\u6d4b\u8bd5",id:"10235-\u6a21\u578b\u6d4b\u8bd5",level:4},{value:"10.2.3.6 \u51c6\u5907\u6587\u4ef6",id:"10236-\u51c6\u5907\u6587\u4ef6",level:4},{value:"10.2.4 K230_SDK\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",id:"1024-k230_sdk\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",level:3},{value:"10.2.4.1 Docker\u73af\u5883\u642d\u5efa",id:"10241-docker\u73af\u5883\u642d\u5efa",level:4},{value:"10.2.4.2 \u955c\u50cf\u7f16\u8bd1",id:"10242-\u955c\u50cf\u7f16\u8bd1",level:4},{value:"10.2.4.3 \u955c\u50cf\u70e7\u5f55",id:"10243-\u955c\u50cf\u70e7\u5f55",level:4},{value:"10.2.4.4 \u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",id:"10244-\u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",level:4},{value:"10.2.5 C++\u4ee3\u7801\u7f16\u8bd1",id:"1025-c\u4ee3\u7801\u7f16\u8bd1",level:3},{value:"10.2.5.1 \u4ee3\u7801\u7ed3\u6784",id:"10251-\u4ee3\u7801\u7ed3\u6784",level:4},{value:"10.2.5.2 \u6838\u5fc3\u4ee3\u7801",id:"10252-\u6838\u5fc3\u4ee3\u7801",level:4},{value:"10.2.5.3 \u4ee3\u7801\u7f16\u8bd1",id:"10253-\u4ee3\u7801\u7f16\u8bd1",level:4},{value:"10.2.5.4 \u51c6\u5907ELF\u6587\u4ef6",id:"10254-\u51c6\u5907elf\u6587\u4ef6",level:4},{value:"10.2.6 \u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",id:"1026-\u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",level:3},{value:"10.2.6.1 \u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",id:"10261-\u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",level:4},{value:"10.2.6.2 tftp\u6587\u4ef6\u4f20\u8f93",id:"10262-tftp\u6587\u4ef6\u4f20\u8f93",level:4},{value:"10.2.6.2 scp\u6587\u4ef6\u4f20\u8f93",id:"10262-scp\u6587\u4ef6\u4f20\u8f93",level:4},{value:"10.2.7 K230\u7aef\u90e8\u7f72",id:"1027-k230\u7aef\u90e8\u7f72",level:3},{value:"10.2.7.1 \u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",id:"10271-\u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",level:4},{value:"10.2.7.2 \u4e0a\u677f\u90e8\u7f72\u6548\u679c",id:"10272-\u4e0a\u677f\u90e8\u7f72\u6548\u679c",level:4}];function p(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"10-\u6e90\u7801\u7ea7\u5e94\u7528\u5f00\u53d1",children:"10. \u6e90\u7801\u7ea7\u5e94\u7528\u5f00\u53d1"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6ce8\uff1a"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsxs)(e.strong,{children:["\u672c\u7ae0\u8282\u4f7f\u7528SDK1.1.0\u7248\u672c\u548cnncase2.4.0\u7248\u672c\u5b9e\u73b0\uff0c\u540e\u7eed\u66f4\u6539\u8bf7\u53c2\u8003: ",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts",children:"kendryte/K230_training_scripts (github.com)"})]}),"\u3002"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsxs)(e.strong,{children:["\u5f00\u53d1\u65f6\u9700\u8981\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\uff0ck230_sdk\u7248\u672c\u548cnncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u53c2\u8003\u94fe\u63a5\uff1a",(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/k230/dev/zh/03_other/K230_SDK_nncase%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html",children:"K230 SDK nncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb \u2014 K230 \u6587\u6863 (canaan-creative.com)"}),"\u3002"]})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.strong,{children:"\u76f8\u5173\u6559\u5b66\u89c6\u9891\uff0c\u89c1\u53c2\u8003\u7ae0\u8282\u94fe\u63a5\u3002"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e86KTS(k230_training_scripts)\u5de5\u5177\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u6a21\u578b\u4e0a\u677f\u90e8\u7f72\u8fc7\u7a0b\u3002KTS\u63d0\u4f9b\u4e86\u5206\u7c7b\u3001\u68c0\u6d4b\u3001\u7ffb\u8bd1\u3001\u5173\u952e\u8bcd\u5524\u9192\u5171\u56db\u4e2a\u4efb\u52a1\u4ece\u8bad\u7ec3\u5230\u90e8\u7f72\u7684\u6e90\u7801\uff0c\u8986\u76d6cv\u3001nlp\u3001\u8bed\u97f3\u7b49\u591a\u4e2a\u6a21\u6001\u3002\u7528\u6237\u5bf9\u6e90\u7801\u53ef\u89c1\uff0c\u611f\u5174\u8da3\u7684\u7528\u6237\u53ef\u4ee5\u5bf9\u6e90\u7801\u8fdb\u884c\u4fee\u6539\uff0c\u5b9e\u73b0\u66f4\u6362\u6570\u636e\u96c6\u3001\u66f4\u6362\u6a21\u578b\u7b49\u90e8\u5206\u3002\u672c\u5de5\u5177\u9002\u5408\u5bf9\u6df1\u5ea6\u5b66\u4e60\u7684\u4e0d\u540c\u6a21\u6001\u7684\u4efb\u52a1\u6709\u6bd4\u8f83\u6210\u719f\u7684\u4e86\u89e3\uff0c\u5e76\u5e0c\u671b\u4f7f\u7528k230\u5f00\u53d1\u677f\u5b8c\u6210\u90e8\u7f72\u7684\u7528\u6237\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"101-\u4f7f\u7528kts\u5b9e\u73b0\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1",children:"10.1 \u4f7f\u7528KTS\u5b9e\u73b0\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1"}),"\n",(0,s.jsxs)(e.p,{children:["k230_training_scripts(KTS)\u63d0\u4f9b\u4e86\u6e90\u7801\u7ea7\u7684\u8be6\u7ec6\u7684k230\u5f00\u53d1\u6848\u4f8b\uff0c\u8986\u76d6cv\u3001nlp\u548caudio\u76f8\u5173\u7684AI\u4efb\u52a1\u3002KTS\u7684github\u5730\u5740\uff1a",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts",children:"kendryte/K230_training_scripts (github.com)"}),"\u3002KTS\u76f8\u6bd4\u4e8e\u4e0a\u9762\u7684\u4e24\u4e2a\u5de5\u5177\u66f4\u4e3a\u7075\u6d3b\uff0c\u5bf9\u7528\u6237\u7684\u4ee3\u7801\u80fd\u529b\u8981\u6c42\u4e5f\u66f4\u9ad8\uff0c\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u4fee\u6539\u914d\u7f6e\u5bf9\u5e94\u6b65\u9aa4\uff0c\u7528\u6237\u53ef\u4ee5\u66f4\u6362\u6a21\u578b\uff0c\u8c03\u6574\u53c2\u6570\uff0c\u4ece\u6e90\u7801\u5b9e\u73b0k230\u5e94\u7528\u7684\u5feb\u901f\u5f00\u53d1\u548c\u90e8\u7f72\u3002"]}),"\n",(0,s.jsxs)(e.p,{children:["\u4f7f\u7528KTS\u8fdb\u884cAI\u5f00\u53d1\u9700\u8981\u5b9e\u73b0\u73af\u5883\u642d\u5efa\u3001\u6570\u636e\u51c6\u5907\u3001\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5\u3001CANMV k230\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55\u3001C++\u4ee3\u7801\u7f16\u8bd1\u3001\u7f51\u7edc\u914d\u7f6e\u548c\u6587\u4ef6\u4f20\u8f93\u3001k230\u7aef\u90e8\u7f72\u7b49\u73af\u8282\u3002\u4ee5\u852c\u83dc\u5206\u7c7b\u573a\u666f\u4e3a\u4f8b\uff0c\u4ee3\u7801\u53c2\u89c1:",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts/tree/main/end2end_cls_doc",children:"kendryte/K230_training_scripts"}),"\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"1011-\u73af\u5883\u642d\u5efa",children:"10.1.1 \u73af\u5883\u642d\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"\uff081\uff09Linux\u7cfb\u7edf\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff082\uff09\u5b89\u88c5\u663e\u5361\u9a71\u52a8\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff083\uff09\u5b89\u88c5Anaconda\uff0c\u7528\u4e8e\u521b\u5efa\u6a21\u578b\u8bad\u7ec3\u73af\u5883\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff084\uff09\u5b89\u88c5Docker\uff0c\u7528\u4e8e\u521b\u5efaSDK\u955c\u50cf\u7f16\u8bd1\u73af\u5883\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff085\uff09\u5b89\u88c5dotnet SDK;"}),"\n",(0,s.jsx)(e.h3,{id:"1012-\u6570\u636e\u51c6\u5907",children:"10.1.2 \u6570\u636e\u51c6\u5907"}),"\n",(0,s.jsx)(e.p,{children:"\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u6309\u7167\u5982\u4e0b\u56fe\u683c\u5f0f\u7ec4\u7ec7\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"dataset_frame",src:i(27473).A+"",width:"1214",height:"729"})}),"\n",(0,s.jsx)(e.p,{children:"\u6ce8\u610f\uff1a\u56fe\u50cf\u5206\u7c7b\u5fc5\u987b\u6309\u7167\u4e0a\u8ff0\u683c\u5f0f\u8fdb\u884c\u7ec4\u7ec7\u3002"}),"\n",(0,s.jsx)(e.h3,{id:"1013-\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",children:"10.1.3 \u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u5185\u5bb9\u5728\u8bad\u7ec3\u73af\u5883\u4e2d\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10131-\u521b\u5efa\u865a\u62df\u73af\u5883",children:"10.1.3.1 \u521b\u5efa\u865a\u62df\u73af\u5883"}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u542f\u547d\u4ee4\u7ec8\u7aef\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"conda create -n myenv python=3.9\nconda activate myenv\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10132-\u5b89\u88c5python\u4f9d\u8d56\u5e93",children:"10.1.3.2 \u5b89\u88c5python\u4f9d\u8d56\u5e93"}),"\n",(0,s.jsx)(e.p,{children:"\u6309\u7167\u9879\u76ee\u5185\u7684requriements.txt\u5b89\u88c5\u8bad\u7ec3\u6240\u7528\u7684python\u5e93,\u7b49\u5f85\u5b89\u88c5\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pip install -r requriements.txt\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728requriments.txt\u4e2d\u4f1a\u5b89\u88c5\u6a21\u578b\u8f6c\u6362\u7684\u5305nncase\u548cnncase-kpu\uff0cnncase \u662f\u4e00\u4e2a\u4e3a AI \u52a0\u901f\u5668\u8bbe\u8ba1\u7684\u795e\u7ecf\u7f51\u7edc\u7f16\u8bd1\u5668\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u955c\u50cf\u548c\u4f7f\u7528nncase\u8f6c\u6362kmodel\u65f6\u8bf7\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\uff0ck230_sdk\u7248\u672c\u548cnncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u53c2\u8003\u4e0b\u8ff0\u94fe\u63a5\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/k230/dev/zh/03_other/K230_SDK_nncase%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html",children:"K230 SDK nncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb \u2014 K230 \u6587\u6863 (canaan-creative.com)"})})}),"\n",(0,s.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u6309\u7167\u5bf9\u5e94\u7248\u672c\u66f4\u6362nncase\u548cnncase-kpu\u7684\u7248\u672c\uff0c\u6bd4\u5982\u66f4\u6362nncase\u7248\u672c\u4e3a2.7.0\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pip install nncase==2.7.0\npip install nncase-kpu==2.7.0\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10133-\u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",children:"10.1.3.3 \u914d\u7f6e\u8bad\u7ec3\u53c2\u6570"}),"\n",(0,s.jsx)(e.p,{children:"\u7ed9\u51fa\u7684\u8bad\u7ec3\u811a\u672c\u4e2d\u914d\u7f6e\u6587\u4ef6yaml/config.yaml\u8bbe\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"dataset:\n  root_folder: ../data/veg_cls # \u5206\u7c7b\u6570\u636e\u96c6\u8def\u5f84\n  split: true # \u662f\u5426\u91cd\u65b0\u6267\u884c\u62c6\u5206\uff0c\u7b2c\u4e00\u6b21\u6267\u884c\u5fc5\u987b\u4e3atrue\n  train_ratio: 0.7 # \u8bad\u7ec3\u96c6\u6bd4\u4f8b\n  val_ratio: 0.15 # \u9a8c\u8bc1\u96c6\u6bd4\u4f8b\n  test_ratio: 0.15 # \u6d4b\u8bd5\u96c6\u6bd4\u4f8b\n\ntrain:\n  device: cuda\n  txt_path: ../gen # \u62c6\u5206\u8fc7\u7a0b\u751f\u6210\u7684\u8bad\u7ec3\u96c6\u3001\u9a8c\u8bc1\u96c6\u3001\u6d4b\u8bd5\u96c6txt\u6587\u4ef6\uff0c\u6807\u7b7e\u540d\u79f0\u6587\u4ef6\u3001\u6821\u6b63\u96c6\u6587\u4ef6\n  image_size: [ 224,224 ] # \u5206\u8fa8\u7387\n  mean: [ 0.485, 0.456, 0.406 ]\n  std: [ 0.229, 0.224, 0.225 ]\n  epochs: 10\n  batchsize: 8\n  learningrate: 0.001\n  save_path: ../checkpoints # \u6a21\u578b\u4fdd\u5b58\u8def\u5f84\n\ninference:\n  mode: image # \u63a8\u7406\u6a21\u5f0f\uff0c\u5206\u4e3aimage\u548cvideo; image\u6a21\u5f0f\u4e0b\u53ef\u63a8\u7406\u5355\u5f20\u56fe\u7247\u548c\u76ee\u5f55\u4e0b\u6240\u6709\u56fe\u7247\uff0cvideo\u8c03\u7528\u6444\u50cf\u5934\u5b9e\u73b0\u63a8\u7406\n  inference_model: best # \u5206\u4e3abest\u548clast\uff0c\u5206\u522b\u8c03\u7528checkpoints\u4e0b\u7684best.pth\u548clast.pth\u8fdb\u884c\u63a8\u7406\n  images_path: ../data/veg_cls/bocai # \u5982\u679c\u8be5\u8def\u5f84\u4e3a\u56fe\u7247\u8def\u5f84\uff0c\u5219\u8fdb\u884c\u5355\u5f20\u56fe\u7247\u63a8\u7406\uff1b\u5982\u679c\u8be5\u8def\u5f84\u4e3a\u76ee\u5f55\uff0c\u5219\u5bf9\u76ee\u5f55\u4e0b\u6240\u6709\u56fe\u7247\u8fdb\u884c\u63a8\u7406\n\ndeploy:\n  chip: k230 # \u82af\u7247\u7c7b\u578b\uff0c\u5206\u4e3a\u201ck230\u201d\u548c\u201ccpu\u201d\u4e24\u79cd\n  ptq_option: 0 # \u91cf\u5316\u7c7b\u578b\uff0c0\u4e3auint8\uff0c1\uff0c2\uff0c3\uff0c4\u4e3auint16\u7684\u4e0d\u540c\u5f62\u5f0f\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10134-\u6a21\u578b\u8bad\u7ec3",children:"10.1.3.4 \u6a21\u578b\u8bad\u7ec3"}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165\u5230\u5de5\u7a0b\u7684scripts\u76ee\u5f55\uff0c\u6267\u884c\u8bad\u7ec3\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"python3 main.py\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u8bad\u7ec3\u6210\u529f\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u7684model_save_dir\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u8bad\u7ec3\u597d\u7684last.pth\u3001best.pth\u3001best.onnx\u3001best.kmodel\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10135-\u6a21\u578b\u6d4b\u8bd5",children:"10.1.3.5 \u6a21\u578b\u6d4b\u8bd5"}),"\n",(0,s.jsx)(e.p,{children:"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684inference\u90e8\u5206\uff0c\u8bbe\u7f6e\u6d4b\u8bd5\u914d\u7f6e\uff0c\u6267\u884c\u6d4b\u8bd5\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"python3 inference.py\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10136-\u51c6\u5907\u6587\u4ef6",children:"10.1.3.6 \u51c6\u5907\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:"\u540e\u9762\u90e8\u7f72\u6b65\u9aa4\u9700\u8981\u7528\u5230\u7684\u6587\u4ef6\u5305\u62ec\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\uff081\uff09checkpoints/best.kmodel;"}),"\n",(0,s.jsx)(e.p,{children:"\uff082\uff09gen/labels.txt;"}),"\n",(0,s.jsx)(e.p,{children:"\uff083\uff09\u5f85\u6d4b\u8bd5\u56fe\u7247test.jpg;"}),"\n",(0,s.jsx)(e.h3,{id:"1014-k230_sdk\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",children:"10.1.4 K230_SDK\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u955c\u50cf\u548c\u4f7f\u7528nncase\u8f6c\u6362kmodel\u65f6\u8bf7\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\uff0ck230_sdk\u7248\u672c\u548cnncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u53c2\u8003\u4e0b\u8ff0\u94fe\u63a5\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/k230/dev/zh/03_other/K230_SDK_nncase%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html",children:"K230 SDK nncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb \u2014 K230 \u6587\u6863 (canaan-creative.com)"})})}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528",(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/resource",children:"\u5609\u6960\u5f00\u53d1\u8005\u793e\u533a (canaan-creative.com)"}),"\u8d44\u6599\u4e0b\u8f7d->K230->Images\u90e8\u5206\u63d0\u4f9b\u7684\u955c\u50cf\uff0c\u8bf7\u60a8\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u4e0b\u8f7d\u70e7\u5f55\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"10141-docker\u73af\u5883\u642d\u5efa",children:"10.1.4.1 Docker\u73af\u5883\u642d\u5efa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4e0b\u8f7ddocker\u7f16\u8bd1\u955c\u50cf\ndocker pull ghcr.io/kendryte/k230_sdk\n# \u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u786e\u8ba4docker\u955c\u50cf\u662f\u5426\u62c9\u53d6\u6210\u529f\ndocker images | grep ghcr.io/kendryte/k230_sdk\n# \u4e0b\u8f7dsdk\u6e90\u7801\ngit clone https://github.com/kendryte/k230_sdk.git\ncd k230_sdk\n# \u4e0b\u8f7d\u5de5\u5177\u94feLinux\u548cRT-Smart toolchain, buildroot package, AI package\u7b49\nmake prepare_sourcecode\n# \u521b\u5efadocker\u5bb9\u5668\uff0c$(pwd):$(pwd)\u8868\u793a\u7cfb\u7edf\u5f53\u524d\u76ee\u5f55\u6620\u5c04\u5230docker\u5bb9\u5668\u5185\u90e8\u7684\u76f8\u540c\u76ee\u5f55\u4e0b\uff0c\u5c06\u7cfb\u7edf\u4e0b\u7684\u5de5\u5177\u94fe\u76ee\u5f55\u6620\u5c04\u5230docker\u5bb9\u5668\u5185\u90e8\u7684/opt/toolchain\u76ee\u5f55\u4e0b\ndocker run -u root -it -v $(pwd):$(pwd) -v $(pwd)/toolchain:/opt/toolchain -w $(pwd) ghcr.io/kendryte/k230_sdk /bin/bash\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10142-\u955c\u50cf\u7f16\u8bd1",children:"10.1.4.2 \u955c\u50cf\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u60a8\u4f7f\u7528\u5f00\u53d1\u8005\u793e\u533a\u4e0b\u8f7d\u7684\u955c\u50cf\uff0c\u8bf7\u5728k230_sdk\u6839\u76ee\u5f55\u4e0b\u6267\u884c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"make mpp\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8be5\u6b65\u9aa4\u76f8\u6bd4\u4e8e\u7f16\u8bd1\u955c\u50cf\u8017\u65f6\u8f83\u77ed\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u5f00\u53d1\u8005\u793e\u533a\u7684\u955c\u50cf\uff0c\u60f3\u4f53\u9a8c\u955c\u50cf\u7f16\u8bd1\u7684\u5b8c\u6574\u8fc7\u7a0b\uff0c\u8bf7\u5728k230_sdk\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u5728docker\u5bb9\u5668\u4e2d\u7f16\u8bd1\u955c\u50cf\u8017\u65f6\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5b8c\u6210\nmake CONF=k230_canmv_defconfig\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10143-\u955c\u50cf\u70e7\u5f55",children:"10.1.4.3 \u955c\u50cf\u70e7\u5f55"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u7ed3\u675f\u540e\u5728output/k230_canmv_defconfig/images\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u7f16\u8bd1\u597d\u7684\u955c\u50cf\u6587\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"k230_canmv_defconfig/images\n \u251c\u2500\u2500 big-core\n \u251c\u2500\u2500 little-core\n \u251c\u2500\u2500 sysimage-sdcard.img    # SD\u5361\u542f\u52a8\u955c\u50cf\n \u2514\u2500\u2500 sysimage-sdcard.img.gz # SD\u5361\u542f\u52a8\u955c\u50cf\u538b\u7f29\u5305\n"})}),"\n",(0,s.jsx)(e.p,{children:"CANMV K230 \u652f\u6301SDCard\u542f\u52a8\u65b9\u5f0f\u3002\u4e3a\u65b9\u4fbf\u5f00\u53d1\uff0c\u5efa\u8bae\u60a8\u51c6\u5907\u4e00\u5f20TF\u5361(Micro SD\u5361)\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Linux:"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728SD\u5361\u63d2\u5230\u5bbf\u4e3b\u673a\u4e4b\u524d\uff0c\u8f93\u5165\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"ls -l /dev/sd\\*\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d\u7684\u5b58\u50a8\u8bbe\u5907\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06TF\u5361\u63d2\u5165\u5bbf\u4e3b\u673a\u540e\uff0c\u518d\u6b21\u8f93\u5165\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"ls -l /dev/sd\\*\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u6b64\u65f6\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u65b0\u589e\u52a0\u7684\u5c31\u662fTF\u5361\u8bbe\u5907\u8282\u70b9\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe/dev/sdc\u5c31\u662fTF\u5361\u8bbe\u5907\u8282\u70b9\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u70e7\u5f55TF\u5361\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"sudo dd if=sysimage-sdcard.img of=/dev/sdc bs=1M oflag=sync\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Windows:"})}),"\n",(0,s.jsxs)(e.p,{children:["Windows\u4e0b\u53ef\u901a\u8fc7rufus\u5de5\u5177\u5bf9TF\u5361\u8fdb\u884c\u70e7\u5f55\uff0c",(0,s.jsx)(e.a,{href:"http://rufus.ie/downloads/",children:"rufus\u5de5\u5177\u4e0b\u8f7d\u5730\u5740"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"1\uff09\u5c06SD\u5361\u63d2\u5165PC\uff0c\u7136\u540e\u542f\u52a8rufus\u5de5\u5177\uff0c\u70b9\u51fb\u5de5\u5177\u754c\u9762\u7684\u201d\u9009\u62e9\u201d\u6309\u94ae\uff0c\u9009\u62e9\u5f85\u70e7\u5199\u7684\u56fa\u4ef6\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-flash-from-file",src:i(88021).A+"",width:"1533",height:"806"})}),"\n",(0,s.jsx)(e.p,{children:"2\uff09\u70b9\u51fb\u201c\u5f00\u59cb\u201d\u6309\u94ae\u5f00\u59cb\u70e7\u5199\uff0c\u70e7\u5199\u8fc7\u7a0b\u6709\u8fdb\u5ea6\u6761\u5c55\u793a\uff0c\u70e7\u5199\u7ed3\u675f\u540e\u4f1a\u63d0\u793a\u201c\u51c6\u5907\u5c31\u7eea\u201d\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-flash",src:i(32045).A+"",width:"591",height:"792"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-sure",src:i(44806).A+"",width:"682",height:"259"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-warning",src:i(44577).A+"",width:"685",height:"284"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus_finish",src:i(26284).A+"",width:"593",height:"804"})}),"\n",(0,s.jsx)(e.h4,{id:"10144-\u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",children:"10.1.4.4 \u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f"}),"\n",(0,s.jsxs)(e.p,{children:["\u5b89\u88c5MobaXterm\u5b9e\u73b0\u4e32\u53e3\u901a\u4fe1\uff0cMobaXterm\u4e0b\u8f7d\u5730\u5740:",(0,s.jsx)(e.a,{href:"https://mobaxterm.mobatek.net/",children:"https://mobaxterm.mobatek.net"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"CanMV-K230_debug",src:i(95093).A+"",width:"738",height:"531"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5c06\u70e7\u5f55\u5b8c\u6210\u7684SD\u5361\u63d2\u5165\u8fdb\u5f00\u677f\u677f\u5361\u69fd\u4e2d\uff0cHDMI\u8f93\u51fa\u8fde\u663e\u793a\u5668\uff0c\u767e\u5146\u7f51\u53e3\u8fde\u4ee5\u592a\u7f51\uff0cPOWER\u8fde\u4e32\u53e3\u5e76\u4f9b\u7535\u3002\u7cfb\u7edf\u4e0a\u7535\u540e\uff0c\u9ed8\u8ba4\u4f1a\u6709",(0,s.jsx)(e.strong,{children:"\u4e24\u4e2a\u4e32\u53e3\u8bbe\u5907"}),"\uff0c\u53ef\u5206\u522b\u7528\u4e8e\u8bbf\u95ee\u5c0f\u6838Linux\u548c\u5927\u6838RTSmart"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5c0f\u6838Linux\u9ed8\u8ba4\u7528\u6237\u540droot\uff0c\u5bc6\u7801\u4e3a\u7a7a\u3002\u5927\u6838RTSmart\u7cfb\u7edf\u4e2d\u5f00\u673a\u4f1a\u81ea\u52a8\u542f\u52a8\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u6309",(0,s.jsx)(e.code,{children:"q"}),"\u952e\u9000\u51fa\u81f3\u547d\u4ee4\u63d0\u793a\u7b26\u7ec8\u7aef\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"1015-c\u4ee3\u7801\u7f16\u8bd1",children:"10.1.5 C++\u4ee3\u7801\u7f16\u8bd1"}),"\n",(0,s.jsxs)(e.p,{children:["\u5b8c\u6210\u4e0a\u8ff0\u5f00\u53d1\u677f\u7684\u51c6\u5907\u5de5\u4f5c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528C++\u7f16\u5199\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u4e0b\u9762\u4ee5\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u4e3a\u4f8b\uff0c\u7ed9\u51fa\u76f8\u5173\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u5e76\u8fdb\u884c\u89e3\u6790\u3002\u793a\u4f8b\u4ee3\u7801\u53c2\u8003:",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts/tree/main/end2end_cls_doc/k230_code",children:"kendryte/K230_training_scripts"}),"\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"10151-\u4ee3\u7801\u7ed3\u6784",children:"10.1.5.1 \u4ee3\u7801\u7ed3\u6784"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"k230_code\n\u251c\u2500\u2500 cmake\n\u2502    \u251c\u2500\u2500 link.lds #\u94fe\u63a5\u811a\u672c\n\u2502    \u251c\u2500\u2500 Riscv64.cmake\n\u251c\u2500\u2500 k230_deploy\n\u2502    \u251c\u2500\u2500 ai_base.cc # \u6a21\u578b\u90e8\u7f72\u57fa\u7c7b\u5b9e\u73b0\n\u2502    \u251c\u2500\u2500 ai_base.h # \u6a21\u578b\u90e8\u7f72\u57fa\u7c7b\uff0c\u5c01\u88c5\u4e86nncase\u52a0\u8f7d\u3001input\u8bbe\u7f6e\u3001\u6a21\u578b\u63a8\u7406\u3001\u83b7\u53d6output\u64cd\u4f5c\uff0c\u540e\u7eed\u5177\u4f53\u4efb\u52a1\u5f00\u53d1\u53ea\u9700\u5173\u6ce8\u6a21\u578b\u7684\u524d\u5904\u7406\u3001\u540e\u5904\u7406\u5373\u53ef\n\u2502    \u251c\u2500\u2500 classification.cc # \u56fe\u50cf\u5206\u7c7bcode\u7c7b\u5b9e\u73b0\n\u2502    \u251c\u2500\u2500 classification.h # \u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u7c7b\u5b9a\u4e49\uff0c\u7ee7\u627fAIBase\uff0c\u7528\u4e8e\u5c01\u88c5\u6a21\u578b\u63a8\u7406\u7684\u524d\u540e\u5904\u7406\n\u2502    \u251c\u2500\u2500 main.cc # \u4e3b\u51fd\u6570\uff0c\u53c2\u6570\u89e3\u6790\uff0c\u521d\u59cb\u5316Classification\u7c7b\u793a\u4f8b\uff0c\u5b9e\u73b0\u4e0a\u677f\u529f\u80fd\n\u2502    \u251c\u2500\u2500 scoped_timing.hpp # \u65f6\u95f4\u6d4b\u8bd5\u5de5\u5177\n\u2502    \u251c\u2500\u2500 utils.cc # \u5de5\u5177\u7c7b\u5b9e\u73b0\n\u2502    \u251c\u2500\u2500 utils.h # \u5de5\u5177\u7c7b, \u5c01\u88c5\u4e86\u56fe\u50cf\u9884\u5904\u7406\u548c\u56fe\u50cf\u5206\u7c7b\u7684\u5e38\u7528\u51fd\u6570\uff0c\u5305\u62ec\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u4fdd\u5b58\u56fe\u7247\u3001\u56fe\u50cf\u5904\u7406\u3001\u7ed3\u679c\u7ed8\u5236\u7b49\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u5df1\u9700\u6c42\u4e30\u5bcc\u8be5\u6587\u4ef6\n\u2502    \u251c\u2500\u2500 vi_vo.h # \u89c6\u9891\u8f93\u5165\u8f93\u51fa\u5934\u6587\u4ef6\n\u2502    \u251c\u2500\u2500 CMakeLists.txt # CMake\u811a\u672c\u7528\u4e8e\u6784\u5efa\u4e00\u4e2a\u4f7f\u7528C/C++\u6e90\u6587\u4ef6\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u5230\u5404\u79cd\u5e93\n\u251c\u2500\u2500 build_app.sh # \u7f16\u8bd1\u811a\u672c\uff0c\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1k230_deploy\u5de5\u7a0b\n\u2514\u2500\u2500 CMakeLists.txt # CMake\u811a\u672c\u7528\u4e8e\u6784\u5efa nncase_sdk \u7684\u9879\u76ee\u5de5\u7a0b\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10152-\u6838\u5fc3\u4ee3\u7801",children:"10.1.5.2 \u6838\u5fc3\u4ee3\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u60a8\u5f97\u5230kmodel\u6a21\u578b\u4e4b\u540e\uff0c\u5177\u4f53AI\u4e0a\u677f\u4ee3\u7801\u5305\u62ec\uff1asensor&display\u521d\u59cb\u5316\u3001kmodel\u52a0\u8f7d\u3001\u6a21\u578b\u8f93\u5165\u8f93\u51fa\u8bbe\u7f6e\u3001\u83b7\u53d6\u56fe\u50cf\u3001\u8f93\u5165\u6570\u636e\u52a0\u8f7d\u3001\u8f93\u5165\u6570\u636e\u9884\u5904\u7406\u3001\u6a21\u578b\u63a8\u7406\u3001\u6a21\u578b\u8f93\u51fa\u83b7\u53d6\u3001\u8f93\u51fa\u540e\u5904\u7406\u3001OSD\u663e\u793a\u7b49\u6b65\u9aa4\u3002\u5982\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"img",src:i(83881).A+"",width:"1091",height:"316"})}),"\n",(0,s.jsx)(e.p,{children:"\u56fe\u4e2d\u9ec4\u6846\u90e8\u5206\u5728vi_vo.h\u4e2d\u7ed9\u51fa\u4e86\u7ed9\u51fa\u4e86\u63a5\u53e3\uff0c\u4e0b\u9762\u9488\u5bf9\u7ea2\u6846\u90e8\u5206\uff0c\u4ecb\u7ecd\u5982\u4f55\u5b9e\u73b0AI\u5e94\u7528\u5f00\u53d1\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4e0a\u8ff0\u8fc7\u7a0b\u4e2d\uff0ckmodel\u52a0\u8f7d\u3001\u6a21\u578b\u8f93\u5165\u8bbe\u7f6e\u3001\u6a21\u578b\u63a8\u7406\u3001\u6a21\u578b\u8f93\u51fa\u83b7\u53d6\u662f\u6240\u6709\u4efb\u52a1\u7684\u5171\u6709\u6b65\u9aa4\u3002\u6211\u4eec\u5bf9\u6b64\u505a\u4e86\u5c01\u88c5\uff0cai_base.h\u548cai_base.cc\u53ef\u4ee5\u76f4\u63a5\u62f7\u8d1d\u4f7f\u7528\u3002"}),"\n",(0,s.jsx)(e.p,{children:"ai_base.h\u5b9a\u4e49\u4e86AIBase\u57fa\u7c7b\u4ee5\u53ca\u5171\u6709\u64cd\u4f5c\u7684\u63a5\u53e3\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#ifndef AI_BASE_H\n#define AI_BASE_H\n#include <vector>\n#include <string>\n#include <fstream>\n#include <nncase/runtime/interpreter.h>\n#include "scoped_timing.hpp"\n\nusing std::string;\nusing std::vector;\nusing namespace nncase::runtime;\n\n/**\n * @brief AI\u57fa\u7c7b\uff0c\u5c01\u88c5nncase\u76f8\u5173\u64cd\u4f5c\n * \u4e3b\u8981\u5c01\u88c5\u4e86nncase\u7684\u52a0\u8f7d\u3001\u8bbe\u7f6e\u8f93\u5165\u3001\u8fd0\u884c\u3001\u83b7\u53d6\u8f93\u51fa\u64cd\u4f5c\uff0c\u540e\u7eed\u5f00\u53d1demo\u53ea\u9700\u8981\u5173\u6ce8\u6a21\u578b\u7684\u524d\u5904\u7406\u3001\u540e\u5904\u7406\u5373\u53ef\n */\nclass AIBase\n{\npublic:\n    /**\n     * @brief AI\u57fa\u7c7b\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\n     * @param kmodel_file kmodel\u6587\u4ef6\u8def\u5f84\n     * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09None\n     * @return None\n     */\n    AIBase(const char *kmodel_file,const string model_name, const int debug_mode = 1);\n    /**\n     * @brief AI\u57fa\u7c7b\u6790\u6784\u51fd\u6570\n     * @return None\n    */\n    ~AIBase();\n\n    /**\n     * @brief \u8bbe\u7f6ekmodel\u8f93\u5165\n     * @param buf \u8f93\u5165\u6570\u636e\u6307\u9488\n     * @param size \u8f93\u5165\u6570\u636e\u5927\u5c0f\n     * @return None\n     */\n    void set_input(const unsigned char *buf, size_t size);\n\n    /**\n     * @brief \u6839\u636e\u7d22\u5f15\u83b7\u53d6kmodel\u8f93\u5165tensor\n     * @param idx \u8f93\u5165\u6570\u636e\u7d22\u5f15\n     * @return None\n     */\n    runtime_tensor get_input_tensor(size_t idx);\n\n    /**\n     * @brief \u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165tensor\n     * @param idx \u8f93\u5165\u6570\u636e\u7d22\u5f15\n     * @param tensor \u8f93\u5165tensor\n     */\n    void set_input_tensor(size_t idx, runtime_tensor &tensor);\n\n    /**\n     * @brief \u521d\u59cb\u5316kmodel\u8f93\u51fa\n     * @return None\n     */\n    void set_output();\n\n    /**\n     * @brief \u63a8\u7406kmodel\n     * @return None\n     */\n    void run();\n\n    /**\n     * @brief \u83b7\u53d6kmodel\u8f93\u51fa\uff0c\u7ed3\u679c\u4fdd\u5b58\u5728\u5bf9\u5e94\u7684\u7c7b\u5c5e\u6027\u4e2d\n     * @return None\n     */\n    void get_output();\n\n\n\nprotected:\n    string model_name_;                    // \u6a21\u578b\u540d\u5b57\n    int debug_mode_;                       // \u8c03\u8bd5\u6a21\u578b\uff0c0\uff08\u4e0d\u6253\u5370\uff09\uff0c1\uff08\u6253\u5370\u65f6\u95f4\uff09\uff0c2\uff08\u6253\u5370\u6240\u6709\uff09\n    vector<float *> p_outputs_;            // kmodel\u8f93\u51fa\u5bf9\u5e94\u7684\u6307\u9488\u5217\u8868\n    vector<vector<int>> input_shapes_;     //{{N,C,H,W},{N,C,H,W}...}\n    vector<vector<int>> output_shapes_;    //{{N,C,H,W},{N,C,H,W}...}} \u6216 {{N,C},{N,C}...}}\u7b49\n    vector<int> each_input_size_by_byte_;  //{0,layer1_length,layer1_length+layer2_length,...}\n    vector<int> each_output_size_by_byte_; //{0,layer1_length,layer1_length+layer2_length,...}\n    \nprivate:\n    /**\n     * @brief \u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u5165\uff0c\u5e76\u83b7\u53d6\u8f93\u5165shape\n     * @return None\n     */\n    void set_input_init();\n\n    /**\n     * @brief \u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u51fa\uff0c\u5e76\u83b7\u53d6\u8f93\u51fashape\n     * @return None\n     */\n    void set_output_init();\n\n    vector<unsigned char> kmodel_vec_; // \u901a\u8fc7\u8bfb\u53d6kmodel\u6587\u4ef6\u5f97\u5230\u6574\u4e2akmodel\u6570\u636e\uff0c\u7528\u4e8e\u4f20\u7ed9kmodel\u89e3\u91ca\u5668\u52a0\u8f7dkmodel\n    interpreter kmodel_interp_; // kmodel\u89e3\u91ca\u5668\uff0c\u4ecekmodel\u6587\u4ef6\u6784\u5efa\uff0c\u8d1f\u8d23\u6a21\u578b\u7684\u52a0\u8f7d\u3001\u8f93\u5165\u8f93\u51fa\u8bbe\u7f6e\u548c\u63a8\u7406\n};\n#endif\n'})}),"\n",(0,s.jsx)(e.p,{children:"ai_base.cc\u662fai_base.h\u4e2d\u5b9a\u4e49\u6240\u6709\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'/*\nai_base.h\u4e2dAIBase\u7c7b\u5b9a\u4e49\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\n*/\n#include "ai_base.h"\n#include <iostream>\n#include <cassert>\n#include "utils.h"\n\nusing std::cout;\nusing std::endl;\nusing namespace nncase;\nusing namespace nncase::runtime::detail;\n\n/*AIBase\u6784\u9020\u51fd\u6570*/\nAIBase::AIBase(const char *kmodel_file,const string model_name, const int debug_mode) : debug_mode_(debug_mode),model_name_(model_name)\n{\n    if (debug_mode > 1)\n        cout << "kmodel_file:" << kmodel_file << endl;\n    std::ifstream ifs(kmodel_file, std::ios::binary);//\u8bfb\u5165kmodel\n    kmodel_interp_.load_model(ifs).expect("Invalid kmodel");//kmodel\u89e3\u91ca\u5668\u52a0\u8f7dkmodel\n    set_input_init();\n    set_output_init();\n}\n\n/*\u6790\u6784\u51fd\u6570*/\nAIBase::~AIBase()\n{\n}\n\n/*\n\u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u5165\n*/\nvoid AIBase::set_input_init()\n{\n    ScopedTiming st(model_name_ + " set_input init", debug_mode_);//\u8ba1\u65f6\n    int input_total_size = 0;\n    each_input_size_by_byte_.push_back(0); \n    for (int i = 0; i < kmodel_interp_.inputs_size(); ++i)\n    {\n        auto desc = kmodel_interp_.input_desc(i);//\u7d22\u5f15\u4e3ai\u7684\u8f93\u5165\u63cf\u8ff0\n        auto shape = kmodel_interp_.input_shape(i);//\u7d22\u5f15\u4e3ai\u7684\u8f93\u5165shape\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create input tensor");//\u521b\u5efa\u8f93\u5165tensor\n        kmodel_interp_.input_tensor(i, tensor).expect("cannot set input tensor");//\u7ed1\u5b9atensor\u5230\u6a21\u578b\u8f93\u5165\n        vector<int> in_shape = {shape[0], shape[1], shape[2], shape[3]};\n        input_shapes_.push_back(in_shape);//\u5b58\u50a8\u8f93\u5165shape\n        int dsize = shape[0] * shape[1] * shape[2] * shape[3];//\u8f93\u5165\u603b\u5b57\u8282\u6570\n        if (debug_mode_ > 1)\n            cout << "input shape:" << shape[0] << " " << shape[1] << " " << shape[2] << " " << shape[3] << endl;\n        if (desc.datatype == 0x06)//\u8f93\u5165\u6570\u636e\u4e3auint8\u7c7b\u578b\n        {\n            input_total_size += dsize;\n            each_input_size_by_byte_.push_back(input_total_size);\n        }\n        else if (desc.datatype == 0x0B)//\u8f93\u5165\u6570\u636e\u4e3afloat32\u7c7b\u578b\n        {\n            input_total_size += (dsize * 4);\n            each_input_size_by_byte_.push_back(input_total_size);\n        }\n        else\n            assert(("kmodel input data type supports only uint8, float32", 0));\n    }\n    each_input_size_by_byte_.push_back(input_total_size); // \u6700\u540e\u4e00\u4e2a\u4fdd\u5b58\u603b\u5927\u5c0f\n}\n\n/*\n\u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165\u6570\u636e,\u52a0\u8f7d\u6a21\u578b\u8f93\u5165\u7684\u5177\u4f53\u6570\u636e\n*/\nvoid AIBase::set_input(const unsigned char *buf, size_t size)\n{\n    //\u68c0\u67e5\u8f93\u5165\u6570\u636e\u5927\u5c0f\u662f\u5426\u548c\u6a21\u578b\u8981\u6c42\u5927\u5c0f\u76f8\u5339\u914d\n    if (*each_input_size_by_byte_.rbegin() != size)\n        cout << "set_input:the actual input size{" + std::to_string(size) + "} is different from the model\'s required input size{" + std::to_string(*each_input_size_by_byte_.rbegin()) + "}" << endl;\n    assert((*each_input_size_by_byte_.rbegin() == size));\n    //\u8ba1\u65f6\n    ScopedTiming st(model_name_ + " set_input", debug_mode_);\n    //\u5faa\u73af\u904d\u5386\u6a21\u578b\u8f93\u5165\n    for (size_t i = 0; i < kmodel_interp_.inputs_size(); ++i)\n    {\n        //\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u5165\u63cf\u8ff0\u548c\u5f62\u72b6\n        auto desc = kmodel_interp_.input_desc(i);\n        auto shape = kmodel_interp_.input_shape(i);\n        //\u521b\u5efatensor\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create input tensor");\n        //\u5c06\u8f93\u5165tensor\u6620\u5c04\u5230\u53ef\u5199\u533a\u57df\n        auto mapped_buf = std::move(hrt::map(tensor, map_access_::map_write).unwrap()); // mapped_buf\u5b9e\u9645\u662f\u6709\u7f13\u5b58\u6570\u636e\u7684\n        //\u62f7\u8d1d\u6570\u636e\u5230tensor\u7684\u7f13\u51b2\u533a\n        memcpy(reinterpret_cast<void *>(mapped_buf.buffer().data()), buf, each_input_size_by_byte_[i + 1] - each_input_size_by_byte_[i]);\n        //\u89e3\u9664\u6620\u5c04\n        auto ret = mapped_buf.unmap();\n        ret = hrt::sync(tensor, sync_op_t::sync_write_back, true);\n        if (!ret.is_ok())\n        {\n            std::cerr << "hrt::sync failed" << std::endl;\n            std::abort();\n        }\n        //\u5c06tensor\u548c\u6a21\u578b\u7684\u8f93\u5165\u7ed1\u5b9a\n        kmodel_interp_.input_tensor(i, tensor).expect("cannot set input tensor");\n    }\n}\n\n/*\n\u6309\u7167\u7d22\u5f15\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u5165tensor\n*/\nruntime_tensor AIBase::get_input_tensor(size_t idx)\n{\n    return kmodel_interp_.input_tensor(idx).expect("cannot get input tensor");\n}\n\n/*\n\u6309\u7167\u7d22\u5f15\u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165tensor\n*/\nvoid AIBase::set_input_tensor(size_t idx, runtime_tensor &tensor)\n{\n    ScopedTiming st(model_name_ + " set_input_tensor", debug_mode_);\n    kmodel_interp_.input_tensor(idx, tensor).expect("cannot set input tensor");\n}\n\n/*\n\u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u51fa\n*/\nvoid AIBase::set_output_init()\n{\n    //\u8ba1\u65f6\n    ScopedTiming st(model_name_ + " set_output_init", debug_mode_);\n    each_output_size_by_byte_.clear();\n    int output_total_size = 0;\n    each_output_size_by_byte_.push_back(0);\n    //\u5faa\u73af\u904d\u5386\u6a21\u578b\u7684\u8f93\u51fa\n    for (size_t i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        //\u83b7\u53d6\u8f93\u51fa\u63cf\u8ff0\u548c\u5f62\u72b6\n        auto desc = kmodel_interp_.output_desc(i);\n        auto shape = kmodel_interp_.output_shape(i);\n        vector<int> out_shape;\n        int dsize = 1;\n        for (int j = 0; j < shape.size(); ++j)\n        {\n            out_shape.push_back(shape[j]);\n            dsize *= shape[j];\n            if (debug_mode_ > 1)\n                cout << shape[j] << ",";\n        }\n        if (debug_mode_ > 1)\n            cout << endl;\n        output_shapes_.push_back(out_shape);\n        //\u83b7\u53d6\u6570\u636e\u7684\u603b\u5927\u5c0f\n        if (desc.datatype == 0x0B)\n        {\n            output_total_size += (dsize * 4);\n            each_output_size_by_byte_.push_back(output_total_size);\n        }\n        else\n            assert(("kmodel output data type supports only float32", 0));\n        //\u521b\u5efatensor\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create output tensor");\n        //\u5c06tensor\u548c\u6a21\u578b\u7684\u8f93\u51fa\u7ed1\u5b9a\n        kmodel_interp_.output_tensor(i, tensor).expect("cannot set output tensor");\n    }\n}\n\n/*\n\u8bbe\u7f6ekmodel\u6a21\u578b\u7684\u8f93\u51fa\n*/\nvoid AIBase::set_output()\n{\n    ScopedTiming st(model_name_ + " set_output", debug_mode_);\n    //\u5faa\u73af\u5c06\u8f93\u51fatensor\u548c\u6a21\u578b\u7684\u8f93\u51fa\u7ed1\u5b9a\n    for (size_t i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        auto desc = kmodel_interp_.output_desc(i);\n        auto shape = kmodel_interp_.output_shape(i);\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create output tensor");\n        kmodel_interp_.output_tensor(i, tensor).expect("cannot set output tensor");\n    }\n}\n\n/*\n\u8c03\u7528kmodel_interp_.run()\u5b9e\u73b0\u6a21\u578b\u63a8\u7406\n*/\nvoid AIBase::run()\n{\n    ScopedTiming st(model_name_ + " run", debug_mode_);\n    kmodel_interp_.run().expect("error occurred in running model");\n}\n\n/*\n\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u51fa(float\u6307\u9488\u5f62\u5f0f\uff0c\u540e\u5904\u7406\u65f6\u7531\u540e\u5904\u7406\u7684\u5177\u4f53\u8981\u6c42\u53d6\u51fa)\uff0c\u4e3a\u540e\u7eed\u540e\u5904\u7406\u505a\u51c6\u5907\n*/\nvoid AIBase::get_output()\n{\n    ScopedTiming st(model_name_ + " get_output", debug_mode_);\n    //p_outputs_\u5b58\u50a8\u6a21\u578b\u7684\u8f93\u51fa\u7684\u6307\u9488\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u8f93\u51fa\n    p_outputs_.clear();\n    for (int i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        //\u83b7\u53d6\u8f93\u51fatensor\n        auto out = kmodel_interp_.output_tensor(i).expect("cannot get output tensor");\n        //\u5c06\u8f93\u51fatensor\u6620\u5c04\u5230\u4e3b\u673a\u5185\u5b58\n        auto buf = out.impl()->to_host().unwrap()->buffer().as_host().unwrap().map(map_access_::map_read).unwrap().buffer();\n        //\u5c06\u6620\u5c04\u540e\u7684\u6570\u636e\u8f6c\u6362\u4e3afloat\u6307\u9488\n        float *p_out = reinterpret_cast<float *>(buf.data());\n        p_outputs_.push_back(p_out);\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u540c\u4efb\u52a1\u573a\u666f\u7684\u524d\u5904\u7406\u548c\u540e\u5904\u7406\u6709\u6240\u4e0d\u540c\uff0c\u6bd4\u5982\u5206\u7c7b\u4f7f\u7528softmax\u8ba1\u7b97\u7c7b\u522b\u6982\u7387\uff0c\u76ee\u6807\u68c0\u6d4b\u8981\u505anms\uff1b\u56e0\u6b64\u60a8\u53ef\u4ee5\u5b9a\u4e49\u60a8\u7684\u4efb\u52a1\u573a\u666f\u7c7b\u7ee7\u627fAIBase\u7c7b\uff0c\u5c06\u9488\u5bf9\u8be5\u4efb\u52a1\u7684\u524d\u5904\u7406\u548c\u540e\u5904\u7406\u4ee3\u7801\u8fdb\u884c\u5c01\u88c5\u3002\u4ee5\u56fe\u50cf\u5206\u7c7b\u4e3a\u4f8b\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"classification.h\u4e2d\u7684Classification\u7c7b\u7ee7\u627f\u81eaAIBase\u7c7b\uff0c\u5b9e\u73b0\u4e86\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u7684\u7c7b\u5b9a\u4e49\uff0c\u4e3b\u8981\u5b9a\u4e49\u4e86\u56fe\u50cf\u5206\u7c7b\u6a21\u578b\u7684\u524d\u5904\u7406\u3001\u63a8\u7406\u3001\u540e\u5904\u7406\u63a5\u53e3\u3002\u521d\u59cb\u5316ai2d\u6784\u5efa\u5668\u5b9e\u73b0\u56fe\u50cf\u9884\u5904\u7406\u3002\u8fd8\u5b9a\u4e49\u4e86\u4e00\u4e9b\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u7684\u53d8\u91cf\uff0c\u6bd4\u5982\u5206\u7c7b\u9608\u503c\u3001\u7c7b\u522b\u540d\u79f0\u3001\u7c7b\u522b\u6570\u7b49\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#ifndef _CLASSIFICATION_H\n#define _CLASSIFICATION_H\n#include "utils.h"\n#include "ai_base.h" \n\n/**\n * @brief \u5206\u7c7b\u4efb\u52a1\n * \u4e3b\u8981\u5c01\u88c5\u4e86\u5bf9\u4e8e\u6bcf\u4e00\u5e27\u56fe\u7247\uff0c\u4ece\u9884\u5904\u7406\u3001\u8fd0\u884c\u5230\u540e\u5904\u7406\u7ed9\u51fa\u7ed3\u679c\u7684\u8fc7\u7a0b\n */\nclass Classification : public AIBase\n{\n    public:\n    /**\n    * @brief Classification\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\u5206\u7c7b\u9608\u503c\n    * @param kmodel_path kmodel\u8def\u5f84\n    * @param image_path \u63a8\u7406\u56fe\u7247\u8def\u5f84\uff08\u9759\u6001\u56fe\u4f7f\u7528\uff09\n    * @param labels \u7c7b\u522b\u540d\u79f0\u5217\u8868\n    * @param cls_thresh \u5206\u7c7b\u9608\u503c\n    * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09\n    * @return None\n    */\n    Classification(string &kmodel_path, string &image_path,std::vector<std::string> labels, float cls_thresh,const int debug_mode);\n\n    /**\n    * @brief Classification\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\u5206\u7c7b\u9608\u503c\n    * @param kmodel_path kmodel\u8def\u5f84\n    * @param image_path  \u63a8\u7406\u56fe\u7247\u8def\u5f84\uff08\u9759\u6001\u56fe\u4f7f\u7528\uff09\n    * @param labels      \u7c7b\u522b\u540d\u79f0\u5217\u8868\n    * @param cls_thresh  \u5206\u7c7b\u9608\u503c\n    * @param isp_shape   isp\u8f93\u5165\u5927\u5c0f\uff08chw\uff09\n    * @param vaddr       isp\u5bf9\u5e94\u865a\u62df\u5730\u5740\n    * @param paddr       isp\u5bf9\u5e94\u7269\u7406\u5730\u5740\n    * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09\n    * @return None\n    */\n    Classification(string &kmodel_path, string &image_path,std::vector<std::string> labels,float cls_thresh, FrameCHWSize isp_shape, uintptr_t vaddr, uintptr_t paddr,const int debug_mode);\n    \n    /**\n    * @brief Classification\u6790\u6784\u51fd\u6570\n    * @return None\n    */\n    ~Classification();\n\n    /**\n    * @brief \u9759\u6001\u56fe\u7247\u9884\u5904\u7406\n    * @param ori_img \u539f\u59cb\u56fe\u7247\n    * @return None\n    */\n    void pre_process(cv::Mat ori_img);\n\n    /**\n    * @brief \u89c6\u9891\u6d41\u9884\u5904\u7406\uff08ai2d for isp\uff09\n    * @return None\n    */\n    void pre_process();\n\n    /**\n    * @brief kmodel\u63a8\u7406\n    * @return None\n    */\n    void inference();\n\n    /**\n    * @brief kmodel\u63a8\u7406\u7ed3\u679c\u540e\u5904\u7406\n    * @param results \u540e\u5904\u7406\u4e4b\u540e\u7684\u57fa\u4e8e\u539f\u59cb\u56fe\u50cf\u7684\u5206\u7c7b\u7ed3\u679c\u96c6\u5408\n    * @return None\n    */\n    void post_process(vector<cls_res> &results);\n    \n    private:\n\n    /**\n    * @brief \u8ba1\u7b97exp\n    * @param x \u81ea\u53d8\u91cf\u503c\n    * @return \u8fd4\u56de\u8ba1\u7b97exp\u540e\u7684\u7ed3\u679c\n    */\n    float fast_exp(float x);\n\n    /**\n    * @brief \u8ba1\u7b97sigmoid\n    * @param x \u81ea\u53d8\u91cf\u503c\n    * @return \u8fd4\u56de\u8ba1\u7b97sigmoid\u540e\u7684\u7ed3\u679c\n    */\n    float sigmoid(float x);\n\n    std::unique_ptr<ai2d_builder> ai2d_builder_; // ai2d\u6784\u5efa\u5668\n    runtime_tensor ai2d_in_tensor_;              // ai2d\u8f93\u5165tensor\n    runtime_tensor ai2d_out_tensor_;             // ai2d\u8f93\u51fatensor\n    uintptr_t vaddr_;                            // isp\u7684\u865a\u62df\u5730\u5740\n    FrameCHWSize isp_shape_;                     // isp\u5bf9\u5e94\u7684\u5730\u5740\u5927\u5c0f\n\n    float cls_thresh;      //\u5206\u7c7b\u9608\u503c\n    vector<string> labels; //\u7c7b\u522b\u540d\u5b57\n    int num_class;         //\u7c7b\u522b\u6570\n\n    float* output;         //\u8bfb\u53d6kmodel\u8f93\u51fa\uff0cfloat\u6307\u9488\u7c7b\u578b\n};\n#endif\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5728classification.cc\u4e2d\u5b9e\u73b0\u4e0a\u8ff0\u63a5\u53e3\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#include "classification.h"\n\n/*\n\u9759\u6001\u56fe\u63a8\u7406\uff0c\u6784\u9020\u51fd\u6570\n*/\nClassification::Classification(std::string &kmodel_path, std::string &image_path,std::vector<std::string> labels_,float cls_thresh_,const int debug_mode)\n:AIBase(kmodel_path.c_str(),"Classification", debug_mode)\n{   \n    cls_thresh=cls_thresh_;\n    labels=labels_;\n    num_class = labels.size();\n    ai2d_out_tensor_ = this -> get_input_tensor(0);//\u7ee7\u627f\u81eaAIBase\u7684\u63a5\u53e3\n}\n\n/*\n\u89c6\u9891\u6d41\u63a8\u7406\uff0c\u6784\u9020\u51fd\u6570\n*/\nClassification::Classification(std::string &kmodel_path, std::string &image_path,std::vector<std::string> labels_,float cls_thresh_, FrameCHWSize isp_shape, uintptr_t vaddr, uintptr_t paddr,const int debug_mode)\n:AIBase(kmodel_path.c_str(),"Classification", debug_mode)\n{\n    cls_thresh=cls_thresh_;\n    labels=labels_;\n    num_class = labels.size();\n    vaddr_ = vaddr;\n    isp_shape_ = isp_shape;\n    dims_t in_shape{1, isp_shape.channel, isp_shape.height, isp_shape.width};\n    ai2d_in_tensor_ = hrt::create(typecode_t::dt_uint8, in_shape, hrt::pool_shared).expect("create ai2d input tensor failed");\n    ai2d_out_tensor_ = this -> get_input_tensor(0);\n    Utils::resize(ai2d_builder_, ai2d_in_tensor_, ai2d_out_tensor_);\n}\n\n/*\n\u6790\u6784\u51fd\u6570\n*/\nClassification::~Classification()\n{\n}\n\n/*\n\u9759\u6001\u56fe\u9884\u5904\u7406\u51fd\u6570\n*/\nvoid Classification::pre_process(cv::Mat ori_img)\n{\n    //\u8ba1\u65f6\n    ScopedTiming st(model_name_ + " pre_process image", debug_mode_);\n    std::vector<uint8_t> chw_vec;\n    //bgr\u8f6crgb,hwc\u8f6cchw\n    Utils::bgr2rgb_and_hwc2chw(ori_img, chw_vec);\n    //resize\n    Utils::resize({ori_img.channels(), ori_img.rows, ori_img.cols}, chw_vec, ai2d_out_tensor_);\n}\n\n/*\n\u89c6\u9891\u6d41\u9884\u5904\u7406\uff0c\u5177\u4f53\u53c2\u89c1ai2d\u5e94\u7528\u90e8\u5206\n*/\nvoid Classification::pre_process()\n{\n    ScopedTiming st(model_name_ + " pre_process video", debug_mode_);\n    size_t isp_size = isp_shape_.channel * isp_shape_.height * isp_shape_.width;\n    auto buf = ai2d_in_tensor_.impl()->to_host().unwrap()->buffer().as_host().unwrap().map(map_access_::map_write).unwrap().buffer();\n    memcpy(reinterpret_cast<char *>(buf.data()), (void *)vaddr_, isp_size);\n    hrt::sync(ai2d_in_tensor_, sync_op_t::sync_write_back, true).expect("sync write_back failed");\n    ai2d_builder_->invoke(ai2d_in_tensor_, ai2d_out_tensor_).expect("error occurred in ai2d running");\n}\n\n/*\n\u63a8\u7406\u51fd\u6570\uff0crun()\u548cget_output()\u7ee7\u627f\u81eaAIBase\n*/\nvoid Classification::inference()\n{\n    this->run();\n    this->get_output();\n}\n\n/*\n\u540e\u5904\u7406\u8ba1\u7b97 exp\n*/\nfloat Classification::fast_exp(float x)\n{\n    union {\n        uint32_t i;\n        float f;\n    } v{};\n    v.i = (1 << 23) * (1.4426950409 * x + 126.93490512f);\n    return v.f;\n}\n\n/*\n\u540e\u5904\u7406\u8ba1\u7b97 sigmoid\n*/\nfloat Classification::sigmoid(float x)\n{\n    return 1.0f / (1.0f + fast_exp(-x));\n}\n\n/*\n\u540e\u5904\u7406\u51fd\u6570\n*/\nvoid Classification::post_process(vector<cls_res> &results)\n{\n    ScopedTiming st(model_name_ + " post_process", debug_mode_);\n    //p_outputs_\u4e2d\u5b58\u653e\u7684\u662ffloat\u7c7b\u578b\u6307\u9488\uff0c\u6307\u5411\u8f93\u51fa\n    output = p_outputs_[0];\n    cls_res b;\n    //\u5982\u679c\u662f\u591a\u5206\u7c7b\n    if(num_class > 2){\n        float sum = 0.0;\n        for (int i = 0; i < num_class; i++){\n            sum += exp(output[i]);\n        }\n        b.score = cls_thresh;\n        int max_index;\n        //softmax\u5904\u7406\n        for (int i = 0; i < num_class; i++)\n        {\n            output[i] = exp(output[i]) / sum;\n        }\n        max_index = max_element(output,output+num_class) - output; \n        if (output[max_index] >= b.score)\n        {\n            b.label = labels[max_index];\n            b.score = output[max_index];\n            results.push_back(b);\n        }\n    }\n    else// 2\u5206\u7c7b\n    {\n        float pre = sigmoid(output[0]);\n        if (pre > cls_thresh)\n        {\n            b.label = labels[0];\n            b.score = pre;\n        }\n        else{\n            b.label = labels[1];\n            b.score = 1 - pre;\n        }\n        results.push_back(b);\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4e0a\u8ff0\u4ee3\u7801\u4e2d\u7684\u9884\u5904\u7406\u90e8\u5206\uff0c\u4f7f\u7528\u4e86\u4e00\u4e9b\u5de5\u5177\u51fd\u6570\uff0c\u6211\u4eec\u5c06\u5176\u5c01\u88c5\u5728utils.h\u4e2d\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"#ifndef UTILS_H\n#define UTILS_H\n#include <algorithm>\n#include <vector>\n#include <iostream>\n#include <fstream>\n#include <opencv2/core.hpp>\n#include <opencv2/highgui.hpp>\n#include <opencv2/imgcodecs.hpp>\n#include <opencv2/imgproc.hpp>\n#include <nncase/functional/ai2d/ai2d_builder.h>\n#include <string>\n#include <string.h>\n#include <cmath>\n#include <stdio.h>\n#include <stdlib.h>\n#include <sys/types.h>\n#include <sys/stat.h>\n#include <fcntl.h>\n#include <sys/ioctl.h>\n#include <unistd.h>\n#include <stdint.h>\n#include <random>\n\n\nusing namespace nncase;\nusing namespace nncase::runtime;\nusing namespace nncase::runtime::k230;\nusing namespace nncase::F::k230;\n\n\nusing namespace std;\nusing namespace cv;\nusing cv::Mat;\nusing std::cout;\nusing std::endl;\nusing std::ifstream;\nusing std::vector;\n\n#define STAGE_NUM 3\n#define STRIDE_NUM 3\n#define LABELS_NUM 1\n\n/**\n * @brief \u5206\u7c7b\u7ed3\u679c\u7ed3\u6784\n */\ntypedef struct cls_res\n{\n    float score;//\u5206\u7c7b\u5206\u6570\n    string label;//\u5206\u7c7b\u6807\u7b7e\u7ed3\u679c\n}cls_res;\n\n/**\n * @brief \u5355\u5f20/\u5e27\u56fe\u7247\u5927\u5c0f\n */\ntypedef struct FrameSize\n{\n    size_t width;  // \u5bbd\n    size_t height; // \u9ad8\n} FrameSize;\n\n/**\n * @brief \u5355\u5f20/\u5e27\u56fe\u7247\u5927\u5c0f\n */\ntypedef struct FrameCHWSize\n{\n    size_t channel; // \u901a\u9053\n    size_t height;  // \u9ad8\n    size_t width;   // \u5bbd\n} FrameCHWSize;\n\n/**\n * @brief AI\u5de5\u5177\u7c7b\n * \u5c01\u88c5AI\u5e38\u7528\u7684\u51fd\u6570\uff0c\u5305\u62ec\u4e8c\u8fdb\u5236\u6587\u4ef6\u8bfb\u53d6\u3001\u6587\u4ef6\u4fdd\u5b58\u3001\u56fe\u7247\u9884\u5904\u7406\u7b49\u64cd\u4f5c\n */\nclass Utils\n{\npublic:\n    /**\n     * @brief \u5bf9\u56fe\u7247resize\n     * @param ori_img             \u539f\u59cb\u56fe\u7247\n     * @param frame_size      \u9700\u8981resize\u56fe\u50cf\u7684\u5bbd\u9ad8\n     * @param padding         \u9700\u8981padding\u7684\u50cf\u7d20\uff0c\u9ed8\u8ba4\u662fcv::Scalar(104, 117, 123),BGR\n     * @return                \u5904\u7406\u540e\u56fe\u50cf\n     */\n    static cv::Mat resize(const cv::Mat ori_img, const FrameSize &frame_size);\n\n\n    /**\n     * @brief \u5c06BGR\u56fe\u7247\u4ecehwc\u8f6c\u4e3achw\n     * @param ori_img          \u539f\u59cb\u56fe\u7247\n     * @param chw_vec          \u8f6c\u4e3achw\u540e\u7684\u6570\u636e\n     * @return None\n     */\n    static void bgr2rgb_and_hwc2chw(cv::Mat &ori_img, std::vector<uint8_t> &chw_vec);\n\n    /*************************for ai2d ori_img process********************/\n    // resize\n    /**\n     * @brief resize\u51fd\u6570\uff0c\u5bf9chw\u6570\u636e\u8fdb\u884cresize\n     * @param ori_shape        \u539f\u59cb\u6570\u636echw\n     * @param chw_vec          \u539f\u59cb\u6570\u636e\n     * @param ai2d_out_tensor  ai2d\u8f93\u51fa\n     * @return None\n     */\n    static void resize(FrameCHWSize ori_shape, std::vector<uint8_t> &chw_vec, runtime_tensor &ai2d_out_tensor);\n\n    /**\n     * @brief resize\u51fd\u6570\n     * @param builder          ai2d\u6784\u5efa\u5668\uff0c\u7528\u4e8e\u8fd0\u884cai2d\n     * @param ai2d_in_tensor   ai2d\u8f93\u5165\n     * @param ai2d_out_tensor  ai2d\u8f93\u51fa\n     * @return None\n     */\n    static void resize(std::unique_ptr<ai2d_builder> &builder, runtime_tensor &ai2d_in_tensor, runtime_tensor &ai2d_out_tensor);\n\n    /**\n     * @brief \u5c06\u5206\u7c7b\u4efb\u52a1\u7684\u7ed3\u679c\u7ed8\u5236\u5230\u56fe\u50cf\u4e0a\n     * @param frame         \u539f\u59cb\u56fe\u50cf\n     * @param results       \u5206\u7c7b\u7684\u7ed3\u679c\n     * @return None\n     */\n    static void draw_cls_res(cv::Mat& frame, vector<cls_res>& results);\n\n    /**\n     * @brief \u5c06\u5206\u7c7b\u4efb\u52a1\u7684\u7ed3\u679c\u7ed8\u5236\u5230\u5c4f\u5e55\u7684osd\u4e2d\n     * @param frame                 \u539f\u59cb\u56fe\u50cf\n     * @param results               \u5206\u7c7b\u7684\u7ed3\u679c\n     * @param osd_frame_size        osd\u7684\u5bbd\u9ad8\n     * @param sensor_frame_size     sensor\u7684\u5bbd\u9ad8\n     * @return None\n     */\n    static void draw_cls_res(cv::Mat& frame, vector<cls_res>& results, FrameSize osd_frame_size, FrameSize sensor_frame_size);\n};\n#endif\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u60a8\u6709\u9700\u8981\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u5176\u4ed6\u7684\u5de5\u5177\u51fd\u6570\u3002\u4e0b\u9762\u662futils.cc\u6587\u4ef6\uff0c\u5b8c\u6210\u5de5\u5177\u7c7b\u63a5\u53e3\u7684\u5b9e\u73b0\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#include <iostream>\n#include "utils.h"\n\nusing std::ofstream;\nusing std::vector;\n\nauto cache = cv::Mat::zeros(1, 1, CV_32FC1);\n\ncv::Mat Utils::resize(const cv::Mat img, const FrameSize &frame_size)\n{\n    cv::Mat cropped_img;\n    cv::resize(img, cropped_img, cv::Size(frame_size.width, frame_size.height), cv::INTER_LINEAR);\n    return cropped_img;\n}\n\nvoid Utils::bgr2rgb_and_hwc2chw(cv::Mat &ori_img, std::vector<uint8_t> &chw_vec)\n{\n    // for bgr format\n    std::vector<cv::Mat> bgrChannels(3);\n    cv::split(ori_img, bgrChannels);\n    for (auto i = 2; i > -1; i--)\n    {\n        std::vector<uint8_t> data = std::vector<uint8_t>(bgrChannels[i].reshape(1, 1));\n        chw_vec.insert(chw_vec.end(), data.begin(), data.end());\n    }\n}\n\nvoid Utils::resize(FrameCHWSize ori_shape, std::vector<uint8_t> &chw_vec, runtime_tensor &ai2d_out_tensor)\n{\n    // build ai2d_in_tensor\n    dims_t in_shape{1, ori_shape.channel, ori_shape.height, ori_shape.width};\n    runtime_tensor ai2d_in_tensor = host_runtime_tensor::create(typecode_t::dt_uint8, in_shape, hrt::pool_shared).expect("cannot create input tensor");\n\n    auto input_buf = ai2d_in_tensor.impl()->to_host().unwrap()->buffer().as_host().unwrap().map(map_access_::map_write).unwrap().buffer();\n    memcpy(reinterpret_cast<char *>(input_buf.data()), chw_vec.data(), chw_vec.size());\n    hrt::sync(ai2d_in_tensor, sync_op_t::sync_write_back, true).expect("write back input failed");\n\n    // run ai2d\n    // ai2d_datatype_t ai2d_dtype{ai2d_format::NCHW_FMT, ai2d_format::NCHW_FMT, typecode_t::dt_uint8, typecode_t::dt_uint8};\n    ai2d_datatype_t ai2d_dtype{ai2d_format::NCHW_FMT, ai2d_format::NCHW_FMT, ai2d_in_tensor.datatype(), ai2d_out_tensor.datatype()};\n    ai2d_crop_param_t crop_param { false, 30, 20, 400, 600 };\n    ai2d_shift_param_t shift_param{false, 0};\n    ai2d_pad_param_t pad_param{false, {{0, 0}, {0, 0}, {0, 0}, {0, 0}}, ai2d_pad_mode::constant, {114, 114, 114}};\n    ai2d_resize_param_t resize_param{true, ai2d_interp_method::tf_bilinear, ai2d_interp_mode::half_pixel};\n    ai2d_affine_param_t affine_param{false, ai2d_interp_method::cv2_bilinear, 0, 0, 127, 1, {0.5, 0.1, 0.0, 0.1, 0.5, 0.0}};\n\n    dims_t out_shape = ai2d_out_tensor.shape();\n    ai2d_builder builder { in_shape, out_shape, ai2d_dtype, crop_param, shift_param, pad_param, resize_param, affine_param };\n    builder.build_schedule();\n    builder.invoke(ai2d_in_tensor,ai2d_out_tensor).expect("error occurred in ai2d running");\n}\n\nvoid Utils::resize(std::unique_ptr<ai2d_builder> &builder, runtime_tensor &ai2d_in_tensor, runtime_tensor &ai2d_out_tensor)\n{\n    // run ai2d\n    ai2d_datatype_t ai2d_dtype{ai2d_format::NCHW_FMT, ai2d_format::NCHW_FMT, ai2d_in_tensor.datatype(), ai2d_out_tensor.datatype()};\n    ai2d_crop_param_t crop_param { false, 30, 20, 400, 600 };\n    ai2d_shift_param_t shift_param{false, 0};\n    ai2d_pad_param_t pad_param{false, {{0, 0}, {0, 0}, {0, 0}, {0, 0}}, ai2d_pad_mode::constant, {114, 114, 114}};\n    ai2d_resize_param_t resize_param{true, ai2d_interp_method::tf_bilinear, ai2d_interp_mode::half_pixel};\n    ai2d_affine_param_t affine_param{false, ai2d_interp_method::cv2_bilinear, 0, 0, 127, 1, {0.5, 0.1, 0.0, 0.1, 0.5, 0.0}};\n\n    dims_t in_shape = ai2d_in_tensor.shape();\n    dims_t out_shape = ai2d_out_tensor.shape();\n    builder.reset(new ai2d_builder(in_shape, out_shape, ai2d_dtype, crop_param, shift_param, pad_param, resize_param, affine_param));\n    builder->build_schedule();\n    builder->invoke(ai2d_in_tensor,ai2d_out_tensor).expect("error occurred in ai2d running");\n}\n\n\nvoid Utils::draw_cls_res(cv::Mat& frame, vector<cls_res>& results)\n{\n    double fontsize = (frame.cols * frame.rows * 1.0) / (300 * 250);\n    if (fontsize > 2)\n    {\n        fontsize = 2;\n    }\n\n    for(int i = 0; i < results.size(); i++)\n    {   \n        std::string text = "class: " + results[i].label + ", score: " + std::to_string(round(results[i].score * 100) / 100.0).substr(0, 4);\n\n        cv::putText(frame, text, cv::Point(1, 40), cv::FONT_HERSHEY_SIMPLEX, 0.8, cv::Scalar(255, 255, 0), 2);\n        std::cout << text << std::endl;\n    }\n}\n\nvoid Utils::draw_cls_res(cv::Mat& frame, vector<cls_res>& results, FrameSize osd_frame_size, FrameSize sensor_frame_size)\n{\n    double fontsize = (frame.cols * frame.rows * 1.0) / (1100 * 1200);\n    for(int i = 0; i < results.size(); i++)\n    {   \n        std::string text = "class: " + results[i].label + ", score: " + std::to_string(round(results[i].score * 100) / 100.0).substr(0, 4);\n        cv::putText(frame, text, cv::Point(1, 40), cv::FONT_HERSHEY_SIMPLEX, 0.8, cv::Scalar(255, 255, 255, 0), 2);\n        std::cout << text << std::endl;\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e3a\u4e86\u4fbf\u4e8e\u8c03\u8bd5\uff0c\u6211\u4eec\u5728scoped_timing.hpp\u4e2d\u5c01\u88c5\u4e86\u8ba1\u65f6\u7c7bScopedTiming\uff0c\u7528\u4e8e\u7edf\u8ba1\u5728\u8be5\u7c7b\u5b9e\u4f8b\u751f\u547d\u5468\u671f\u5185\u7684\u8017\u65f6\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#include <chrono>\n#include <string>\n#include <iostream>\n\n/**\n * @brief \u8ba1\u65f6\u7c7b\n * \u7edf\u8ba1\u5728\u8be5\u7c7b\u5b9e\u4f8b\u751f\u547d\u5468\u671f\u5185\u7684\u8017\u65f6\n */\nclass ScopedTiming\n{\npublic:\n    /**\n     * @brief ScopedTiming \u6784\u9020\u51fd\u6570,\u521d\u59cb\u5316\u8ba1\u65f6\u5bf9\u8c61\u540d\u79f0\u5e76\u5f00\u59cb\u8ba1\u65f6\n     * @param info \u8ba1\u65f6\u5bf9\u8c61\u540d\u79f0\n     * @param enable_profile \u662f\u5426\u5f00\u59cb\u8ba1\u65f6\n     * @return None\n     */\n    ScopedTiming(std::string info = "ScopedTiming", int enable_profile = 1)\n    : m_info(info), enable_profile(enable_profile)\n    {\n        if (enable_profile)\n        {\n            m_start = std::chrono::steady_clock::now();\n        }\n    }\n\n    /**\n     * @brief ScopedTiming\u6790\u6784,\u7ed3\u675f\u8ba1\u65f6\uff0c\u5e76\u6253\u5370\u8017\u65f6\n     * @return None\n     */ \n     ~ScopedTiming()\n    {\n        if (enable_profile)\n        {\n            m_stop = std::chrono::steady_clock::now();\n            double elapsed_ms = std::chrono::duration<double, std::milli>(m_stop - m_start).count();\n            std::cout << m_info << " took " << elapsed_ms << " ms" << std::endl;\n        }\n    }\n\nprivate:\n    int enable_profile;                            // \u662f\u5426\u7edf\u8ba1\u65f6\u95f4\n    std::string m_info;                            // \u8ba1\u65f6\u5bf9\u8c61\u540d\u79f0\n    std::chrono::steady_clock::time_point m_start; // \u8ba1\u65f6\u5f00\u59cb\u65f6\u95f4\n    std::chrono::steady_clock::time_point m_stop;  // \u8ba1\u65f6\u7ed3\u675f\u65f6\u95f4\n};\n'})}),"\n",(0,s.jsx)(e.p,{children:"main.cc\u662f\u5b9e\u73b0\u677f\u7aef\u63a8\u7406\u7684\u4e3b\u8981\u4ee3\u7801\uff0c\u4e3b\u8981\u5b9e\u73b0\u89e3\u6790\u4f20\u5165\u53c2\u6570\uff0c\u6253\u5370\u4f7f\u7528\u8bf4\u660e\uff0c\u5b9e\u73b0\u4e24\u4e2a\u4e0d\u540c\u5206\u652f\u7684\u63a8\u7406\u3002\u5982\u679c\u8f93\u5165\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u63a8\u7406\u56fe\u50cf\u8def\u5f84\uff0c\u5219\u8c03\u7528image_proc\u51fd\u6570\u8fdb\u884c\u56fe\u50cf\u63a8\u7406\uff1b\u5982\u679c\u4f20\u5165\u7684\u662fNone\uff0c\u5219\u8c03\u7528video_proc\u51fd\u6570\u8fdb\u884c\u89c6\u9891\u6d41\u63a8\u7406\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u9759\u6001\u56fe\u63a8\u7406\u4ee3\u7801"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'void image_proc_cls(string &kmodel_path, string &image_path,vector<string> labels,float cls_thresh ,int debug_mode)\n{\n    cv::Mat ori_img = cv::imread(image_path);\n    int ori_w = ori_img.cols;\n    int ori_h = ori_img.rows;\n    //\u521b\u5efa\u4efb\u52a1\u7c7b\u5b9e\u4f8b\n    Classification cls(kmodel_path,image_path,labels,cls_thresh,debug_mode);\n    //\u524d\u5904\u7406\n    cls.pre_process(ori_img);\n    //\u63a8\u7406\n    cls.inference();\n    vector<cls_res> results;\n    //\u540e\u5904\u7406\n    cls.post_process(results);\n    Utils::draw_cls_res(ori_img,results);\n    cv::imwrite("result_cls.jpg", ori_img);\n    \n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0a\u8ff0\u4ee3\u7801\u662fmain.cc\u4e2d\u7684\u9759\u6001\u56fe\u50cf\u63a8\u7406\u4ee3\u7801\u90e8\u5206\uff0c\u9996\u5148\u4ece\u56fe\u7247\u8def\u5f84\u521d\u59cb\u5316cv::Mat\u5bf9\u8c61ori_img\uff0c\u7136\u540e\u521d\u59cb\u5316Classification\u5b9e\u4f8bcls\uff0c\u8c03\u7528cls\u9884\u5904\u7406\u51fd\u6570pre_process\uff0c\u63a8\u7406\u51fd\u6570reference\uff0c\u540e\u5904\u7406\u51fd\u6570post_process\uff0c\u6700\u540e\u8c03\u7528utils.h\u4e2d\u7684draw_cls_res\u5c06\u7ed3\u679c\u7ed8\u5236\u5728\u56fe\u7247\u4e0a\u5e76\u4fdd\u5b58\u4e3aresult_cls.jpg\u3002\u5982\u60a8\u9700\u8981\u4fee\u6539\u524d\u540e\u5904\u7406\u90e8\u5206\uff0c\u53ef\u5728Classification.cc\u4e2d\u8fdb\u884c\u4fee\u6539\uff0c\u5982\u60a8\u60f3\u6dfb\u52a0\u5176\u4ed6\u5de5\u5177\u65b9\u6cd5\uff0c\u53ef\u5728utils\u4e2d\u5b9a\u4e49\uff0c\u5e76\u5728utils.cc\u4e2d\u5b9e\u73b0\u3002"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u89c6\u9891\u6d41\u63a8\u7406\u4ee3\u7801\u53ef\u4ee5\u53c2\u8003",(0,s.jsx)(e.strong,{children:"SDK\u7f16\u8bd1\u7ae0\u8282"}),"\u7684\u793a\u4f8b2\u90e8\u5206\u4ee3\u7801\u3002\u5176\u4e2dAI\u5f00\u53d1\u7684\u6838\u5fc3\u4ee3\u7801\u4e3a\uff1a"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'void video_proc_cls(string &kmodel_path, string &image_path,vector<string> labels,float cls_thresh , int debug_mode)\n{\n    // \u542f\u52a8video capture\n    vivcap_start();\n    // \u521b\u5efa\u4e00\u5e27\u6570\u636e\u5bf9\u8c61\n    k_video_frame_info vf_info;\n    // osd\n    void *pic_vaddr = NULL;       \n    memset(&vf_info, 0, sizeof(vf_info));\n    vf_info.v_frame.width = osd_width;\n    vf_info.v_frame.height = osd_height;\n    vf_info.v_frame.stride[0] = osd_width;\n    vf_info.v_frame.pixel_format = PIXEL_FORMAT_ARGB_8888;\n    block = vo_insert_frame(&vf_info, &pic_vaddr);\n\n    // alloc memory\n    size_t paddr = 0;\n    void *vaddr = nullptr;\n    size_t size = SENSOR_CHANNEL * SENSOR_HEIGHT * SENSOR_WIDTH;\n    int ret = kd_mpi_sys_mmz_alloc_cached(&paddr, &vaddr, "allocate", "anonymous", size);\n    if (ret)\n    {\n        std::cerr << "physical_memory_block::allocate failed: ret = " << ret << ", errno = " << strerror(errno) << std::endl;\n        std::abort();\n    }\n \n    // \u521d\u59cb\u5316\u56fe\u50cf\u5206\u7c7b\u4efb\u52a1\u4efb\u52a1\u5b9e\u4f8b\n    Classification cls(kmodel_path,image_path,labels,cls_thresh, {SENSOR_CHANNEL, SENSOR_HEIGHT, SENSOR_WIDTH}, reinterpret_cast<uintptr_t>(vaddr), reinterpret_cast<uintptr_t>(paddr), debug_mode);\n // \u5206\u7c7b\u7ed3\u679c\n    vector<cls_res> results;\n \n    // \u5f53\u6ca1\u6709\u505c\u6b62\u65f6\uff0c\u5bf9\u6bcf\u4e00\u5e27\u56fe\u50cf\u8fdb\u884c\u63a8\u7406\n    while (!isp_stop)\n    {\n        ScopedTiming st("total time", debug_mode);\n        {\n            ScopedTiming st("read capture", debug_mode);\n            // VICAP_CHN_ID_1 out rgb888p\n            memset(&dump_info, 0 , sizeof(k_video_frame_info));\n            // dump\u4e00\u5e27\u56fe\u50cf\u5230dump_info\n            ret = kd_mpi_vicap_dump_frame(vicap_dev, VICAP_CHN_ID_1, VICAP_DUMP_YUV, &dump_info, 1000);\n            if (ret) {\n                printf("sample_vicap...kd_mpi_vicap_dump_frame failed.\\n");\n                continue;\n            }\n        }\n            \n\n        {\n            ScopedTiming st("isp copy", debug_mode);\n            auto vbvaddr = kd_mpi_sys_mmap_cached(dump_info.v_frame.phys_addr[0], size);\n            memcpy(vaddr, (void *)vbvaddr, SENSOR_HEIGHT * SENSOR_WIDTH * 3); \n            kd_mpi_sys_munmap(vbvaddr, size);\n        }\n  // results\u6e05\u7a7a\uff0c\u51c6\u5907\u4fdd\u5b58\u63a8\u7406\u7ed3\u679c\n        results.clear();\n        //\u9884\u5904\u7406\n        cls.pre_process();\n        // \u63a8\u7406\n        cls.inference();\n  // \u540e\u5904\u7406\n        cls.post_process(results);\n  // \u521b\u5efaosd\u5e27\n        cv::Mat osd_frame(osd_height, osd_width, CV_8UC4, cv::Scalar(0, 0, 0, 0));\n  //\u5728osd\u4e0a\u7ed8\u5236\u7ed3\u679c\n        {\n            ScopedTiming st("osd draw", debug_mode);\n            Utils::draw_cls_res(osd_frame, results, {osd_width, osd_height}, {SENSOR_WIDTH, SENSOR_HEIGHT});\n        }\n\n    // \u5c06\u7ed8\u5236\u7684osd\u5e27\u63d2\u5165\u8f93\u51fa\u663e\u793a\u901a\u9053\n        {\n            ScopedTiming st("osd copy", debug_mode);\n            memcpy(pic_vaddr, osd_frame.data, osd_width * osd_height * 4);\n            //\u663e\u793a\u901a\u9053\u63d2\u5165\u5e27\n            kd_mpi_vo_chn_insert_frame(osd_id+3, &vf_info);  //K_VO_OSD0\n            printf("kd_mpi_vo_chn_insert_frame success \\n");\n            ret = kd_mpi_vicap_dump_release(vicap_dev, VICAP_CHN_ID_1, &dump_info);\n            if (ret) {\n                printf("sample_vicap...kd_mpi_vicap_dump_release failed.\\n");\n            }\n        }\n    }\n \n    // \u7ec8\u6b62\n    vo_osd_release_block();\n    vivcap_stop();\n    // free memory\n    ret = kd_mpi_sys_mmz_free(paddr, vaddr);\n    if (ret)\n    {\n        std::cerr << "free failed: ret = " << ret << ", errno = " << strerror(errno) << std::endl;\n        std::abort();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:["\u4e3a\u4e86\u4f7f\u7528\u65b9\u4fbf\uff0c\u6211\u4eec\u5bf9\u89c6\u9891\u6d41\u5904\u7406\u90e8\u5206\u505a\u4e86\u5c01\u88c5\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u793a\u4f8b\u4ee3\u7801\uff1a",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts/tree/main/end2end_cls_doc",children:"K230_training_scripts/end2end_cls_doc at main \xb7 kendryte/K230_training_scripts (github.com)"}),"\u4e2dk230_code\u4e2d\u7684vi_vo.h\u6587\u4ef6\u548cmain.cc\u4e2d\u7684\u5177\u4f53\u5b9e\u73b0\u3002"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/k230_deploy/CMakeLists.txt\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u662fk230_code/k230_deploy\u76ee\u5f55\u4e0b\u7684CMakeLists.txt\u811a\u672c\uff0c\u8bbe\u7f6e\u7f16\u8bd1\u7684C++\u6587\u4ef6\u548c\u751f\u6210\u7684elf\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\uff0c\u7531\u4e0b\u9762\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"set(src main.cc utils.cc ai_base.cc classification.cc) \nset(bin main.elf)\n#\u6dfb\u52a0\u9879\u76ee\u7684\u6839\u76ee\u5f55\u5230\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u4e2d\u3002\ninclude_directories(${PROJECT_SOURCE_DIR})\n#\u6dfb\u52a0 nncase RISC-V \u5411\u91cf\u5e93\u7684\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${nncase_sdk_root}/riscv64/rvvlib/include)\n#\u6dfb\u52a0 k230 SDK \u4e2d\u7684\u7528\u6237\u5e94\u7528\u7a0b\u5e8f API \u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/userapps/api/)\n#\u6dfb\u52a0 k230 SDK \u7684mpp(Media Process Platform)\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/include)\n# \u6dfb\u52a0\u4e0empp\u76f8\u5173\u7684\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/include/comm)\n#\u6dfb\u52a0\u793a\u4f8b VO\uff08\u89c6\u9891\u8f93\u51fa\uff09\u5e94\u7528\u7a0b\u5e8f\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/userapps/sample/sample_vo)\n#\u6dfb\u52a0\u94fe\u63a5\u5668\u641c\u7d22\u8def\u5f84\uff0c\u6307\u5411 nncase RISC-V \u5411\u91cf\u5e93\u7684\u76ee\u5f55\nlink_directories(${nncase_sdk_root}/riscv64/rvvlib/)\n#\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u6e90\u6587\u4ef6\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\nadd_executable(${bin} ${src})\n#\u8bbe\u7f6e\u53ef\u6267\u884c\u6587\u4ef6\u9700\u8981\u94fe\u63a5\u7684\u5e93\u3002\u5217\u8868\u4e2d\u5217\u51fa\u4e86\u5404\u79cd\u5e93\uff0c\u5305\u62ec nncase \u76f8\u5173\u7684\u5e93\u3001k230 SDK \u7684\u5e93\uff0c\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u5e93\ntarget_link_libraries(${bin} ...)\n#\u5c06\u4e00\u4e9b OpenCV\u76f8\u5173\u7684\u5e93\u548c\u5176\u4ed6\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u94fe\u63a5\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\ntarget_link_libraries(${bin} opencv_imgproc opencv_imgcodecs opencv_core zlib libjpeg-turbo libopenjp2 libpng libtiff libwebp csi_cv)\n# \u5b89\u88c5\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5230\u6307\u5b9a\u7684\u76ee\u6807\u8def\u5f84\uff08bin \u76ee\u5f55\uff09\u4e2d\ninstall(TARGETS ${bin} DESTINATION bin)\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/CMakeLists.txt\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'cmake_minimum_required(VERSION 3.2)\nproject(nncase_sdk C CXX)\n\n# \u8bbe\u7f6enncase\u7684\u6839\u76ee\u5f55\uff0c\u5728src/big/nncase\u76ee\u5f55\u4e0b\uff0c\u60a8\u4e5f\u53ef\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\nset(nncase_sdk_root "${PROJECT_SOURCE_DIR}/../../nncase/")\n# \u8bbe\u7f6ek230_sdk\u7684\u6839\u76ee\u5f55\uff0c\u5f53\u524d\u662f\u4ecenncase\u76ee\u5f55\u7684\u4e09\u7ea7\u7236\u76ee\u5f55\u5f97\u5230\uff0c\u60a8\u4e5f\u53ef\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\nset(k230_sdk ${nncase_sdk_root}/../../../)\n#\u8bbe\u7f6e\u94fe\u63a5\u811a\u672c\u8def\u5f84\uff0c\u94fe\u63a5\u811a\u672c\u653e\u4e8ek230_code/cmake\u4e0b\nset(CMAKE_EXE_LINKER_FLAGS "-T ${PROJECT_SOURCE_DIR}/cmake/link.lds --static")\n\n# set opencv\nset(k230_opencv ${k230_sdk}/src/big/utils/lib/opencv)\ninclude_directories(${k230_opencv}/include/opencv4/)\nlink_directories(${k230_opencv}/lib ${k230_opencv}/lib/opencv4/3rdparty)\n\n# set mmz\nlink_directories(${k230_sdk}/src/big/mpp/userapps/lib)\n\n# set nncase\ninclude_directories(${nncase_sdk_root}/riscv64)\ninclude_directories(${nncase_sdk_root}/riscv64/nncase/include)\ninclude_directories(${nncase_sdk_root}/riscv64/nncase/include/nncase/runtime)\nlink_directories(${nncase_sdk_root}/riscv64/nncase/lib/)\n\n# \u6dfb\u52a0\u5f85\u7f16\u8bd1\u5b50\u9879\u76ee\nadd_subdirectory(k230_deploy)\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/build_app.sh\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"#!/bin/bash\nset -x\n\n# set cross build toolchain\n# \u5c06\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7684\u8def\u5f84\u6dfb\u52a0\u5230\u7cfb\u7edf\u7684 PATH \u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u4fbf\u5728\u540e\u7eed\u7684\u547d\u4ee4\u4e2d\u4f7f\u7528\u3002\u8be5\u5de5\u5177\u94fe\u662f\u4f7f\u7528\u7684\u5927\u6838\u7f16\u8bd1\u5de5\u5177\u94fe\u3002\nexport PATH=$PATH:/opt/toolchain/riscv64-linux-musleabi_for_x86_64-pc-linux-gnu/bin/\n\nclear\nrm -rf out\nmkdir out\npushd out\ncmake -DCMAKE_BUILD_TYPE=Release                 \\\n      -DCMAKE_INSTALL_PREFIX=`pwd`               \\\n      -DCMAKE_TOOLCHAIN_FILE=cmake/Riscv64.cmake \\\n      ..\n\nmake -j && make install\npopd\n\n# \u751f\u6210\u7684main.elf\u53ef\u4ee5\u5728k230_code\u76ee\u5f55\u4e0b\u7684k230_bin\u6587\u4ef6\u5939\u4e0b\u627e\u5230\nk230_bin=`pwd`/k230_bin\nrm -rf ${k230_bin}\nmkdir -p ${k230_bin}\n\nif [ -f out/bin/main.elf ]; then\n      cp out/bin/main.elf ${k230_bin}\nfi\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10153-\u4ee3\u7801\u7f16\u8bd1",children:"10.1.5.3 \u4ee3\u7801\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u9879\u76ee\u4e2d\u7684k230_code\u6587\u4ef6\u5939\u62f7\u8d1d\u5230k230_sdk\u76ee\u5f55\u4e0b\u7684src/big/nncase\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u811a\u672c\uff0c\u5c06C++\u4ee3\u7801\u7f16\u8bd1\u6210main.elf\u53ef\u6267\u884c\u6587\u4ef6\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u5728k230_SDK\u6839\u76ee\u5f55\u4e0b\u6267\u884c\nmake CONF=k230_canmv_defconfig prepare_memory\n# \u56de\u5230\u5f53\u524d\u9879\u76ee\u76ee\u5f55\uff0c\u8d4b\u4e88\u6743\u9650\nchmod +x build_app.sh\n./build_app.sh\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10154-\u51c6\u5907elf\u6587\u4ef6",children:"10.1.5.4 \u51c6\u5907ELF\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:"\u540e\u9762\u90e8\u7f72\u6b65\u9aa4\u9700\u8981\u7528\u5230\u7684\u6587\u4ef6\u5305\u62ec\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/k230_bin/main.elf;"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"1016-\u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",children:"10.1.6 \u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u5f85\u4f7f\u7528\u6587\u4ef6\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u6709\u4e09\u79cd\u65b9\u5f0f\u53ef\u4f9b\u9009\u62e9\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10161-\u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",children:"10.1.6.1 \u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d"}),"\n",(0,s.jsx)(e.p,{children:"\u901a\u8fc7\u63d2\u62d4SD\u5361\uff0c\u5c06\u6240\u9700\u6587\u4ef6\u62f7\u8d1d\u5230\u76f8\u5e94\u4f4d\u7f6e\uff0cSD\u5361\u6839\u76ee\u5f55\u6620\u5c04\u5230\u5927\u5c0f\u6838\u7684/sharefs\u76ee\u5f55\u4e0b\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10162-tftp\u6587\u4ef6\u4f20\u8f93",children:"10.1.6.2 tftp\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Windows\u7cfb\u7edfPC\u7aef\u7f51\u7edc\u914d\u7f6e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u63a7\u5236\u9762\u677f->\u7f51\u7edc\u548c\u5171\u4eab\u4e2d\u5fc3->\u66f4\u6539\u9002\u914d\u5668\u8bbe\u7f6e->\u4ee5\u592a\u7f51\u7f51\u5361->\u53f3\u952e\u5c5e\u6027->\u9009\u4e2d(TCP/IPv4)->\u5c5e\u6027"}),"\n",(0,s.jsx)(e.p,{children:"\u914d\u7f6eIP\u5730\u5740\u3001\u63a9\u7801\u3001\u7f51\u5173\uff0c\u914d\u7f6eDNS\u670d\u52a1\u5668\u5730\u5740\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"net_config_0",src:i(25212).A+"",width:"695",height:"871"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5f00\u53d1\u677f\u7f51\u7edc\u914d\u7f6e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165\u5c0f\u6838\u547d\u4ee4\u884c\uff0c\u6267\u884c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u67e5\u770b\u662f\u5426\u6709eth0\nifconfig\n# \u914d\u7f6e\u5f00\u53d1\u677fIP\uff0c\u548cPC\u5728\u540c\u4e00\u7f51\u6bb5\u4e0b\nifconfig eth0 192.168.1.22\n# \u67e5\u770bIP\u914d\u7f6e\nifconfig\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5de5\u5177\uff1atftpd64"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5b89\u88c5tftp\u901a\u4fe1\u5de5\u5177\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a",(0,s.jsx)(e.a,{href:"https://bitbucket.org/phjounin/tftpd64/downloads/",children:"https://bitbucket.org/phjounin/tftpd64/downloads/"})]}),"\n",(0,s.jsx)(e.p,{children:"\u542f\u52a8tftpd64\uff0c\u914d\u7f6e\u5f85\u4f20\u8f93\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\u548c\u670d\u52a1\u7f51\u5361"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"net_config_1",src:i(77477).A+"",width:"1012",height:"502"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"sharefs\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u8fdb\u5165\u5c0f\u6838\u6839\u76ee\u5f55\ncd /\n# \u67e5\u770b\u76ee\u5f55\nls\n# sharefs\u76ee\u5f55\u662f\u5927\u5c0f\u6838\u5171\u7528\u76ee\u5f55\uff0c\u56e0\u6b64\u4ece\u5c0f\u6838\u62f7\u8d1d\u5230sharefs\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5bf9\u5927\u6838\u4e5f\u53ef\u89c1\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6587\u4ef6\u4f20\u8f93"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4ee5\u4e0b\u4ee3\u7801\u5728\u5c0f\u6838\u4e32\u53e3\u6267\u884c\n# \u5c06PC\u4e0atftpd64\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4f20\u8f93\u81f3\u5f00\u53d1\u677f\u7684\u5f53\u524d\u76ee\u5f55\ntftp -g -r your_file 192.168.1.2\n# \u5c06\u5f00\u53d1\u677f\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4f20\u8f93\u81f3tftpd64\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\ntftp -p -r board_file 192.168.1.2\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10162-scp\u6587\u4ef6\u4f20\u8f93",children:"10.1.6.2 scp\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,s.jsx)(e.p,{children:"\u5728Linux\u7cfb\u7edf\u4e2d\uff0cPC\u6b63\u5e38\u8fde\u63a5\u7f51\u7edc\uff0c\u5f00\u53d1\u677f\u53ef\u4ee5\u901a\u8fc7\u7f51\u7ebf\u8fde\u63a5PC\u6240\u5728\u7f51\u5173\u4e0b\u5176\u4ed6\u7f51\u53e3\uff0c\u901a\u8fc7scp\u547d\u4ee4\u5b9e\u73b0\u6587\u4ef6\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u53d1\u677f\u4e0a\u7535\uff0c\u8fdb\u5165\u5927\u5c0f\u6838COM\u754c\u9762\uff0c\u5728\u5c0f\u6838\u6267\u884cscp\u4f20\u8f93\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4ecePC\u62f7\u8d1d\u6587\u4ef6\u81f3\u5f00\u53d1\u677f\nscp \u7528\u6237\u540d@\u57df\u540d\u6216IP:\u6587\u4ef6\u6240\u5728\u76ee\u5f55 \u5f00\u53d1\u677f\u76ee\u7684\u76ee\u5f55\n#\u62f7\u8d1d\u6587\u4ef6\u5939\nscp -r \u7528\u6237\u540d@\u57df\u540d\u6216IP:\u6587\u4ef6\u6240\u5728\u76ee\u5f55 \u5f00\u53d1\u677f\u76ee\u7684\u76ee\u5f55\n# \u4ece\u5f00\u53d1\u677f\u62f7\u8d1d\u6587\u4ef6\u81f3PC\nscp \u5f00\u53d1\u677f\u5f85\u62f7\u8d1d\u76ee\u5f55 \u7528\u6237\u540d@\u57df\u540d\u6216IP:PC\u76ee\u7684\u76ee\u5f55\n# \u62f7\u8d1d\u6587\u4ef6\u5939\nscp -r \u5f00\u53d1\u677f\u5f85\u62f7\u8d1d\u76ee\u5f55 \u7528\u6237\u540d@\u57df\u540d\u6216IP:PC\u76ee\u7684\u76ee\u5f55\n"})}),"\n",(0,s.jsx)(e.h3,{id:"1017-k230\u7aef\u90e8\u7f72",children:"10.1.7 K230\u7aef\u90e8\u7f72"}),"\n",(0,s.jsx)(e.h4,{id:"10171-\u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",children:"10.1.7.1 \u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b"}),"\n",(0,s.jsx)(e.p,{children:"\u6309\u7167\u4e0a\u8282\u914d\u7f6e\u597d\u7684\u6587\u4ef6\u4f20\u8f93\u8fc7\u7a0b\uff0c\u5728MobaXterm\u4e0a\u7684\u5c0f\u6838\u754c\u9762\u8fdb\u5165/sharefs\uff0c\u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\u5939\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"cd /sharefs\nmkdir test_cls\ncd test_cls\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5\u90e8\u5206\u51c6\u5907\u597d\u7684\u6587\u4ef6\u548cC++\u4ee3\u7801\u7f16\u8bd1\u90e8\u5206\u51c6\u5907\u597d\u7684elf\u6587\u4ef6\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"test_cls\n \u251c\u2500\u2500best.kmodel\n \u251c\u2500\u2500labels.txt\n \u251c\u2500\u2500main.elf\n \u251c\u2500\u2500test.jpg\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u5927\u6838COM\u53e3\u8fdb\u5165\u5230/sharefs/test_cls\u76ee\u5f55\u4e0b\uff0c"}),"\n",(0,s.jsx)(e.p,{children:"\u6267\u884c\u9759\u6001\u56fe\u63a8\u7406\uff0c\u6267\u884c\u4e0b\u8ff0\u4ee3\u7801(\u6ce8\u610f\uff1a\u4ee3\u7801\u9700\u5728\u5927\u6838\u4e0b\u6267\u884c\uff0c\u6587\u4ef6\u62f7\u8d1d\u9700\u5728\u5c0f\u6838\u4e0b\u5b8c\u6210)\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'# "\u6a21\u578b\u63a8\u7406\u65f6\u4f20\u53c2\u8bf4\u660e\uff1a"\n# "<kmodel_path> <image_path> <labels_txt> <debug_mode>"\n# "Options:"\n# "  kmodel_path     Kmodel\u7684\u8def\u5f84\\n"\n# "  image_path      \u5f85\u63a8\u7406\u56fe\u7247\u8def\u5f84/\u6444\u50cf\u5934(None)\\n"\n# "  labels_txt      \u7c7b\u522b\u6807\u7b7e\u6587\u4ef6\u8def\u5f84\\n"\n# "  debug_mode      \u662f\u5426\u9700\u8981\u8c03\u8bd5\uff0c0\u30011\u30012\u5206\u522b\u8868\u793a\u4e0d\u8c03\u8bd5\u3001\u7b80\u5355\u8c03\u8bd5\u3001\u8be6\u7ec6\u8c03\u8bd5\\n"\nmain.elf best.kmodel test.jpg labels.txt 2 \n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u6267\u884c\u6444\u50cf\u5934\u89c6\u9891\u6d41\u63a8\u7406\uff0c\u6267\u884c\u4e0b\u8ff0\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"main.elf best.kmodel None labels.txt 2 \n"})}),"\n",(0,s.jsx)(e.h4,{id:"10172-\u4e0a\u677f\u90e8\u7f72\u6548\u679c",children:"10.1.7.2 \u4e0a\u677f\u90e8\u7f72\u6548\u679c"}),"\n",(0,s.jsx)(e.p,{children:"\u9759\u6001\u56fe\u63a8\u7406\u56fe\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"image_inference",src:i(7485).A+"",width:"846",height:"246"})}),"\n",(0,s.jsx)(e.p,{children:"\u89c6\u9891\u6d41\u63a8\u7406\u56fe\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"video_inference",src:i(12135).A+"",width:"1047",height:"640"})}),"\n",(0,s.jsx)(e.h2,{id:"102-\u4f7f\u7528kts\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1",children:"10.2 \u4f7f\u7528KTS\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1"}),"\n",(0,s.jsx)(e.h3,{id:"1021-\u73af\u5883\u642d\u5efa",children:"10.2.1 \u73af\u5883\u642d\u5efa"}),"\n",(0,s.jsx)(e.p,{children:"\uff081\uff09Linux\u7cfb\u7edf\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff082\uff09\u5b89\u88c5\u663e\u5361\u9a71\u52a8\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff083\uff09\u5b89\u88c5Anaconda\uff0c\u7528\u4e8e\u521b\u5efa\u6a21\u578b\u8bad\u7ec3\u73af\u5883\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff084\uff09\u5b89\u88c5Docker\uff0c\u7528\u4e8e\u521b\u5efaSDK\u955c\u50cf\u7f16\u8bd1\u73af\u5883\uff1b"}),"\n",(0,s.jsx)(e.p,{children:"\uff085\uff09\u5b89\u88c5dotnet SDK;"}),"\n",(0,s.jsx)(e.h3,{id:"1022-\u6570\u636e\u51c6\u5907",children:"10.2.2 \u6570\u636e\u51c6\u5907"}),"\n",(0,s.jsx)(e.p,{children:"\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u81ea\u5b9a\u4e49\u6570\u636e\u96c6\u6309\u7167\u5982\u4e0b\u683c\u5f0f\u7ec4\u7ec7\uff0c\u6839\u76ee\u5f55\u4e0b\u5305\u62ec\uff1a\u4ee5\u7c7b\u522b\u540d\u79f0\u547d\u540d\u7684\u5b50\u76ee\u5f55\uff0c\u5b50\u76ee\u5f55\u4e2d\u662f\u5176\u7c7b\u522b\u7684\u6240\u6709\u56fe\u50cf\u6837\u672c\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\u76ee\u6807\u68c0\u6d4b\u6570\u636e\u7ed3\u6784",src:i(88249).A+"",width:"1280",height:"720"})}),"\n",(0,s.jsx)(e.h3,{id:"1023-\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5",children:"10.2.3 \u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5"}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u8282\u5185\u5bb9\u5728\u8bad\u7ec3\u73af\u5883\u4e2d\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10231-\u521b\u5efa\u865a\u62df\u73af\u5883",children:"10.2.3.1 \u521b\u5efa\u865a\u62df\u73af\u5883"}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u542f\u547d\u4ee4\u7ec8\u7aef\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"conda create -n myenv python=3.9\nconda activate myenv\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10232-\u5b89\u88c5python\u4f9d\u8d56\u5e93",children:"10.2.3.2 \u5b89\u88c5python\u4f9d\u8d56\u5e93"}),"\n",(0,s.jsx)(e.p,{children:"\u6309\u7167\u9879\u76ee\u5185\u7684requriements.txt\u5b89\u88c5\u8bad\u7ec3\u6240\u7528\u7684python\u5e93,\u7b49\u5f85\u5b89\u88c5\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pip install -r requriements.txt\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728requriments.txt\u4e2d\u4f1a\u5b89\u88c5\u6a21\u578b\u8f6c\u6362\u7684\u5305nncase\u548cnncase-kpu\uff0cnncase \u662f\u4e00\u4e2a\u4e3a AI \u52a0\u901f\u5668\u8bbe\u8ba1\u7684\u795e\u7ecf\u7f51\u7edc\u7f16\u8bd1\u5668\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u955c\u50cf\u548c\u4f7f\u7528nncase\u8f6c\u6362kmodel\u65f6\u8bf7\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\uff0ck230_sdk\u7248\u672c\u548cnncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u53c2\u8003\u4e0b\u8ff0\u94fe\u63a5\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/k230/dev/zh/03_other/K230_SDK_nncase%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html",children:"K230 SDK nncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb \u2014 K230 \u6587\u6863 (canaan-creative.com)"})})}),"\n",(0,s.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u6309\u7167\u5bf9\u5e94\u7248\u672c\u66f4\u6362nncase\u548cnncase-kpu\u7684\u7248\u672c\uff0c\u6bd4\u5982\u66f4\u6362nncase\u7248\u672c\u4e3a2.7.0\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"pip install nncase==2.7.0\npip install nncase-kpu==2.7.0\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10233-\u914d\u7f6e\u8bad\u7ec3\u53c2\u6570",children:"10.2.3.3 \u914d\u7f6e\u8bad\u7ec3\u53c2\u6570"}),"\n",(0,s.jsx)(e.p,{children:"\u7ed9\u51fa\u7684\u8bad\u7ec3\u811a\u672c\u4e2d\u914d\u7f6e\u6587\u4ef6yaml/config.yaml\u8bbe\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"dataset:\n  root_folder: ../data/fruit # \u76ee\u6807\u68c0\u6d4b\u6570\u636e\u96c6\u8def\u5f84\n  origion_json: labels.json # \u76ee\u6807\u68c0\u6d4b\u6570\u636e\u96c6\u6807\u6ce8json\u6587\u4ef6\n  split: true # \u662f\u5426\u91cd\u65b0\u6267\u884c\u62c6\u5206\uff0c\u7b2c\u4e00\u6b21\u6267\u884c\u5fc5\u987b\u4e3atrue\n  val_ratio: 0.1 # \u9a8c\u8bc1\u96c6\u6bd4\u4f8b\n  test_ratio: 0.1 # \u6d4b\u8bd5\u96c6\u6bd4\u4f8b\n\ntrain_val_test:\n  json_dir: ../gen # \u62c6\u5206\u8fc7\u7a0b\u751f\u6210\u7684\u8bad\u7ec3\u96c6\u3001\u9a8c\u8bc1\u96c6\u3001\u6d4b\u8bd5\u96c6json\u6587\u4ef6\uff0c\u6807\u7b7e\u540d\u79f0\u6587\u4ef6\u3001\u6821\u6b63\u96c6\u6587\u4ef6\n  model_save_dir: ../checkpoints # \u6a21\u578b\u4fdd\u5b58\u8def\u5f84\n  gpu_index: 0 # \u8c03\u7528\u7684gpu\u7d22\u5f15\uff0c\u5982\u679cgpu\u4e0d\u53ef\u7528\uff0c\u4f1a\u4f7f\u7528cpu\n  img_size: 640 # \u5206\u8fa8\u7387\n  learningrate: 0.001 #\u5b66\u4e60\u7387\n  mean: [ 0.485, 0.456, 0.406 ] # \u56fe\u50cf\u6807\u51c6\u5316\u5747\u503c\n  std: [ 0.229, 0.224, 0.225 ] # \u56fe\u50cf\u6807\u51c6\u5316\u6807\u51c6\u5dee\n  epochs: 300 # \u8bad\u7ec3\u8fed\u4ee3\u6b21\u6570\n  nms_option: false #\u7c7b\u5185\u6216\u8005\u7c7b\u95f4\u505anms false\u4ee3\u8868\u7c7b\u5185\n  pre_train_dir: pre_pth # \u9884\u8bad\u7ec3\u6a21\u578b\u5b58\u653e\u8def\u5f84\n  train_batch_size: 32 # \u8bad\u7ec3\u8fed\u4ee3batch\n  val_batch_size: 8 # \u9a8c\u8bc1\u8fed\u4ee3batch\n  test_batch_size: 8 # \u6d4b\u8bd5\u8fed\u4ee3batch\n\ninference:\n  mode: image # \u63a8\u7406\u6a21\u5f0f\uff0c\u5206\u4e3aimage\u548cvideo; image\u6a21\u5f0f\u4e0b\u53ef\u63a8\u7406\u5355\u5f20\u56fe\u7247\u548c\u76ee\u5f55\u4e0b\u6240\u6709\u56fe\u7247\uff0cvideo\u8c03\u7528\u6444\u50cf\u5934\u5b9e\u73b0\u63a8\u7406\n  inference_model: best # \u5206\u4e3abest\u548clast\uff0c\u5206\u522b\u8c03\u7528checkpoints\u4e0b\u7684best.pth\u548clast.pth\u8fdb\u884c\u63a8\u7406\n  image_path: ../data/fruit/test.jpg # \u5982\u679c\u8be5\u8def\u5f84\u4e3a\u56fe\u7247\u8def\u5f84\uff0c\u5219\u8fdb\u884c\u5355\u5f20\u56fe\u7247\u63a8\u7406\uff1b\u5982\u679c\u8be5\u8def\u5f84\u4e3a\u76ee\u5f55\uff0c\u5219\u5bf9\u76ee\u5f55\u4e0b\u6240\u6709\u56fe\u7247\u8fdb\u884c\u63a8\u7406\n  deploy_json: deploy.json # \u540e\u7eedkmodel\u9700\u8981\u8bfb\u53d6\u7684\u53c2\u6570\u6587\u4ef6\n  confidence_threshold: 0.55 # \u68c0\u6d4b\u6846\u9608\u503c\n  nms_threshold: 0.2 # \u6700\u5927\u503c\u6291\u5236\u9608\u503c\n\ndeploy:\n  onnx_img_size: [640,640] # \u8f6connx\u8f93\u5165\u5206\u8fa8\u7387 [w , h]  \u5fc5\u987b\u662f32\u7684\u500d\u6570\n  chip: k230 # \u82af\u7247\u7c7b\u578b\uff0c\u5206\u4e3a\u201ck230\u201d\u548c\u201ccpu\u201d\u4e24\u79cd\n  ptq_option: 0 # \u91cf\u5316\u7c7b\u578b\uff0c0\u4e3auint8\uff0c1\uff0c2\uff0c3\uff0c4\u4e3auint16\u7684\u4e0d\u540c\u5f62\u5f0f\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10234-\u6a21\u578b\u8bad\u7ec3",children:"10.2.3.4 \u6a21\u578b\u8bad\u7ec3"}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165\u5230\u5de5\u7a0b\u7684scripts\u76ee\u5f55\uff0c\u6267\u884c\u8bad\u7ec3\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"python3 main.py\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u8bad\u7ec3\u6210\u529f\uff0c\u5728\u914d\u7f6e\u6587\u4ef6\u7684model_save_dir\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u8bad\u7ec3\u597d\u7684last.pth\u3001best.pth\u3001best.onnx\u3001best.kmodel\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10235-\u6a21\u578b\u6d4b\u8bd5",children:"10.2.3.5 \u6a21\u578b\u6d4b\u8bd5"}),"\n",(0,s.jsx)(e.p,{children:"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684inference\u90e8\u5206\uff0c\u8bbe\u7f6e\u6d4b\u8bd5\u914d\u7f6e\uff0c\u6267\u884c\u6d4b\u8bd5\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"python3 inference.py\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10236-\u51c6\u5907\u6587\u4ef6",children:"10.2.3.6 \u51c6\u5907\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:"\u540e\u9762\u90e8\u7f72\u6b65\u9aa4\u9700\u8981\u7528\u5230\u7684\u6587\u4ef6\u5305\u62ec\uff1a"}),"\n",(0,s.jsx)(e.p,{children:"\uff081\uff09checkpoints/best.kmodel;"}),"\n",(0,s.jsx)(e.p,{children:"\uff082\uff09gen/deploy.json"}),"\n",(0,s.jsx)(e.p,{children:"\uff083\uff09\u5f85\u6d4b\u8bd5\u56fe\u7247test.jpg;"}),"\n",(0,s.jsx)(e.h3,{id:"1024-k230_sdk\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55",children:"10.2.4 K230_SDK\u955c\u50cf\u7f16\u8bd1\u548c\u70e7\u5f55"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u955c\u50cf\u548c\u4f7f\u7528nncase\u8f6c\u6362kmodel\u65f6\u8bf7\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\uff0ck230_sdk\u7248\u672c\u548cnncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u53c2\u8003\u4e0b\u8ff0\u94fe\u63a5\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/k230/dev/zh/03_other/K230_SDK_nncase%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB.html",children:"K230 SDK nncase\u7248\u672c\u5bf9\u5e94\u5173\u7cfb \u2014 K230 \u6587\u6863 (canaan-creative.com)"})})}),"\n",(0,s.jsxs)(e.p,{children:["\u5982\u679c\u60a8\u9009\u62e9\u4f7f\u7528",(0,s.jsx)(e.a,{href:"https://developer.canaan-creative.com/resource",children:"\u5609\u6960\u5f00\u53d1\u8005\u793e\u533a (canaan-creative.com)"}),"\u8d44\u6599\u4e0b\u8f7d->K230->Images\u90e8\u5206\u63d0\u4f9b\u7684\u955c\u50cf\uff0c\u8bf7\u60a8\u6ce8\u610f\u7248\u672c\u5bf9\u5e94\u5173\u7cfb\u4e0b\u8f7d\u70e7\u5f55\u3002"]}),"\n",(0,s.jsx)(e.h4,{id:"10241-docker\u73af\u5883\u642d\u5efa",children:"10.2.4.1 Docker\u73af\u5883\u642d\u5efa"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4e0b\u8f7ddocker\u7f16\u8bd1\u955c\u50cf\ndocker pull ghcr.io/kendryte/k230_sdk\n# \u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u786e\u8ba4docker\u955c\u50cf\u662f\u5426\u62c9\u53d6\u6210\u529f\ndocker images | grep ghcr.io/kendryte/k230_sdk\n# \u4e0b\u8f7dsdk\u6e90\u7801\ngit clone https://github.com/kendryte/k230_sdk.git\ncd k230_sdk\n# \u4e0b\u8f7d\u5de5\u5177\u94feLinux\u548cRT-Smart toolchain, buildroot package, AI package\u7b49\nmake prepare_sourcecode\n# \u521b\u5efadocker\u5bb9\u5668\uff0c$(pwd):$(pwd)\u8868\u793a\u7cfb\u7edf\u5f53\u524d\u76ee\u5f55\u6620\u5c04\u5230docker\u5bb9\u5668\u5185\u90e8\u7684\u76f8\u540c\u76ee\u5f55\u4e0b\uff0c\u5c06\u7cfb\u7edf\u4e0b\u7684\u5de5\u5177\u94fe\u76ee\u5f55\u6620\u5c04\u5230docker\u5bb9\u5668\u5185\u90e8\u7684/opt/toolchain\u76ee\u5f55\u4e0b\ndocker run -u root -it -v $(pwd):$(pwd) -v $(pwd)/toolchain:/opt/toolchain -w $(pwd) ghcr.io/kendryte/k230_sdk /bin/bash\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10242-\u955c\u50cf\u7f16\u8bd1",children:"10.2.4.2 \u955c\u50cf\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u60a8\u4f7f\u7528\u5f00\u53d1\u8005\u793e\u533a\u4e0b\u8f7d\u7684\u955c\u50cf\uff0c\u8bf7\u5728k230_sdk\u6839\u76ee\u5f55\u4e0b\u6267\u884c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"make mpp\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u8be5\u6b65\u9aa4\u76f8\u6bd4\u4e8e\u7f16\u8bd1\u955c\u50cf\u8017\u65f6\u8f83\u77ed\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u5f00\u53d1\u8005\u793e\u533a\u7684\u955c\u50cf\uff0c\u60f3\u4f53\u9a8c\u955c\u50cf\u7f16\u8bd1\u7684\u5b8c\u6574\u8fc7\u7a0b\uff0c\u8bf7\u5728k230_sdk\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u4e0b\u8ff0\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u5728docker\u5bb9\u5668\u4e2d\u7f16\u8bd1\u955c\u50cf\u8017\u65f6\u8f83\u957f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u5b8c\u6210\nmake CONF=k230_canmv_defconfig\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10243-\u955c\u50cf\u70e7\u5f55",children:"10.2.4.3 \u955c\u50cf\u70e7\u5f55"}),"\n",(0,s.jsx)(e.p,{children:"\u7f16\u8bd1\u7ed3\u675f\u540e\u5728output/k230_canmv_defconfig/images\u76ee\u5f55\u4e0b\u53ef\u4ee5\u627e\u5230\u7f16\u8bd1\u597d\u7684\u955c\u50cf\u6587\u4ef6\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"k230_canmv_defconfig/images\n \u251c\u2500\u2500 big-core\n \u251c\u2500\u2500 little-core\n \u251c\u2500\u2500 sysimage-sdcard.img    # SD\u5361\u542f\u52a8\u955c\u50cf\n \u2514\u2500\u2500 sysimage-sdcard.img.gz # SD\u5361\u542f\u52a8\u955c\u50cf\u538b\u7f29\u5305\n"})}),"\n",(0,s.jsx)(e.p,{children:"CANMV K230 \u652f\u6301SDCard\u542f\u52a8\u65b9\u5f0f\u3002\u4e3a\u65b9\u4fbf\u5f00\u53d1\uff0c\u5efa\u8bae\u60a8\u51c6\u5907\u4e00\u5f20TF\u5361(Micro SD\u5361)\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Linux:"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728SD\u5361\u63d2\u5230\u5bbf\u4e3b\u673a\u4e4b\u524d\uff0c\u8f93\u5165\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"ls -l /dev/sd\\*\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d\u7684\u5b58\u50a8\u8bbe\u5907\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06TF\u5361\u63d2\u5165\u5bbf\u4e3b\u673a\u540e\uff0c\u518d\u6b21\u8f93\u5165\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"ls -l /dev/sd\\*\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u67e5\u770b\u6b64\u65f6\u7684\u5b58\u50a8\u8bbe\u5907\uff0c\u65b0\u589e\u52a0\u7684\u5c31\u662fTF\u5361\u8bbe\u5907\u8282\u70b9\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5047\u8bbe/dev/sdc\u5c31\u662fTF\u5361\u8bbe\u5907\u8282\u70b9\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u70e7\u5f55TF\u5361\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"sudo dd if=sysimage-sdcard.img of=/dev/sdc bs=1M oflag=sync\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Windows:"})}),"\n",(0,s.jsxs)(e.p,{children:["Windows\u4e0b\u53ef\u901a\u8fc7rufus\u5de5\u5177\u5bf9TF\u5361\u8fdb\u884c\u70e7\u5f55\uff0c",(0,s.jsx)(e.a,{href:"http://rufus.ie/downloads/",children:"rufus\u5de5\u5177\u4e0b\u8f7d\u5730\u5740"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:"1\uff09\u5c06SD\u5361\u63d2\u5165PC\uff0c\u7136\u540e\u542f\u52a8rufus\u5de5\u5177\uff0c\u70b9\u51fb\u5de5\u5177\u754c\u9762\u7684\u201d\u9009\u62e9\u201d\u6309\u94ae\uff0c\u9009\u62e9\u5f85\u70e7\u5199\u7684\u56fa\u4ef6\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-flash-from-file",src:i(52428).A+"",width:"1533",height:"806"})}),"\n",(0,s.jsx)(e.p,{children:"2\uff09\u70b9\u51fb\u201c\u5f00\u59cb\u201d\u6309\u94ae\u5f00\u59cb\u70e7\u5199\uff0c\u70e7\u5199\u8fc7\u7a0b\u6709\u8fdb\u5ea6\u6761\u5c55\u793a\uff0c\u70e7\u5199\u7ed3\u675f\u540e\u4f1a\u63d0\u793a\u201c\u51c6\u5907\u5c31\u7eea\u201d\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-flash",src:i(70358).A+"",width:"591",height:"792"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-sure",src:i(8937).A+"",width:"682",height:"259"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus-warning",src:i(5737).A+"",width:"685",height:"284"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"rufus_finish",src:i(33128).A+"",width:"593",height:"804"})}),"\n",(0,s.jsx)(e.h4,{id:"10244-\u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f",children:"10.2.4.4 \u4e0a\u7535\u542f\u52a8\u5f00\u53d1\u677f"}),"\n",(0,s.jsxs)(e.p,{children:["\u5b89\u88c5MobaXterm\u5b9e\u73b0\u4e32\u53e3\u901a\u4fe1\uff0cMobaXterm\u4e0b\u8f7d\u5730\u5740:",(0,s.jsx)(e.a,{href:"https://mobaxterm.mobatek.net/",children:"https://mobaxterm.mobatek.net"}),"\u3002"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"CanMV-K230_debug",src:i(80959).A+"",width:"738",height:"531"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5c06\u70e7\u5f55\u5b8c\u6210\u7684SD\u5361\u63d2\u5165\u8fdb\u5f00\u677f\u677f\u5361\u69fd\u4e2d\uff0cHDMI\u8f93\u51fa\u8fde\u663e\u793a\u5668\uff0c\u767e\u5146\u7f51\u53e3\u8fde\u4ee5\u592a\u7f51\uff0cPOWER\u8fde\u4e32\u53e3\u5e76\u4f9b\u7535\u3002\u7cfb\u7edf\u4e0a\u7535\u540e\uff0c\u9ed8\u8ba4\u4f1a\u6709",(0,s.jsx)(e.strong,{children:"\u4e24\u4e2a\u4e32\u53e3\u8bbe\u5907"}),"\uff0c\u53ef\u5206\u522b\u7528\u4e8e\u8bbf\u95ee\u5c0f\u6838Linux\u548c\u5927\u6838RTSmart"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5c0f\u6838Linux\u9ed8\u8ba4\u7528\u6237\u540droot\uff0c\u5bc6\u7801\u4e3a\u7a7a\u3002\u5927\u6838RTSmart\u7cfb\u7edf\u4e2d\u5f00\u673a\u4f1a\u81ea\u52a8\u542f\u52a8\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u6309",(0,s.jsx)(e.code,{children:"q"}),"\u952e\u9000\u51fa\u81f3\u547d\u4ee4\u63d0\u793a\u7b26\u7ec8\u7aef\u3002"]}),"\n",(0,s.jsx)(e.h3,{id:"1025-c\u4ee3\u7801\u7f16\u8bd1",children:"10.2.5 C++\u4ee3\u7801\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.h4,{id:"10251-\u4ee3\u7801\u7ed3\u6784",children:"10.2.5.1 \u4ee3\u7801\u7ed3\u6784"}),"\n",(0,s.jsxs)(e.p,{children:["\u5b8c\u6210\u4e0a\u8ff0\u5f00\u53d1\u677f\u7684\u51c6\u5907\u5de5\u4f5c\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528C++\u7f16\u5199\u81ea\u5df1\u7684\u4ee3\u7801\uff0c\u4e0b\u9762\u5c31\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u793a\u4f8b\u4ee3\u7801\u8fdb\u884c\u89e3\u6790\u3002\u672c\u6559\u7a0b\u7ed9\u51fa\u76f8\u5173\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u793a\u4f8b\u4ee3\u7801\uff0c\u5e76\u8fdb\u884c\u89e3\u6790\u3002\u793a\u4f8b\u4ee3\u7801\u53c2\u8003:",(0,s.jsx)(e.a,{href:"https://github.com/kendryte/K230_training_scripts/tree/main/end2end_det_doc/k230_code",children:"kendryte/K230_training_scripts"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"k230_code\n\u251c\u2500\u2500cmake\n \u251c\u2500\u2500link.lds #\u94fe\u63a5\u811a\u672c\n   \u251c\u2500\u2500Riscv64.cmake\n\u251c\u2500\u2500k230_deploy\n   \u251c\u2500\u2500ai_base.cc # \u6a21\u578b\u90e8\u7f72\u57fa\u7c7b\u5b9e\u73b0\n   \u251c\u2500\u2500ai_base.h # \u6a21\u578b\u90e8\u7f72\u57fa\u7c7b\uff0c\u5c01\u88c5\u4e86nncase\u52a0\u8f7d\u3001input\u8bbe\u7f6e\u3001\u6a21\u578b\u63a8\u7406\u3001\u83b7\u53d6output\u64cd\u4f5c\uff0c\u540e\u7eed\u5177\u4f53\u4efb\u52a1\u5f00\u53d1\u53ea\u9700\u5173\u6ce8\u6a21\u578b\u7684\u524d\u5904\u7406\u3001\u540e\u5904\u7406\u5373\u53ef\n   \u251c\u2500\u2500anchorbase_det.cc # \u76ee\u6807\u68c0\u6d4bcode\u7c7b\u5b9e\u73b0\n   \u251c\u2500\u2500anchorbase_det.h # \u76ee\u6807\u68c0\u6d4b\u7c7b\u5b9a\u4e49\uff0c\u7ee7\u627fAIBase\uff0c\u7528\u4e8e\u52a0\u8f7dkmodel\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1,\u5c01\u88c5\u6a21\u578b\u63a8\u7406\u7684\u524d\u540e\u5904\u7406\n   \u251c\u2500\u2500main.cc # \u4e3b\u51fd\u6570\uff0c\u53c2\u6570\u89e3\u6790\uff0c\u521d\u59cb\u5316AnchorBaseDet\u7c7b\u793a\u4f8b\uff0c\u5b9e\u73b0\u4e0a\u677f\u529f\u80fd\n   \u251c\u2500\u2500scoped_timing.hpp # \u65f6\u95f4\u6d4b\u8bd5\u5de5\u5177\n   \u251c\u2500\u2500utils.cc # \u5de5\u5177\u7c7b\u5b9e\u73b0 \n   \u251c\u2500\u2500utils.h # \u5de5\u5177\u7c7b, \u5c01\u88c5\u4e86\u56fe\u50cf\u9884\u5904\u7406\u548c\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u5e38\u7528\u51fd\u6570\uff0c\u5305\u62ec\u8bfb\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3001\u4fdd\u5b58\u56fe\u7247\u3001\u56fe\u50cf\u5904\u7406\u3001\u7ed3\u679c\u7ed8\u5236\u7b49\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u5df1\u9700\u6c42\u4e30\u5bcc\u8be5\u6587\u4ef6\n   \u251c\u2500\u2500vi_vo.h # \u89c6\u9891\u8f93\u5165\u8f93\u51fa\u5934\u6587\u4ef6\n   \u251c\u2500\u2500json.h # json\u6587\u4ef6\u89e3\u6790\u5934\u6587\u4ef6\n   \u251c\u2500\u2500json.cpp # json\u6587\u4ef6\u89e3\u6790\u63a5\u53e3\u5b9e\u73b0\n   \u251c\u2500\u2500CMakeLists.txt # CMake\u811a\u672c\u7528\u4e8e\u6784\u5efa\u4e00\u4e2a\u4f7f\u7528C/C++\u6e90\u6587\u4ef6\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5e76\u94fe\u63a5\u5230\u5404\u79cd\u5e93\n\u251c\u2500\u2500build_app.sh # \u7f16\u8bd1\u811a\u672c\uff0c\u4f7f\u7528\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7f16\u8bd1k230_deploy\u5de5\u7a0b\n\u251c\u2500\u2500CMakeLists.txt # CMake\u811a\u672c\u7528\u4e8e\u6784\u5efa nncase_sdk \u7684\u9879\u76ee\u5de5\u7a0b\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10252-\u6838\u5fc3\u4ee3\u7801",children:"10.2.5.2 \u6838\u5fc3\u4ee3\u7801"}),"\n",(0,s.jsx)(e.p,{children:"\u5f53\u60a8\u5f97\u5230kmodel\u6a21\u578b\u4e4b\u540e\uff0c\u5177\u4f53AI\u4e0a\u677f\u4ee3\u7801\u5305\u62ec\uff1asensor&display\u521d\u59cb\u5316\u3001kmodel\u52a0\u8f7d\u3001\u6a21\u578b\u8f93\u5165\u8f93\u51fa\u8bbe\u7f6e\u3001\u83b7\u53d6\u56fe\u50cf\u3001\u8f93\u5165\u6570\u636e\u52a0\u8f7d\u3001\u8f93\u5165\u6570\u636e\u9884\u5904\u7406\u3001\u6a21\u578b\u63a8\u7406\u3001\u6a21\u578b\u8f93\u51fa\u83b7\u53d6\u3001\u8f93\u51fa\u540e\u5904\u7406\u3001OSD\u663e\u793a\u7b49\u6b65\u9aa4\u3002\u5982\u56fe\u6240\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"img",src:i(20940).A+"",width:"1091",height:"316"})}),"\n",(0,s.jsx)(e.p,{children:"\u56fe\u4e2d\u9ec4\u6846\u90e8\u5206\u5728vi_vo.h\u4e2d\u7ed9\u51fa\u4e86\u7ed9\u51fa\u4e86\u63a5\u53e3\uff0c\u4e0b\u9762\u9488\u5bf9\u7ea2\u6846\u90e8\u5206\uff0c\u4ecb\u7ecd\u5982\u4f55\u5b9e\u73b0AI\u5e94\u7528\u5f00\u53d1\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u4e0a\u8ff0\u8fc7\u7a0b\u4e2d\uff0ckmodel\u52a0\u8f7d\u3001\u6a21\u578b\u8f93\u5165\u8bbe\u7f6e\u3001\u6a21\u578b\u63a8\u7406\u3001\u6a21\u578b\u8f93\u51fa\u83b7\u53d6\u662f\u6240\u6709\u4efb\u52a1\u7684\u5171\u6709\u6b65\u9aa4\u3002\u6211\u4eec\u5bf9\u6b64\u505a\u4e86\u5c01\u88c5\uff0cai_base.h\u548cai_base.cc\u53ef\u4ee5\u76f4\u63a5\u62f7\u8d1d\u4f7f\u7528\u3002"}),"\n",(0,s.jsx)(e.p,{children:"ai_base.h\u5b9a\u4e49\u4e86AIBase\u57fa\u7c7b\u4ee5\u53ca\u5171\u6709\u64cd\u4f5c\u7684\u63a5\u53e3\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#ifndef AI_BASE_H\n#define AI_BASE_H\n#include <vector>\n#include <string>\n#include <fstream>\n#include <nncase/runtime/interpreter.h>\n#include "scoped_timing.hpp"\n\nusing std::string;\nusing std::vector;\nusing namespace nncase::runtime;\n\n/**\n * @brief AI\u57fa\u7c7b\uff0c\u5c01\u88c5nncase\u76f8\u5173\u64cd\u4f5c\n * \u4e3b\u8981\u5c01\u88c5\u4e86nncase\u7684\u52a0\u8f7d\u3001\u8bbe\u7f6e\u8f93\u5165\u3001\u8fd0\u884c\u3001\u83b7\u53d6\u8f93\u51fa\u64cd\u4f5c\uff0c\u540e\u7eed\u5f00\u53d1demo\u53ea\u9700\u8981\u5173\u6ce8\u6a21\u578b\u7684\u524d\u5904\u7406\u3001\u540e\u5904\u7406\u5373\u53ef\n */\nclass AIBase\n{\npublic:\n    /**\n     * @brief AI\u57fa\u7c7b\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\n     * @param kmodel_file kmodel\u6587\u4ef6\u8def\u5f84\n     * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09None\n     * @return None\n     */\n    AIBase(const char *kmodel_file,const string model_name, const int debug_mode = 1);\n    /**\n     * @brief AI\u57fa\u7c7b\u6790\u6784\u51fd\u6570\n     * @return None\n    */\n    ~AIBase();\n\n    /**\n     * @brief \u8bbe\u7f6ekmodel\u8f93\u5165\n     * @param buf \u8f93\u5165\u6570\u636e\u6307\u9488\n     * @param size \u8f93\u5165\u6570\u636e\u5927\u5c0f\n     * @return None\n     */\n    void set_input(const unsigned char *buf, size_t size);\n\n    /**\n     * @brief \u6839\u636e\u7d22\u5f15\u83b7\u53d6kmodel\u8f93\u5165tensor\n     * @param idx \u8f93\u5165\u6570\u636e\u7d22\u5f15\n     * @return None\n     */\n    runtime_tensor get_input_tensor(size_t idx);\n\n    /**\n     * @brief \u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165tensor\n     * @param idx \u8f93\u5165\u6570\u636e\u7d22\u5f15\n     * @param tensor \u8f93\u5165tensor\n     */\n    void set_input_tensor(size_t idx, runtime_tensor &tensor);\n\n    /**\n     * @brief \u521d\u59cb\u5316kmodel\u8f93\u51fa\n     * @return None\n     */\n    void set_output();\n\n    /**\n     * @brief \u63a8\u7406kmodel\n     * @return None\n     */\n    void run();\n\n    /**\n     * @brief \u83b7\u53d6kmodel\u8f93\u51fa\uff0c\u7ed3\u679c\u4fdd\u5b58\u5728\u5bf9\u5e94\u7684\u7c7b\u5c5e\u6027\u4e2d\n     * @return None\n     */\n    void get_output();\n\n\n\nprotected:\n    string model_name_;                    // \u6a21\u578b\u540d\u5b57\n    int debug_mode_;                       // \u8c03\u8bd5\u6a21\u578b\uff0c0\uff08\u4e0d\u6253\u5370\uff09\uff0c1\uff08\u6253\u5370\u65f6\u95f4\uff09\uff0c2\uff08\u6253\u5370\u6240\u6709\uff09\n    vector<float *> p_outputs_;            // kmodel\u8f93\u51fa\u5bf9\u5e94\u7684\u6307\u9488\u5217\u8868\n    vector<vector<int>> input_shapes_;     //{{N,C,H,W},{N,C,H,W}...}\n    vector<vector<int>> output_shapes_;    //{{N,C,H,W},{N,C,H,W}...}} \u6216 {{N,C},{N,C}...}}\u7b49\n    vector<int> each_input_size_by_byte_;  //{0,layer1_length,layer1_length+layer2_length,...}\n    vector<int> each_output_size_by_byte_; //{0,layer1_length,layer1_length+layer2_length,...}\n    \nprivate:\n    /**\n     * @brief \u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u5165\uff0c\u5e76\u83b7\u53d6\u8f93\u5165shape\n     * @return None\n     */\n    void set_input_init();\n\n    /**\n     * @brief \u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u51fa\uff0c\u5e76\u83b7\u53d6\u8f93\u51fashape\n     * @return None\n     */\n    void set_output_init();\n\n    vector<unsigned char> kmodel_vec_; // \u901a\u8fc7\u8bfb\u53d6kmodel\u6587\u4ef6\u5f97\u5230\u6574\u4e2akmodel\u6570\u636e\uff0c\u7528\u4e8e\u4f20\u7ed9kmodel\u89e3\u91ca\u5668\u52a0\u8f7dkmodel\n    interpreter kmodel_interp_; // kmodel\u89e3\u91ca\u5668\uff0c\u4ecekmodel\u6587\u4ef6\u6784\u5efa\uff0c\u8d1f\u8d23\u6a21\u578b\u7684\u52a0\u8f7d\u3001\u8f93\u5165\u8f93\u51fa\u8bbe\u7f6e\u548c\u63a8\u7406\n};\n#endif\n'})}),"\n",(0,s.jsx)(e.p,{children:"ai_base.cc\u662fai_base.h\u4e2d\u5b9a\u4e49\u6240\u6709\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'/*\nai_base.h\u4e2dAIBase\u7c7b\u5b9a\u4e49\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\n*/\n#include "ai_base.h"\n#include <iostream>\n#include <cassert>\n#include "utils.h"\n\nusing std::cout;\nusing std::endl;\nusing namespace nncase;\nusing namespace nncase::runtime::detail;\n\n/*AIBase\u6784\u9020\u51fd\u6570*/\nAIBase::AIBase(const char *kmodel_file,const string model_name, const int debug_mode) : debug_mode_(debug_mode),model_name_(model_name)\n{\n    if (debug_mode > 1)\n        cout << "kmodel_file:" << kmodel_file << endl;\n    std::ifstream ifs(kmodel_file, std::ios::binary);//\u8bfb\u5165kmodel\n    kmodel_interp_.load_model(ifs).expect("Invalid kmodel");//kmodel\u89e3\u91ca\u5668\u52a0\u8f7dkmodel\n    set_input_init();\n    set_output_init();\n}\n\n/*\u6790\u6784\u51fd\u6570*/\nAIBase::~AIBase()\n{\n}\n\n/*\n\u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u5165\n*/\nvoid AIBase::set_input_init()\n{\n    ScopedTiming st(model_name_ + " set_input init", debug_mode_);//\u8ba1\u65f6\n    int input_total_size = 0;\n    each_input_size_by_byte_.push_back(0); // \u5148\u88650,\u4e3a\u4e4b\u540e\u505a\u51c6\u5907\n    for (int i = 0; i < kmodel_interp_.inputs_size(); ++i)\n    {\n        auto desc = kmodel_interp_.input_desc(i);//\u7d22\u5f15\u4e3ai\u7684\u8f93\u5165\u63cf\u8ff0\n        auto shape = kmodel_interp_.input_shape(i);//\u7d22\u5f15\u4e3ai\u7684\u8f93\u5165shape\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create input tensor");//\u521b\u5efa\u8f93\u5165tensor\n        kmodel_interp_.input_tensor(i, tensor).expect("cannot set input tensor");//\u7ed1\u5b9atensor\u5230\u6a21\u578b\u8f93\u5165\n        vector<int> in_shape = {shape[0], shape[1], shape[2], shape[3]};\n        input_shapes_.push_back(in_shape);//\u5b58\u50a8\u8f93\u5165shape\n        int dsize = shape[0] * shape[1] * shape[2] * shape[3];//\u8f93\u5165\u603b\u5b57\u8282\u6570\n        if (debug_mode_ > 1)\n            cout << "input shape:" << shape[0] << " " << shape[1] << " " << shape[2] << " " << shape[3] << endl;\n        if (desc.datatype == 0x06)//\u8f93\u5165\u6570\u636e\u4e3auint8\u7c7b\u578b\n        {\n            input_total_size += dsize;\n            each_input_size_by_byte_.push_back(input_total_size);\n        }\n        else if (desc.datatype == 0x0B)//\u8f93\u5165\u6570\u636e\u4e3afloat32\u7c7b\u578b\n        {\n            input_total_size += (dsize * 4);\n            each_input_size_by_byte_.push_back(input_total_size);\n        }\n        else\n            assert(("kmodel input data type supports only uint8, float32", 0));\n    }\n    each_input_size_by_byte_.push_back(input_total_size); // \u6700\u540e\u4e00\u4e2a\u4fdd\u5b58\u603b\u5927\u5c0f\n}\n\n/*\n\u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165\u6570\u636e,\u52a0\u8f7d\u6a21\u578b\u8f93\u5165\u7684\u5177\u4f53\u6570\u636e\n*/\nvoid AIBase::set_input(const unsigned char *buf, size_t size)\n{\n    //\u68c0\u67e5\u8f93\u5165\u6570\u636e\u5927\u5c0f\u662f\u5426\u548c\u6a21\u578b\u8981\u6c42\u5927\u5c0f\u76f8\u5339\u914d\n    if (*each_input_size_by_byte_.rbegin() != size)\n        cout << "set_input:the actual input size{" + std::to_string(size) + "} is different from the model\'s required input size{" + std::to_string(*each_input_size_by_byte_.rbegin()) + "}" << endl;\n    assert((*each_input_size_by_byte_.rbegin() == size));\n    //\u8ba1\u65f6\n    ScopedTiming st(model_name_ + " set_input", debug_mode_);\n    //\u5faa\u73af\u904d\u5386\u6a21\u578b\u8f93\u5165\n    for (size_t i = 0; i < kmodel_interp_.inputs_size(); ++i)\n    {\n        //\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u5165\u63cf\u8ff0\u548c\u5f62\u72b6\n        auto desc = kmodel_interp_.input_desc(i);\n        auto shape = kmodel_interp_.input_shape(i);\n        //\u521b\u5efatensor\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create input tensor");\n        //\u5c06\u8f93\u5165tensor\u6620\u5c04\u5230\u53ef\u5199\u533a\u57df\n        auto mapped_buf = std::move(hrt::map(tensor, map_access_::map_write).unwrap()); // mapped_buf\u5b9e\u9645\u662f\u6709\u7f13\u5b58\u6570\u636e\u7684\n        //\u62f7\u8d1d\u6570\u636e\u5230tensor\u7684\u7f13\u51b2\u533a\n        memcpy(reinterpret_cast<void *>(mapped_buf.buffer().data()), buf, each_input_size_by_byte_[i + 1] - each_input_size_by_byte_[i]);\n        //\u89e3\u9664\u6620\u5c04\n        auto ret = mapped_buf.unmap();\n        ret = hrt::sync(tensor, sync_op_t::sync_write_back, true);\n        if (!ret.is_ok())\n        {\n            std::cerr << "hrt::sync failed" << std::endl;\n            std::abort();\n        }\n        //\u5c06tensor\u548c\u6a21\u578b\u7684\u8f93\u5165\u7ed1\u5b9a\n        kmodel_interp_.input_tensor(i, tensor).expect("cannot set input tensor");\n    }\n}\n\n/*\n\u6309\u7167\u7d22\u5f15\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u5165tensor\n*/\nruntime_tensor AIBase::get_input_tensor(size_t idx)\n{\n    return kmodel_interp_.input_tensor(idx).expect("cannot get input tensor");\n}\n\n/*\n\u6309\u7167\u7d22\u5f15\u8bbe\u7f6e\u6a21\u578b\u7684\u8f93\u5165tensor\n*/\nvoid AIBase::set_input_tensor(size_t idx, runtime_tensor &tensor)\n{\n    ScopedTiming st(model_name_ + " set_input_tensor", debug_mode_);\n    kmodel_interp_.input_tensor(idx, tensor).expect("cannot set input tensor");\n}\n\n/*\n\u9996\u6b21\u521d\u59cb\u5316kmodel\u8f93\u51fa\n*/\nvoid AIBase::set_output_init()\n{\n    //\u8ba1\u65f6\n    ScopedTiming st(model_name_ + " set_output_init", debug_mode_);\n    each_output_size_by_byte_.clear();\n    int output_total_size = 0;\n    each_output_size_by_byte_.push_back(0);\n    //\u5faa\u73af\u904d\u5386\u6a21\u578b\u7684\u8f93\u51fa\n    for (size_t i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        //\u83b7\u53d6\u8f93\u51fa\u63cf\u8ff0\u548c\u5f62\u72b6\n        auto desc = kmodel_interp_.output_desc(i);\n        auto shape = kmodel_interp_.output_shape(i);\n        vector<int> out_shape;\n        int dsize = 1;\n        for (int j = 0; j < shape.size(); ++j)\n        {\n            out_shape.push_back(shape[j]);\n            dsize *= shape[j];\n            if (debug_mode_ > 1)\n                cout << shape[j] << ",";\n        }\n        if (debug_mode_ > 1)\n            cout << endl;\n        output_shapes_.push_back(out_shape);\n        //\u83b7\u53d6\u6570\u636e\u7684\u603b\u5927\u5c0f\n        if (desc.datatype == 0x0B)\n        {\n            output_total_size += (dsize * 4);\n            each_output_size_by_byte_.push_back(output_total_size);\n        }\n        else\n            assert(("kmodel output data type supports only float32", 0));\n        //\u521b\u5efatensor\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create output tensor");\n        //\u5c06tensor\u548c\u6a21\u578b\u7684\u8f93\u51fa\u7ed1\u5b9a\n        kmodel_interp_.output_tensor(i, tensor).expect("cannot set output tensor");\n    }\n}\n\n/*\n\u8bbe\u7f6ekmodel\u6a21\u578b\u7684\u8f93\u51fa\n*/\nvoid AIBase::set_output()\n{\n    ScopedTiming st(model_name_ + " set_output", debug_mode_);\n    //\u5faa\u73af\u5c06\u8f93\u51fatensor\u548c\u6a21\u578b\u7684\u8f93\u51fa\u7ed1\u5b9a\n    for (size_t i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        auto desc = kmodel_interp_.output_desc(i);\n        auto shape = kmodel_interp_.output_shape(i);\n        auto tensor = host_runtime_tensor::create(desc.datatype, shape, hrt::pool_shared).expect("cannot create output tensor");\n        kmodel_interp_.output_tensor(i, tensor).expect("cannot set output tensor");\n    }\n}\n\n/*\n\u8c03\u7528kmodel_interp_.run()\u5b9e\u73b0\u6a21\u578b\u63a8\u7406\n*/\nvoid AIBase::run()\n{\n    ScopedTiming st(model_name_ + " run", debug_mode_);\n    kmodel_interp_.run().expect("error occurred in running model");\n}\n\n/*\n\u83b7\u53d6\u6a21\u578b\u7684\u8f93\u51fa(float\u6307\u9488\u5f62\u5f0f\uff0c\u540e\u5904\u7406\u65f6\u7531\u540e\u5904\u7406\u7684\u5177\u4f53\u8981\u6c42\u53d6\u51fa)\uff0c\u4e3a\u540e\u7eed\u540e\u5904\u7406\u505a\u51c6\u5907\n*/\nvoid AIBase::get_output()\n{\n    ScopedTiming st(model_name_ + " get_output", debug_mode_);\n    //p_outputs_\u5b58\u50a8\u6a21\u578b\u7684\u8f93\u51fa\u7684\u6307\u9488\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u8f93\u51fa\n    p_outputs_.clear();\n    for (int i = 0; i < kmodel_interp_.outputs_size(); i++)\n    {\n        //\u83b7\u53d6\u8f93\u51fatensor\n        auto out = kmodel_interp_.output_tensor(i).expect("cannot get output tensor");\n        //\u5c06\u8f93\u51fatensor\u6620\u5c04\u5230\u4e3b\u673a\u5185\u5b58\n        auto buf = out.impl()->to_host().unwrap()->buffer().as_host().unwrap().map(map_access_::map_read).unwrap().buffer();\n        //\u5c06\u6620\u5c04\u540e\u7684\u6570\u636e\u8f6c\u6362\u4e3afloat\u6307\u9488\n        float *p_out = reinterpret_cast<float *>(buf.data());\n        p_outputs_.push_back(p_out);\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u540c\u4efb\u52a1\u573a\u666f\u7684\u524d\u5904\u7406\u548c\u540e\u5904\u7406\u6709\u6240\u4e0d\u540c\uff0c\u6bd4\u5982\u5206\u7c7b\u4f7f\u7528softmax\u8ba1\u7b97\u7c7b\u522b\u6982\u7387\uff0c\u76ee\u6807\u68c0\u6d4b\u8981\u505anms\uff1b\u56e0\u6b64\u60a8\u53ef\u4ee5\u5b9a\u4e49\u60a8\u7684\u4efb\u52a1\u573a\u666f\u7c7b\u7ee7\u627fAIBase\u7c7b\uff0c\u5c06\u9488\u5bf9\u8be5\u4efb\u52a1\u7684\u524d\u5904\u7406\u548c\u540e\u5904\u7406\u4ee3\u7801\u8fdb\u884c\u5c01\u88c5\u3002"}),"\n",(0,s.jsx)(e.p,{children:"anchorbase_det.h\u5b9a\u4e49\u4e86\u548c\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u76f8\u5173\u7684\u6a21\u578b\u524d\u5904\u7406\u3001\u540e\u5904\u7406\u63a5\u53e3\uff0c\u5728anchorbase_det.cc\u4e2d\u5b9e\u73b0\u4e86\u63a5\u53e3\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#ifndef _ANCHORBASE_DET_H\n#define _ANCHORBASE_DET_H\n\n#include "utils.h"\n#include "ai_base.h"\n\n#define STRIDE_NUM 3\n\n/**\n * @brief \u591a\u76ee\u6807\u68c0\u6d4b\n * \u4e3b\u8981\u5c01\u88c5\u4e86\u5bf9\u4e8e\u6bcf\u4e00\u5e27\u56fe\u7247\uff0c\u4ece\u9884\u5904\u7406\u3001\u8fd0\u884c\u5230\u540e\u5904\u7406\u7ed9\u51fa\u7ed3\u679c\u7684\u8fc7\u7a0b\n */\nclass AnchorBaseDet : public AIBase\n{\n    public:\n\n    /**\n    * @brief AnchorBaseDet\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\u548c\u591a\u76ee\u6807\u68c0\u6d4b\u9608\u503c\n    * @param args        \u6784\u5efa\u5bf9\u8c61\u9700\u8981\u7684\u53c2\u6570\uff0cconfig.json\u6587\u4ef6\uff08\u5305\u542b\u68c0\u6d4b\u9608\u503c\u7b49\uff09\n    * @param kmodel_file  kmodel\u8def\u5f84\n    * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09\n    * @return None\n    */\n    AnchorBaseDet(config_args args, const char *kmodel_file, const int debug_mode = 1);\n\n    /**\n    * @brief AnchorBaseDet\u6784\u9020\u51fd\u6570\uff0c\u52a0\u8f7dkmodel,\u5e76\u521d\u59cb\u5316kmodel\u8f93\u5165\u3001\u8f93\u51fa\u548c\u591a\u76ee\u6807\u68c0\u6d4b\u9608\u503c\n    * @param args        \u6784\u5efa\u5bf9\u8c61\u9700\u8981\u7684\u53c2\u6570\uff0cconfig.json\u6587\u4ef6\uff08\u5305\u542b\u68c0\u6d4b\u9608\u503c\uff0ckmodel\u8def\u5f84\u7b49\uff09\n    * @param kmodel_file  kmodel\u8def\u5f84\n    * @param isp_shape   isp\u8f93\u5165\u5927\u5c0f\uff08chw\uff09\n    * @param vaddr       isp\u5bf9\u5e94\u865a\u62df\u5730\u5740\n    * @param paddr       isp\u5bf9\u5e94\u7269\u7406\u5730\u5740\n    * @param debug_mode  0\uff08\u4e0d\u8c03\u8bd5\uff09\u3001 1\uff08\u53ea\u663e\u793a\u65f6\u95f4\uff09\u30012\uff08\u663e\u793a\u6240\u6709\u6253\u5370\u4fe1\u606f\uff09\n    * @return None\n    */\n    AnchorBaseDet(config_args args, const char *kmodel_file, FrameCHWSize isp_shape, uintptr_t vaddr, uintptr_t paddr,const int debug_mode);\n   \n    /**\n    * @brief AnchorBaseDet\u6790\u6784\u51fd\u6570\n    * @return None\n    */\n    ~AnchorBaseDet();\n\n    /**\n    * @brief \u56fe\u7247\u9884\u5904\u7406\n    * @param ori_img \u539f\u59cb\u56fe\u7247\n    * @return None\n    */\n    void pre_process(cv::Mat ori_img);\n\n    /**\n    * @brief \u89c6\u9891\u6d41\u9884\u5904\u7406\uff08ai2d for isp\uff09\n    * @return None\n    */\n    void pre_process();\n\n    /**\n    * @brief kmodel\u63a8\u7406\n    * @return None\n    */\n    void inference();\n\n    /**\n    * @brief kmodel\u63a8\u7406\u7ed3\u679c\u540e\u5904\u7406\n    * @param frame_size \u539f\u59cb\u56fe\u50cf/\u5e27\u5bbd\u9ad8\uff0c\u7528\u4e8e\u5c06\u7ed3\u679c\u653e\u5230\u539f\u59cb\u56fe\u50cf\u5927\u5c0f\n    * @param results \u540e\u5904\u7406\u4e4b\u540e\u7684\u57fa\u4e8e\u539f\u59cb\u56fe\u50cf\u7684\u68c0\u6d4b\u7ed3\u679c\u96c6\u5408\n    * @return None\n    */\n    void post_process(FrameSize frame_size, vector<ob_det_res> &results);\n\n    private:\n\n    /**\n    * @brief \u68c0\u67e5\u7ed3\u679c\u7684\u521d\u6b65\u5904\u7406\n    * @param data \u6a21\u578b\u8f93\u51fa\u4e00\u5c42\u7684\u5934\u6307\u9488\n    * @param frame_size \u539f\u59cb\u56fe\u50cf/\u5e27\u5bbd\u9ad8\uff0c\u7528\u4e8e\u5c06\u7ed3\u679c\u653e\u5230\u539f\u59cb\u56fe\u50cf\u5927\u5c0f\n    * @param k \u6a21\u578b\u7684\u7b2ck\u5c42\u7d22\u5f15\n    * @return \u5904\u7406\u540e\u7684\u68c0\u6d4b\u6846\u96c6\u5408\n    */\n    vector<ob_det_res> decode_infer(float* data, FrameSize frame_size, int k);\n\n    /**\n    * @brief \u68c0\u67e5\u7ed3\u679c\u7684\u521d\u6b65\u5904\u7406\n    * @param data \u6a21\u578b\u8f93\u51fa\u4e00\u5c42\u7684\u5934\u6307\u9488\n    * @param frame_size \u539f\u59cb\u56fe\u50cf/\u5e27\u5bbd\u9ad8\uff0c\u7528\u4e8e\u5c06\u7ed3\u679c\u653e\u5230\u539f\u59cb\u56fe\u50cf\u5927\u5c0f\n    * @param k \u6a21\u578b\u7684\u7b2ck\u5c42\u7d22\u5f15\n    * @return \u5904\u7406\u540e\u7684\u68c0\u6d4b\u6846\u96c6\u5408\n    */\n    vector<vector<ob_det_res>> decode_infer_class(float* data, FrameSize frame_size, int k);\n\n    /**\n    * @brief \u5bf9\u68c0\u6d4b\u7ed3\u679c\u8fdb\u884c\u975e\u6700\u5927\u503c\u6291\u5236\n    * @param input_boxes \u68c0\u6d4b\u6846\u96c6\u5408\n    * @return None\n    */\n void nms(vector<ob_det_res>& input_boxes);\n    \n    std::unique_ptr<ai2d_builder> ai2d_builder_; // ai2d\u6784\u5efa\u5668\n    runtime_tensor ai2d_in_tensor_;              // ai2d\u8f93\u5165tensor\n    runtime_tensor ai2d_out_tensor_;             // ai2d\u8f93\u51fatensor\n    uintptr_t vaddr_;                            // isp\u7684\u865a\u62df\u5730\u5740\n    FrameCHWSize isp_shape_;                     // isp\u5bf9\u5e94\u7684\u5730\u5740\u5927\u5c0f\n\n    float ob_det_thresh;   //\u68c0\u6d4b\u6846\u5206\u6570\u9608\u503c\n    float ob_nms_thresh;   //nms\u9608\u503c\n    vector<string> labels; //\u7c7b\u522b\u540d\u5b57\n    int num_class;         //\u7c7b\u522b\u6570\n int strides[STRIDE_NUM]; //\u6bcf\u5c42\u68c0\u6d4b\u7ed3\u679c\u7684\u5206\u8fa8\u7387\u7f29\u51cf\u88ab\u6570\n float anchors[3][3][2];  //\u68c0\u6d4b\u7684\u9884\u8bbeanchor\n    bool nms_option;\n\n    int input_height;      //\u6a21\u578b\u8f93\u5165\u9ad8\n    int input_width;       //\u6a21\u578b\u8f93\u5165\u5bbd\n\n    float *output_0;    //\u8bfb\u53d6kmodel\u8f93\u51fa\n    float *output_1;    //\u8bfb\u53d6kmodel\u8f93\u51fa\n    float *output_2;    //\u8bfb\u53d6kmodel\u8f93\u51fa\n};\n#endif\n'})}),"\n",(0,s.jsx)(e.p,{children:"anchorbase_det.cc\u662fanchorbase_det.h\u4e2d\u76ee\u6807\u68c0\u6d4b\u76f8\u5173\u524d\u540e\u5904\u7406\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'#include "anchorbase_det.h"\n\n/*\n*\u9759\u6001\u56fe\u63a8\u7406\u6784\u9020\u51fd\u6570\uff0c\u7ee7\u627fAIBase\uff0c\u53c2\u6570\u521d\u59cb\u5316\n*/\nAnchorBaseDet::AnchorBaseDet(config_args args, const char *kmodel_file, const int debug_mode)\n:ob_det_thresh(args.obj_thresh),ob_nms_thresh(args.nms_thresh),labels(args.labels), AIBase(kmodel_file,"AnchorBaseDet", debug_mode)\n{\n    nms_option = args.nms_option;\n    num_class = labels.size();\n    memcpy(this->strides, args.strides, sizeof(args.strides));\n    memcpy(this->anchors, args.anchors, sizeof(args.anchors));\n\n    input_width = input_shapes_[0][3];\n    input_height = input_shapes_[0][2];\n\n    ai2d_out_tensor_ = this -> get_input_tensor(0);\n}\n\n/*\n*\u89c6\u9891\u6d41\u63a8\u7406\u7684\u6784\u9020\u51fd\u6570\uff0c\u7ee7\u627f\u81eaAIBase,\u53c2\u6570\u521d\u59cb\u5316\n*/\nAnchorBaseDet::AnchorBaseDet(config_args args, const char *kmodel_file, FrameCHWSize isp_shape, uintptr_t vaddr, uintptr_t paddr,const int debug_mode)\n:ob_det_thresh(args.obj_thresh),ob_nms_thresh(args.nms_thresh),labels(args.labels), AIBase(kmodel_file,"AnchorBaseDet", debug_mode)\n{\n    nms_option = args.nms_option;\n    num_class = labels.size();\n    memcpy(this->strides, args.strides, sizeof(args.strides));\n    memcpy(this->anchors, args.anchors, sizeof(args.anchors));\n\n    input_width = input_shapes_[0][3];\n    input_height = input_shapes_[0][2];\n\n    vaddr_ = vaddr;\n\n    isp_shape_ = isp_shape;\n    dims_t in_shape{1, isp_shape.channel, isp_shape.height, isp_shape.width};\n\n    ai2d_in_tensor_ = hrt::create(typecode_t::dt_uint8, in_shape, hrt::pool_shared).expect("create ai2d input tensor failed");\n\n    ai2d_out_tensor_ = this -> get_input_tensor(0);\n\n    Utils::padding_resize(isp_shape, {input_shapes_[0][3], input_shapes_[0][2]}, ai2d_builder_, ai2d_in_tensor_, ai2d_out_tensor_, cv::Scalar(114, 114, 114));\n}\n\n/*\n*\u6790\u6784\u51fd\u6570\n*/\nAnchorBaseDet::~AnchorBaseDet()\n{\n\n}\n\n// \u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u5355\u56fe\u63a8\u7406\u9884\u5904\u7406\nvoid AnchorBaseDet::pre_process(cv::Mat ori_img)\n{\n    ScopedTiming st(model_name_ + " pre_process image", debug_mode_);\n    std::vector<uint8_t> chw_vec;\n    Utils::bgr2rgb_and_hwc2chw(ori_img, chw_vec);\n    Utils::padding_resize({ori_img.channels(), ori_img.rows, ori_img.cols}, chw_vec, {input_shapes_[0][3], input_shapes_[0][2]}, ai2d_out_tensor_, cv::Scalar(114, 114, 114));\n}\n\n// \u4f7f\u7528ai2d\u5b9e\u73b0\u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u89c6\u9891\u6d41\u63a8\u7406\u9884\u5904\u7406\nvoid AnchorBaseDet::pre_process()\n{\n    ScopedTiming st(model_name_ + " pre_process video", debug_mode_);\n    size_t isp_size = isp_shape_.channel * isp_shape_.height * isp_shape_.width;\n    auto buf = ai2d_in_tensor_.impl()->to_host().unwrap()->buffer().as_host().unwrap().map(map_access_::map_write).unwrap().buffer();\n    memcpy(reinterpret_cast<char *>(buf.data()), (void *)vaddr_, isp_size);\n    hrt::sync(ai2d_in_tensor_, sync_op_t::sync_write_back, true).expect("sync write_back failed");\n    ai2d_builder_->invoke(ai2d_in_tensor_, ai2d_out_tensor_).expect("error occurred in ai2d running");\n}\n\n//\u63a8\u7406\nvoid AnchorBaseDet::inference()\n{\n    this->run();\n    this->get_output();\n}\n\n// \u76ee\u6807\u68c0\u6d4b\u4efb\u52a1\u7684\u540e\u5904\u7406\uff0c\u5305\u62ec\u4ece\u6a21\u578b\u8f93\u51fa\u89e3\u6790\u4f4d\u7f6e\uff0c\u89e3\u6790\u7c7b\u522b\uff0c\u505aNMS\nvoid AnchorBaseDet::post_process(FrameSize frame_size, vector<ob_det_res> &results)\n{\n    ScopedTiming st(model_name_ + " post_process", debug_mode_);\n    \n    output_0 = p_outputs_[0];\n    output_1 = p_outputs_[1];\n    output_2 = p_outputs_[2];\n\n    if (nms_option)\n    {\n        vector<ob_det_res> box0, box1, box2;\n\n        box0 = decode_infer(output_0, frame_size, 0);\n        box1 = decode_infer(output_1, frame_size, 1);\n        box2 = decode_infer(output_2, frame_size, 2);\n\n        results.insert(results.begin(), box0.begin(), box0.end());\n        results.insert(results.begin(), box1.begin(), box1.end());\n        results.insert(results.begin(), box2.begin(), box2.end());\n        \n        nms(results);\n    }\n    else\n    {\n        vector<vector<ob_det_res>> box0, box1, box2;\n\n        box0 = decode_infer_class(output_0, frame_size, 0);\n        box1 = decode_infer_class(output_1, frame_size, 1);\n        box2 = decode_infer_class(output_2, frame_size, 2);\n\n        for(int i = 0; i < num_class; i++)\n        {\n            box0[i].insert(box0[i].begin(), box1[i].begin(), box1[i].end());\n            box0[i].insert(box0[i].begin(), box2[i].begin(), box2[i].end());\n            nms(box0[i]);\n            results.insert(results.begin(), box0[i].begin(), box0[i].end());\n        }\n    }\n}\n\nvector<ob_det_res> AnchorBaseDet::decode_infer(float* data, FrameSize frame_size, int k)\n{\n    int stride = strides[k];\n    float ratiow = (float)input_width / frame_size.width;\n    float ratioh = (float)input_height / frame_size.height;\n    float gain = ratiow < ratioh ? ratiow : ratioh;\n    std::vector<ob_det_res> result;\n    int grid_size_w = input_width / stride;\n    int grid_size_h = input_height / stride;\n    int one_rsize = num_class + 5;\n    float cx, cy, w, h;\n    for (int shift_y = 0; shift_y < grid_size_h; shift_y++)\n    {\n        for (int shift_x = 0; shift_x < grid_size_w; shift_x++)\n        {\n            int loc = shift_x + shift_y * grid_size_w;\n            for (int i = 0; i < 3; i++)\n            {\n                float* record = data + (loc * 3 + i) * one_rsize;\n                float* cls_ptr = record + 5;\n                for (int cls = 0; cls < num_class; cls++)\n                {\n                    float score = (cls_ptr[cls]) * (record[4]);\n                    if (score > ob_det_thresh)\n                    {\n                        cx = ((record[0]) * 2.f - 0.5f + (float)shift_x) * (float)stride;\n                        cy = ((record[1]) * 2.f - 0.5f + (float)shift_y) * (float)stride;\n                        w = pow((record[2]) * 2.f, 2) * anchors[k][i][0];\n                        h = pow((record[3]) * 2.f, 2) * anchors[k][i][1];\n                        cx -= ((input_width - frame_size.width * gain) / 2);\n                        cy -= ((input_height - frame_size.height * gain) / 2);\n                        cx /= gain;\n                        cy /= gain;\n                        w /= gain;\n                        h /= gain;\n                        ob_det_res box;\n                        box.x1 = std::max(0, std::min(int(frame_size.width), int(cx - w / 2.f)));\n                        box.y1 = std::max(0, std::min(int(frame_size.height), int(cy - h / 2.f)));\n                        box.x2 = std::max(0, std::min(int(frame_size.width), int(cx + w / 2.f)));\n                        box.y2 = std::max(0, std::min(int(frame_size.height), int(cy + h / 2.f)));\n                        box.score = score;\n                        box.label_index = cls;\n                        box.label = labels[cls];\n                        result.push_back(box);\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n\nvector<vector<ob_det_res>> AnchorBaseDet::decode_infer_class(float* data, FrameSize frame_size, int k)\n{\n    int stride = strides[k];\n    float ratiow = (float)input_width / frame_size.width;\n    float ratioh = (float)input_height / frame_size.height;\n    float gain = ratiow < ratioh ? ratiow : ratioh;\n    std::vector<std::vector<ob_det_res>> result;\n    for (int i = 0; i < num_class; i++)\n    {\n        result.push_back(vector<ob_det_res>());//\u4e0d\u65ad\u5f80v2d\u91cc\u52a0\u884c \n    }\n    int grid_size_w = input_width / stride;\n    int grid_size_h = input_height / stride;\n    int one_rsize = num_class + 5;\n    float cx, cy, w, h;\n    for (int shift_y = 0; shift_y < grid_size_h; shift_y++)\n    {\n        for (int shift_x = 0; shift_x < grid_size_w; shift_x++)\n        {\n            int loc = shift_x + shift_y * grid_size_w;\n            for (int i = 0; i < 3; i++)\n            {\n                float* record = data + (loc * 3 + i) * one_rsize;\n                float* cls_ptr = record + 5;\n                for (int cls = 0; cls < num_class; cls++)\n                {\n                    float score = (cls_ptr[cls]) * (record[4]);\n                    if (score > ob_det_thresh)\n                    {\n                        cx = ((record[0]) * 2.f - 0.5f + (float)shift_x) * (float)stride;\n                        cy = ((record[1]) * 2.f - 0.5f + (float)shift_y) * (float)stride;\n                        w = pow((record[2]) * 2.f, 2) * anchors[k][i][0];\n                        h = pow((record[3]) * 2.f, 2) * anchors[k][i][1];\n                        cx -= ((input_width - frame_size.width * gain) / 2);\n                        cy -= ((input_height - frame_size.height * gain) / 2);\n                        cx /= gain;\n                        cy /= gain;\n                        w /= gain;\n                        h /= gain;\n                        ob_det_res box;\n                        box.x1 = std::max(0, std::min(int(frame_size.width), int(cx - w / 2.f)));\n                        box.y1 = std::max(0, std::min(int(frame_size.height), int(cy - h / 2.f)));\n                        box.x2 = std::max(0, std::min(int(frame_size.width), int(cx + w / 2.f)));\n                        box.y2 = std::max(0, std::min(int(frame_size.height), int(cy + h / 2.f)));\n                        box.score = score;\n                        box.label_index = cls;\n                        box.label = labels[cls];\n                        result[cls].push_back(box);\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n\nvoid AnchorBaseDet::nms(vector<ob_det_res>& input_boxes)\n{\n    std::sort(input_boxes.begin(), input_boxes.end(), [](ob_det_res a, ob_det_res b) { return a.score > b.score; });\n    std::vector<float> vArea(input_boxes.size());\n    for (int i = 0; i < int(input_boxes.size()); ++i)\n    {\n        vArea[i] = (input_boxes.at(i).x2 - input_boxes.at(i).x1 + 1)\n            * (input_boxes.at(i).y2 - input_boxes.at(i).y1 + 1);\n    }\n    for (int i = 0; i < int(input_boxes.size()); ++i)\n    {\n        for (int j = i + 1; j < int(input_boxes.size());)\n        {\n            float xx1 = std::max(input_boxes[i].x1, input_boxes[j].x1);\n            float yy1 = std::max(input_boxes[i].y1, input_boxes[j].y1);\n            float xx2 = std::min(input_boxes[i].x2, input_boxes[j].x2);\n            float yy2 = std::min(input_boxes[i].y2, input_boxes[j].y2);\n            float w = std::max(float(0), xx2 - xx1 + 1);\n            float h = std::max(float(0), yy2 - yy1 + 1);\n            float inter = w * h;\n            float ovr = inter / (vArea[i] + vArea[j] - inter);\n            if (ovr >= ob_nms_thresh)\n            {\n                input_boxes.erase(input_boxes.begin() + j);\n                vArea.erase(vArea.begin() + j);\n            }\n            else\n            {\n                j++;\n            }\n        }\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5176\u4ed6\u6587\u4ef6\u4e2d\uff0cutils.h\u662f\u5de5\u5177\u7ed3\u6784\u4f53\u548c\u51fd\u6570\u7684\u58f0\u660e\u5934\u6587\u4ef6\uff0cutils.cc\u662f\u5de5\u5177\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\uff1bvi_vo.h\u662f\u5b9e\u73b0\u89c6\u9891\u8f93\u5165\u8f93\u51fa\u7684\u5934\u6587\u4ef6\uff1bjson.h\u662fjson\u6587\u4ef6\u89e3\u6790\u7684\u5934\u6587\u4ef6\uff0c\u7a0b\u5e8f\u8fd0\u884c\u7684\u65f6\u5019\u9700\u8981\u5b9e\u73b0\u89e3\u6790\u90e8\u7f72\u914d\u7f6e\u6587\u4ef6deploy.json\uff0cjson.cpp\u662f\u5176\u63a5\u53e3\u7684\u5b9e\u73b0\uff1bscoped_timing.hpp\u662f\u8ba1\u65f6\u5de5\u5177\uff0c\u7528\u4e8e\u7edf\u8ba1\u8fd0\u884c\u65f6\u95f4\u3002"}),"\n",(0,s.jsx)(e.p,{children:"main.cc\u662f\u4e3b\u51fd\u6570\uff0c\u5b9e\u73b0\u542f\u52a8\u547d\u4ee4\u53c2\u6570\u89e3\u6790\u548c\u9759\u6001\u56fe\u3001\u89c6\u9891\u6d41\u7684\u63a8\u7406\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'/*\n*\u5b9e\u73b0\u9759\u6001\u56fe\u63a8\u7406\n*/\nvoid image_proc_ob_det(config_args args, char *argv[])\n{\n    //\u4ece\u53c2\u6570\u4e2d\u7684\u9759\u6001\u56fe\u8def\u5f84\u8bfb\u53d6\u56fe\u7247\uff0c\u521b\u5efacv::Mat\n    cv::Mat ori_img = cv::imread(argv[3]);\n    int ori_w = ori_img.cols;\n    int ori_h = ori_img.rows;\n    vector<ob_det_res> results;\n    // \u5b9e\u4f8b\u521d\u59cb\u5316\n    AnchorBaseDet ob_det(args, argv[2], atoi(argv[4]));\n    //\u9884\u5904\u7406\n    ob_det.pre_process(ori_img);\n    //\u63a8\u7406\n    ob_det.inference();\n    //\u540e\u5904\u7406\n    ob_det.post_process({ori_w, ori_h}, results);\n    //\u5728\u7ed3\u679c\u4e0a\u7ed8\u5236\u68c0\u6d4b\u6846\u548c\u7c7b\u522b\n    Utils::draw_ob_det_res(ori_img,results);\n    //\u4fdd\u5b58\u68c0\u6d4b\u7ed3\u679c\u56fe\u7247\n    cv::imwrite("result_ob_det.jpg", ori_img);\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u8ff0\u4ee3\u7801\u662f\u89c6\u9891\u6d41\u63a8\u7406\u7684\u8fc7\u7a0b\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'/*\n*\u89c6\u9891\u6d41\u63a8\u7406\n*/\nvoid video_proc_ob_det(config_args args, char *argv[])\n{\n    //\u542f\u52a8video capture\n    vivcap_start();\n //\u521b\u5efa\u4e00\u5e27\u7684\u6570\u636e\u7ed3\u6784\u5b9e\u4f8b\u7528\u4e8eosd\u663e\u793a\n    k_video_frame_info vf_info;\n    void *pic_vaddr = NULL;       \n    memset(&vf_info, 0, sizeof(vf_info));\n //\u6570\u636e\u521d\u59cb\u5316\n    vf_info.v_frame.width = osd_width;\n    vf_info.v_frame.height = osd_height;\n    vf_info.v_frame.stride[0] = osd_width;\n    vf_info.v_frame.pixel_format = PIXEL_FORMAT_ARGB_8888;\n    block = vo_insert_frame(&vf_info, &pic_vaddr);\n\n    // alloc memory\n    size_t paddr = 0;\n    void *vaddr = nullptr;\n    size_t size = SENSOR_CHANNEL * SENSOR_HEIGHT * SENSOR_WIDTH;\n    int ret = kd_mpi_sys_mmz_alloc_cached(&paddr, &vaddr, "allocate", "anonymous", size);\n    if (ret)\n    {\n        std::cerr << "physical_memory_block::allocate failed: ret = " << ret << ", errno = " << strerror(errno) << std::endl;\n        std::abort();\n    }\n //\u58f0\u660e\u68c0\u6d4b\u7ed3\u679c\u53d8\u91cfresults,\u7528\u4e8e\u5b58\u653e\u68c0\u6d4b\u7ed3\u679c\n    vector<ob_det_res> results;\n //\u5b9e\u4f8b\u521d\u59cb\u5316\n    AnchorBaseDet ob_det(args, argv[2], {SENSOR_CHANNEL, SENSOR_HEIGHT, SENSOR_WIDTH}, reinterpret_cast<uintptr_t>(vaddr), reinterpret_cast<uintptr_t>(paddr), atoi(argv[4]));\n    //while\u5faa\u73af\u5185\u4f9d\u6b21\u83b7\u53d6\u4e00\u5e27\u56fe\u50cf\uff0c\u7ecf\u8fc7AI\u6a21\u578b\u63a8\u7406\u8fc7\u7a0b\u8f93\u51fa\u5e76\u540e\u5904\u7406\uff0c\u5728OSD\u5e27\u4e0a\u7ed8\u5236\u7ed3\u679c\u5e76\u63d2\u5165\u5230\u663e\u793a\n    while (!isp_stop)\n    {\n        ScopedTiming st("total time", 1);\n        {\n            ScopedTiming st("read capture", atoi(argv[4]));\n            // VICAP_CHN_ID_1 out rgb888p\n            memset(&dump_info, 0 , sizeof(k_video_frame_info));\n            // \u5c06camera\u7684\u5f53\u524d\u5e27dump\u5230dump_info\u4e2d\n            ret = kd_mpi_vicap_dump_frame(vicap_dev, VICAP_CHN_ID_1, VICAP_DUMP_YUV, &dump_info, 1000);\n            if (ret) {\n                printf("sample_vicap...kd_mpi_vicap_dump_frame failed.\\n");\n                continue;\n            }\n        }\n            \n\n        {\n            //\u5c06dump_info\u5185\u7684\u6570\u636e\u62f7\u8d1d\u5230AnchorBaseDet\u5b9e\u4f8b\u5316\u65f6\u7528\u5230\u7684\u5730\u5740vaddr\n            ScopedTiming st("isp copy", atoi(argv[4]));\n            auto vbvaddr = kd_mpi_sys_mmap_cached(dump_info.v_frame.phys_addr[0], size);\n            memcpy(vaddr, (void *)vbvaddr, SENSOR_HEIGHT * SENSOR_WIDTH * 3); \n            kd_mpi_sys_munmap(vbvaddr, size);\n        }\n\n        //\u68c0\u6d4b\u7ed3\u679c\u6e05\u7a7a\n        results.clear();\n  //\u9884\u5904\u7406\n        ob_det.pre_process();\n        //\u63a8\u7406\n        ob_det.inference();\n  //\u6a21\u578b\u8f93\u51fa\u540e\u5904\u7406\n        ob_det.post_process({SENSOR_WIDTH, SENSOR_HEIGHT},results);\n  //\u521b\u5efaosd\u5e27\u6570\u636e\n        cv::Mat osd_frame(osd_height, osd_width, CV_8UC4, cv::Scalar(0, 0, 0, 0));\n        {\n            //\u5728osd\u7684\u4e00\u5e27\u4e0a\u7ed8\u5236\u68c0\u6d4b\u6846\u548c\u68c0\u6d4b\u7c7b\u522b\n            ScopedTiming st("osd draw", atoi(argv[4]));\n            Utils::draw_ob_det_res(osd_frame, results, {osd_width, osd_height}, {SENSOR_WIDTH, SENSOR_HEIGHT});\n        }\n\n\n        {\n            //\u5c06osd_frame\u4e2d\u7684\u6570\u636e\u62f7\u8d1d\u5230pic_vaddr\n            ScopedTiming st("osd copy", atoi(argv[4]));\n            memcpy(pic_vaddr, osd_frame.data, osd_width * osd_height * 4);\n            //\u663e\u793a\u901a\u9053\u63d2\u5165\u5e27\n            kd_mpi_vo_chn_insert_frame(osd_id+3, &vf_info);  \n            printf("kd_mpi_vo_chn_insert_frame success \\n");\n            ret = kd_mpi_vicap_dump_release(vicap_dev, VICAP_CHN_ID_1, &dump_info);\n            if (ret) {\n                printf("sample_vicap...kd_mpi_vicap_dump_release failed.\\n");\n            }\n        }\n    }\n    //\u91ca\u653e\u53e5\u67c4\n    vo_osd_release_block();\n    //\u505c\u6b62video capture\n    vivcap_stop();\n\n\n    // free memory\n    ret = kd_mpi_sys_mmz_free(paddr, vaddr);\n    if (ret)\n    {\n        std::cerr << "free failed: ret = " << ret << ", errno = " << strerror(errno) << std::endl;\n        std::abort();\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/k230_deploy/CMakeLists.txt\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fd9\u662fk230_code/k230_deploy\u76ee\u5f55\u4e0b\u7684CMakeLists.txt\u811a\u672c\uff0c\u8bbe\u7f6e\u7f16\u8bd1\u7684C++\u6587\u4ef6\u548c\u751f\u6210\u7684elf\u53ef\u6267\u884c\u6587\u4ef6\u540d\u79f0\uff0c\u7531\u4e0b\u9762\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"set(src main.cc utils.cc ai_base.cc json.cpp anchorbase_det.cc)\nset(bin main.elf)\n#\u6dfb\u52a0\u9879\u76ee\u7684\u6839\u76ee\u5f55\u5230\u5934\u6587\u4ef6\u641c\u7d22\u8def\u5f84\u4e2d\u3002\ninclude_directories(${PROJECT_SOURCE_DIR})\n#\u6dfb\u52a0 nncase RISC-V \u5411\u91cf\u5e93\u7684\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${nncase_sdk_root}/riscv64/rvvlib/include)\n#\u6dfb\u52a0 k230 SDK \u4e2d\u7684\u7528\u6237\u5e94\u7528\u7a0b\u5e8f API \u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/userapps/api/)\n#\u6dfb\u52a0 k230 SDK \u7684mpp(Media Process Platform)\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/include)\n# \u6dfb\u52a0\u4e0empp\u76f8\u5173\u7684\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/include/comm)\n#\u6dfb\u52a0\u793a\u4f8b VO\uff08\u89c6\u9891\u8f93\u51fa\uff09\u5e94\u7528\u7a0b\u5e8f\u5934\u6587\u4ef6\u76ee\u5f55\ninclude_directories(${k230_sdk}/src/big/mpp/userapps/sample/sample_vo)\n#\u6dfb\u52a0\u94fe\u63a5\u5668\u641c\u7d22\u8def\u5f84\uff0c\u6307\u5411 nncase RISC-V \u5411\u91cf\u5e93\u7684\u76ee\u5f55\nlink_directories(${nncase_sdk_root}/riscv64/rvvlib/)\n#\u521b\u5efa\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u6e90\u6587\u4ef6\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\nadd_executable(${bin} ${src})\n#\u8bbe\u7f6e\u53ef\u6267\u884c\u6587\u4ef6\u9700\u8981\u94fe\u63a5\u7684\u5e93\u3002\u5217\u8868\u4e2d\u5217\u51fa\u4e86\u5404\u79cd\u5e93\uff0c\u5305\u62ec nncase \u76f8\u5173\u7684\u5e93\u3001k230 SDK \u7684\u5e93\uff0c\u4ee5\u53ca\u5176\u4ed6\u4e00\u4e9b\u5e93\ntarget_link_libraries(${bin} ...)\n#\u5c06\u4e00\u4e9b OpenCV\u76f8\u5173\u7684\u5e93\u548c\u5176\u4ed6\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u94fe\u63a5\u5230\u53ef\u6267\u884c\u6587\u4ef6\u4e2d\ntarget_link_libraries(${bin} opencv_imgproc opencv_imgcodecs opencv_core zlib libjpeg-turbo libopenjp2 libpng libtiff libwebp csi_cv)\n# \u5b89\u88c5\u751f\u6210\u7684\u53ef\u6267\u884c\u6587\u4ef6\u5230\u6307\u5b9a\u7684\u76ee\u6807\u8def\u5f84\uff08bin \u76ee\u5f55\uff09\u4e2d\ninstall(TARGETS ${bin} DESTINATION bin)\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/CMakeLists.txt\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'cmake_minimum_required(VERSION 3.2)\nproject(nncase_sdk C CXX)\n\n# \u8bbe\u7f6enncase\u7684\u6839\u76ee\u5f55\uff0c\u5728src/big/nncase\u76ee\u5f55\u4e0b\uff0c\u60a8\u4e5f\u53ef\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\nset(nncase_sdk_root "${PROJECT_SOURCE_DIR}/../../nncase/")\n# \u8bbe\u7f6ek230_sdk\u7684\u6839\u76ee\u5f55\uff0c\u5f53\u524d\u662f\u4ecenncase\u76ee\u5f55\u7684\u4e09\u7ea7\u7236\u76ee\u5f55\u5f97\u5230\uff0c\u60a8\u4e5f\u53ef\u8bbe\u7f6e\u4e3a\u7edd\u5bf9\u8def\u5f84\nset(k230_sdk ${nncase_sdk_root}/../../../)\n#\u8bbe\u7f6e\u94fe\u63a5\u811a\u672c\u8def\u5f84\uff0c\u94fe\u63a5\u811a\u672c\u653e\u4e8ek230_code/cmake\u4e0b\nset(CMAKE_EXE_LINKER_FLAGS "-T ${PROJECT_SOURCE_DIR}/cmake/link.lds --static")\n\n# set opencv\nset(k230_opencv ${k230_sdk}/src/big/utils/lib/opencv)\ninclude_directories(${k230_opencv}/include/opencv4/)\nlink_directories(${k230_opencv}/lib ${k230_opencv}/lib/opencv4/3rdparty)\n\n# set mmz\nlink_directories(${k230_sdk}/src/big/mpp/userapps/lib)\n\n# set nncase\ninclude_directories(${nncase_sdk_root}/riscv64)\ninclude_directories(${nncase_sdk_root}/riscv64/nncase/include)\ninclude_directories(${nncase_sdk_root}/riscv64/nncase/include/nncase/runtime)\nlink_directories(${nncase_sdk_root}/riscv64/nncase/lib/)\n\n# \u6dfb\u52a0\u5f85\u7f16\u8bd1\u5b50\u9879\u76ee\nadd_subdirectory(k230_deploy)\n'})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/build_app.sh\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"#!/bin/bash\nset -x\n\n# set cross build toolchain\n# \u5c06\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177\u94fe\u7684\u8def\u5f84\u6dfb\u52a0\u5230\u7cfb\u7edf\u7684 PATH \u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u4fbf\u5728\u540e\u7eed\u7684\u547d\u4ee4\u4e2d\u4f7f\u7528\u3002\u8be5\u5de5\u5177\u94fe\u662f\u4f7f\u7528\u7684\u5927\u6838\u7f16\u8bd1\u5de5\u5177\u94fe\u3002\nexport PATH=$PATH:/opt/toolchain/riscv64-linux-musleabi_for_x86_64-pc-linux-gnu/bin/\n\nclear\nrm -rf out\nmkdir out\npushd out\ncmake -DCMAKE_BUILD_TYPE=Release                 \\\n      -DCMAKE_INSTALL_PREFIX=`pwd`               \\\n      -DCMAKE_TOOLCHAIN_FILE=cmake/Riscv64.cmake \\\n      ..\n\nmake -j && make install\npopd\n\n# \u751f\u6210\u7684main.elf\u53ef\u4ee5\u5728k230_code\u76ee\u5f55\u4e0b\u7684k230_bin\u6587\u4ef6\u5939\u4e0b\u627e\u5230\nk230_bin=`pwd`/k230_bin\nrm -rf ${k230_bin}\nmkdir -p ${k230_bin}\n\nif [ -f out/bin/main.elf ]; then\n      cp out/bin/main.elf ${k230_bin}\nfi\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10253-\u4ee3\u7801\u7f16\u8bd1",children:"10.2.5.3 \u4ee3\u7801\u7f16\u8bd1"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u9879\u76ee\u4e2d\u7684k230_code\u6587\u4ef6\u5939\u62f7\u8d1d\u5230k230_sdk\u76ee\u5f55\u4e0b\u7684src/big/nncase\u4e0b\uff0c\u6267\u884c\u7f16\u8bd1\u811a\u672c\uff0c\u5c06C++\u4ee3\u7801\u7f16\u8bd1\u6210main.elf\u53ef\u6267\u884c\u6587\u4ef6\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u5728k230_SDK\u6839\u76ee\u5f55\u4e0b\u6267\u884c\nmake CONF=k230_canmv_defconfig prepare_memory\n# \u56de\u5230\u5f53\u524d\u9879\u76ee\u76ee\u5f55\uff0c\u8d4b\u4e88\u6743\u9650\nchmod +x build_app.sh\n./build_app.sh\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10254-\u51c6\u5907elf\u6587\u4ef6",children:"10.2.5.4 \u51c6\u5907ELF\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:"\u540e\u9762\u90e8\u7f72\u6b65\u9aa4\u9700\u8981\u7528\u5230\u7684\u6587\u4ef6\u5305\u62ec\uff1a"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"k230_code/k230_bin/main.elf;"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"1026-\u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d",children:"10.2.6 \u7f51\u7edc\u914d\u7f6e\u4e0e\u6587\u4ef6\u62f7\u8d1d"}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u5f85\u4f7f\u7528\u6587\u4ef6\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u4e0a\u6709\u4e09\u79cd\u65b9\u5f0f\u53ef\u4f9b\u9009\u62e9\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10261-\u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d",children:"10.2.6.1 \u79bb\u7ebf\u6587\u4ef6\u62f7\u8d1d"}),"\n",(0,s.jsx)(e.p,{children:"\u901a\u8fc7\u63d2\u62d4SD\u5361\uff0c\u5c06\u6240\u9700\u6587\u4ef6\u62f7\u8d1d\u5230\u76f8\u5e94\u4f4d\u7f6e\uff0cSD\u5361\u6839\u76ee\u5f55\u6620\u5c04\u5230\u5927\u5c0f\u6838\u7684/sharefs\u76ee\u5f55\u4e0b\u3002"}),"\n",(0,s.jsx)(e.h4,{id:"10262-tftp\u6587\u4ef6\u4f20\u8f93",children:"10.2.6.2 tftp\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Windows\u7cfb\u7edfPC\u7aef\u7f51\u7edc\u914d\u7f6e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u63a7\u5236\u9762\u677f->\u7f51\u7edc\u548c\u5171\u4eab\u4e2d\u5fc3->\u66f4\u6539\u9002\u914d\u5668\u8bbe\u7f6e->\u4ee5\u592a\u7f51\u7f51\u5361->\u53f3\u952e\u5c5e\u6027->\u9009\u4e2d(TCP/IPv4)->\u5c5e\u6027"}),"\n",(0,s.jsx)(e.p,{children:"\u914d\u7f6eIP\u5730\u5740\u3001\u63a9\u7801\u3001\u7f51\u5173\uff0c\u914d\u7f6eDNS\u670d\u52a1\u5668\u5730\u5740\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"net_config_0",src:i(50221).A+"",width:"695",height:"871"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5f00\u53d1\u677f\u7f51\u7edc\u914d\u7f6e"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u8fdb\u5165\u5c0f\u6838\u547d\u4ee4\u884c\uff0c\u6267\u884c\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u67e5\u770b\u662f\u5426\u6709eth0\nifconfig\n# \u914d\u7f6e\u5f00\u53d1\u677fIP\uff0c\u548cPC\u5728\u540c\u4e00\u7f51\u6bb5\u4e0b\nifconfig eth0 192.168.1.22\n# \u67e5\u770bIP\u914d\u7f6e\nifconfig\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u5de5\u5177\uff1atftpd64"}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["\u5b89\u88c5tftp\u901a\u4fe1\u5de5\u5177\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a",(0,s.jsx)(e.a,{href:"https://bitbucket.org/phjounin/tftpd64/downloads/",children:"https://bitbucket.org/phjounin/tftpd64/downloads/"})]}),"\n",(0,s.jsx)(e.p,{children:"\u542f\u52a8tftpd64\uff0c\u914d\u7f6e\u5f85\u4f20\u8f93\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\u548c\u670d\u52a1\u7f51\u5361"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"net_config_1",src:i(64701).A+"",width:"1012",height:"502"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"sharefs\u8bf4\u660e"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u8fdb\u5165\u5c0f\u6838\u6839\u76ee\u5f55\ncd /\n# \u67e5\u770b\u76ee\u5f55\nls\n# sharefs\u76ee\u5f55\u662f\u5927\u5c0f\u6838\u5171\u7528\u76ee\u5f55\uff0c\u56e0\u6b64\u4ece\u5c0f\u6838\u62f7\u8d1d\u5230sharefs\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u5bf9\u5927\u6838\u4e5f\u53ef\u89c1\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6587\u4ef6\u4f20\u8f93"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4ee5\u4e0b\u4ee3\u7801\u5728\u5c0f\u6838\u4e32\u53e3\u6267\u884c\n# \u5c06PC\u4e0atftpd64\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4f20\u8f93\u81f3\u5f00\u53d1\u677f\u7684\u5f53\u524d\u76ee\u5f55\ntftp -g -r your_file 192.168.1.2\n# \u5c06\u5f00\u53d1\u677f\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4f20\u8f93\u81f3tftpd64\u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\ntftp -p -r board_file 192.168.1.2\n"})}),"\n",(0,s.jsx)(e.h4,{id:"10262-scp\u6587\u4ef6\u4f20\u8f93",children:"10.2.6.2 scp\u6587\u4ef6\u4f20\u8f93"}),"\n",(0,s.jsx)(e.p,{children:"\u5728Linux\u7cfb\u7edf\u4e2d\uff0cPC\u6b63\u5e38\u8fde\u63a5\u7f51\u7edc\uff0c\u5f00\u53d1\u677f\u53ef\u4ee5\u901a\u8fc7\u7f51\u7ebf\u8fde\u63a5PC\u6240\u5728\u7f51\u5173\u4e0b\u5176\u4ed6\u7f51\u53e3\uff0c\u901a\u8fc7scp\u547d\u4ee4\u5b9e\u73b0\u6587\u4ef6\u4f20\u8f93\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5f00\u53d1\u677f\u4e0a\u7535\uff0c\u8fdb\u5165\u5927\u5c0f\u6838COM\u754c\u9762\uff0c\u5728\u5c0f\u6838\u6267\u884cscp\u4f20\u8f93\u547d\u4ee4\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"# \u4ecePC\u62f7\u8d1d\u6587\u4ef6\u81f3\u5f00\u53d1\u677f\nscp \u7528\u6237\u540d@\u57df\u540d\u6216IP:\u6587\u4ef6\u6240\u5728\u76ee\u5f55 \u5f00\u53d1\u677f\u76ee\u7684\u76ee\u5f55\n#\u62f7\u8d1d\u6587\u4ef6\u5939\nscp -r \u7528\u6237\u540d@\u57df\u540d\u6216IP:\u6587\u4ef6\u6240\u5728\u76ee\u5f55 \u5f00\u53d1\u677f\u76ee\u7684\u76ee\u5f55\n# \u4ece\u5f00\u53d1\u677f\u62f7\u8d1d\u6587\u4ef6\u81f3PC\nscp \u5f00\u53d1\u677f\u5f85\u62f7\u8d1d\u76ee\u5f55 \u7528\u6237\u540d@\u57df\u540d\u6216IP:PC\u76ee\u7684\u76ee\u5f55\n# \u62f7\u8d1d\u6587\u4ef6\u5939\nscp -r \u5f00\u53d1\u677f\u5f85\u62f7\u8d1d\u76ee\u5f55 \u7528\u6237\u540d@\u57df\u540d\u6216IP:PC\u76ee\u7684\u76ee\u5f55\n"})}),"\n",(0,s.jsx)(e.h3,{id:"1027-k230\u7aef\u90e8\u7f72",children:"10.2.7 K230\u7aef\u90e8\u7f72"}),"\n",(0,s.jsx)(e.h4,{id:"10271-\u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b",children:"10.2.7.1 \u677f\u7aef\u90e8\u7f72\u8fc7\u7a0b"}),"\n",(0,s.jsx)(e.p,{children:"\u6309\u7167\u4e0a\u8282\u914d\u7f6e\u597d\u7684\u6587\u4ef6\u4f20\u8f93\u8fc7\u7a0b\uff0c\u5728MobaXterm\u4e0a\u7684\u5c0f\u6838\u754c\u9762\u8fdb\u5165/sharefs\uff0c\u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\u5939\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"cd /sharefs\nmkdir test_det\ncd test_det\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5c06\u6a21\u578b\u8bad\u7ec3\u548c\u6d4b\u8bd5\u90e8\u5206\u51c6\u5907\u597d\u7684\u6587\u4ef6\u548cC++\u4ee3\u7801\u7f16\u8bd1\u90e8\u5206\u51c6\u5907\u597d\u7684elf\u6587\u4ef6\u62f7\u8d1d\u5230\u5f00\u53d1\u677f\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"test_cls\n \u251c\u2500\u2500best.kmodel\n \u251c\u2500\u2500deploy.json\n \u251c\u2500\u2500main.elf\n \u251c\u2500\u2500test.jpg\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u5927\u6838COM\u53e3\u8fdb\u5165\u5230/sharefs/test_det\u76ee\u5f55\u4e0b\uff0c"}),"\n",(0,s.jsx)(e.p,{children:"\u6267\u884c\u9759\u6001\u56fe\u63a8\u7406\uff0c\u6267\u884c\u4e0b\u8ff0\u4ee3\u7801(\u6ce8\u610f\uff1a\u4ee3\u7801\u9700\u5728\u5927\u6838\u4e0b\u6267\u884c\uff0c\u6587\u4ef6\u62f7\u8d1d\u9700\u5728\u5c0f\u6838\u4e0b\u5b8c\u6210)\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'"\u6a21\u578b\u63a8\u7406\u65f6\u4f20\u53c2\u8bf4\u660e\uff1a<config_file> <kmodel_det> <input_mode> <debug_mode>"\n"Options:"\n"  config_file     \u90e8\u7f72\u6240\u7528json\u914d\u7f6e\u6587\u4ef6,\u9ed8\u8ba4\u4e3a deploy_config.json"\n"  kmodel_det      kmodel\u8def\u5f84"\n"  input_mode      \u672c\u5730\u56fe\u7247(\u56fe\u7247\u8def\u5f84)/ \u6444\u50cf\u5934(None)"\n"  debug_mode      \u662f\u5426\u9700\u8981\u8c03\u8bd5\uff0c0\u30011\u30012\u5206\u522b\u8868\u793a\u4e0d\u8c03\u8bd5\u3001\u7b80\u5355\u8c03\u8bd5\u3001\u8be6\u7ec6\u8c03\u8bd5"\nmain.elf deploy.json best.kmodel test.jpg 2 \n'})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u6267\u884c\u6444\u50cf\u5934\u89c6\u9891\u6d41\u63a8\u7406\uff0c\u6267\u884c\u4e0b\u8ff0\u4ee3\u7801\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"main.elf deploy.json best.kmodel None 2 \n"})}),"\n",(0,s.jsx)(e.h4,{id:"10272-\u4e0a\u677f\u90e8\u7f72\u6548\u679c",children:"10.2.7.2 \u4e0a\u677f\u90e8\u7f72\u6548\u679c"}),"\n",(0,s.jsx)(e.p,{children:"\u9759\u6001\u56fe\u63a8\u7406\u56fe\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\u9759\u6001\u56fe\u68c0\u6d4b\u63a8\u7406",src:i(21094).A+"",width:"349",height:"349"})}),"\n",(0,s.jsx)(e.p,{children:"\u89c6\u9891\u6d41\u63a8\u7406\u56fe\u793a\uff1a"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"\u89c6\u9891\u6d41\u76ee\u6807\u68c0\u6d4b\u56fe\u793a",src:i(26808).A+"",width:"4032",height:"3024"})})]})}function _(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(p,{...n})}):p(n)}},80959:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/CanMV-K230_debug-1721612834786-42-a1d8f2863ff90f28e651b1ea555acb72.png"},95093:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/CanMV-K230_debug-a1d8f2863ff90f28e651b1ea555acb72.png"},7485:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/cls_image_inference-f2a9856dc00c9349e0ae4edf227c1c84.jpg"},12135:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/cls_video_inference-aeff10943b4e97eccc7de2366463714a.jpg"},27473:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/dataset_frame-da8b29f1ce77dcb1aa7a936f132b7e4c.png"},88249:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/det_dataset-242e07a2d45e1827f4e93a35181f86a5.png"},21094:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/det_image_inference-fbe71d83ef7794c7e6beea7e4ddd7052.jpg"},26808:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/det_video_inference-1ebf2a9feb8c4563e11a5f80c973d27e.jpg"},50221:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/net_config_0-1721612853487-48-739747cdb23dc4f8fd9624817b73cc15.png"},25212:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/net_config_0-739747cdb23dc4f8fd9624817b73cc15.png"},64701:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/net_config_1-1721612860558-51-2fd22db8d543e85fae1a8aeace246465.png"},77477:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/net_config_1-2fd22db8d543e85fae1a8aeace246465.png"},20940:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/pipeline-1721612838571-45-acbe5363152f8e5fd8cfcb62200f200a.jpg"},83881:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/pipeline-acbe5363152f8e5fd8cfcb62200f200a.jpg"},33128:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_finish-1721612832001-39-ee9f7245b8722c20d46c1dd7a35e003d.png"},26284:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_finish-ee9f7245b8722c20d46c1dd7a35e003d.png"},52428:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_select-1721612823975-27-d7997d7eaf258b707f384880887bda39.png"},88021:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_select-d7997d7eaf258b707f384880887bda39.png"},70358:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_start-1721612826112-30-0365da8e19357ce420c4bd9ce05c93ba.png"},32045:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_start-0365da8e19357ce420c4bd9ce05c93ba.png"},8937:(n,e,i)=>{i.d(e,{A:()=>s});const s="data:image/png;base64,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"},44806:(n,e,i)=>{i.d(e,{A:()=>s});const s="data:image/png;base64,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"},5737:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_warning-1721612830017-36-02b4676d68826fbaa6733fd16c8bb305.png"},44577:(n,e,i)=>{i.d(e,{A:()=>s});const s=i.p+"assets/images/rufus_warning-02b4676d68826fbaa6733fd16c8bb305.png"},28453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>a});var s=i(96540);const t={},r=s.createContext(t);function d(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:d(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);