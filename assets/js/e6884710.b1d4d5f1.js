"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[330],{20809:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>b,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var l=i(74848),t=i(28453);const a={sidebar_position:3},s="K230 \u5185\u5b58\u5206\u6790\u6307\u5357",r={id:"CanaanK230/part6/K230MemoryAnalysisGuide",title:"K230 \u5185\u5b58\u5206\u6790\u6307\u5357",description:"1.\u5c0f\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",source:"@site/docs/CanaanK230/part6/03_K230MemoryAnalysisGuide.md",sourceDirName:"CanaanK230/part6",slug:"/CanaanK230/part6/K230MemoryAnalysisGuide",permalink:"/docs/CanaanK230/part6/K230MemoryAnalysisGuide",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/CanaanK230/part6/03_K230MemoryAnalysisGuide.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"canaanK230Sidebar",previous:{title:"K230 \u5185\u5b58\u4f18\u5316\u6307\u5357",permalink:"/docs/CanaanK230/part6/K230MemoryOptimizationGuide"},next:{title:"K230 \u542f\u52a8\u4f18\u5316\u6307\u5357",permalink:"/docs/CanaanK230/part6/K230LaunchtheOptimizationGuide"}},d={},c=[{value:"1.\u5c0f\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",id:"1\u5c0f\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",level:2},{value:"1.1 linux\u5185\u6838\u9759\u6001\u5360\u7528",id:"11-linux\u5185\u6838\u9759\u6001\u5360\u7528",level:3},{value:"1.1.1 size\u5de5\u5177",id:"111-size\u5de5\u5177",level:4},{value:"1.1.2 ksize.py\u811a\u672c",id:"112-ksizepy\u811a\u672c",level:4},{value:"1.1.3 nm\u547d\u4ee4",id:"113-nm\u547d\u4ee4",level:4},{value:"1.2 linux\u52a8\u6001\u5360\u7528\u5206\u6790",id:"12-linux\u52a8\u6001\u5360\u7528\u5206\u6790",level:3},{value:"1.2.1 free",id:"121-free",level:4},{value:"1.2.2 /proc/meminfo\u8282\u70b9",id:"122-procmeminfo\u8282\u70b9",level:4},{value:"2.\u5927\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",id:"2\u5927\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",level:2},{value:"2.1 \u9759\u6001\u5206\u6790",id:"21-\u9759\u6001\u5206\u6790",level:3},{value:"2.1.1 \u4f7f\u7528size\u5de5\u5177",id:"211-\u4f7f\u7528size\u5de5\u5177",level:4},{value:"2.2 \u52a8\u6001\u5206\u6790",id:"22-\u52a8\u6001\u5206\u6790",level:3},{value:"2.2.1 \u5806\u5185\u5b58",id:"221-\u5806\u5185\u5b58",level:4},{value:"2.2.2 \u9875\u5185\u5b58",id:"222-\u9875\u5185\u5b58",level:4},{value:"2.2.3 \u591a\u5a92\u4f53\u4e13\u7528\u5185\u5b58",id:"223-\u591a\u5a92\u4f53\u4e13\u7528\u5185\u5b58",level:4}];function u(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"k230-\u5185\u5b58\u5206\u6790\u6307\u5357",children:"K230 \u5185\u5b58\u5206\u6790\u6307\u5357"})}),"\n",(0,l.jsx)(e.h2,{id:"1\u5c0f\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",children:"1.\u5c0f\u6838\u5185\u5b58\u5360\u7528\u5206\u6790"}),"\n",(0,l.jsx)(e.h3,{id:"11-linux\u5185\u6838\u9759\u6001\u5360\u7528",children:"1.1 linux\u5185\u6838\u9759\u6001\u5360\u7528"}),"\n",(0,l.jsx)(e.h4,{id:"111-size\u5de5\u5177",children:"1.1.1 size\u5de5\u5177"}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528size\u5de5\u5177\u53ef\u4ee5\u67e5\u770b\u5185\u6838\u955c\u50cf\u7684text\u3001data\u3001bss\u7b49\u5927\u5c0f\uff0cvmlinux\u6240\u5728\u4f4d\u7f6e\u4e3a ",(0,l.jsx)(e.code,{children:"k230_sdk/output/k230_evb_defconfig/little/linux"})," \u8fdb\u5165\u8be5\u76ee\u5f55\u4f7f\u7528size\u5de5\u5177\u67e5\u770bvmlinux"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"$ size -G vmlinux\n      text       data        bss      total filename\n   9550790    5033374     375793   14959957 vmlinux\n"})}),"\n",(0,l.jsx)(e.h4,{id:"112-ksizepy\u811a\u672c",children:"1.1.2 ksize.py\u811a\u672c"}),"\n",(0,l.jsx)(e.p,{children:"\u5728linux\u6e90\u7801\u7684tools\u76ee\u5f55\u5185\u6709\u4e00\u4e2aksize.py\u811a\u672c\uff0c\u53ef\u4ee5\u5bf9\u5185\u6838\u76ee\u5f55\u4e0b\u7684built-in.a\u505a\u89e3\u6790\uff0c\u5e76\u5c06\u89e3\u6790\u5185\u5bb9\u6309\u7167\u5c3a\u5bf8\u6392\u5e8f\u663e\u793a\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"$ ./source/tools/ksize.py vmlinux\nLinux Kernel                          total |       text       data        bss\n--------------------------------------------------------------------------------\nvmlinux                            14959957 |   10010970    4573194     375793\n--------------------------------------------------------------------------------\ndrivers/built-in.a                  4060898 |    3757793     257384      45721\nfs/built-in.a                       3450902 |    2984349     439120      27433\nnet/built-in.a                      3103220 |    2635627     392278      75315\nkernel/built-in.a                   2258370 |    1402705     668085     187580\nmm/built-in.a                        581664 |     480740      94560       6364\nlib/built-in.a                       494079 |     488689       3038       2352\nblock/built-in.a                     242212 |     219496      20060       2656\ncrypto/built-in.a                    165559 |     151371      14113         75\narch/riscv/built-in.a                117201 |      46516      43788      26897\nipc/built-in.a                        60699 |      57375       3296         28\nsecurity/built-in.a                   45740 |      43716       1944         80\ninit/built-in.a                       31148 |      20394      10617        137\ncerts/built-in.a                       1241 |       1217         16          8\nusr/built-in.a                          520 |        520          0          0\n--------------------------------------------------------------------------------\nsum                                14613453 |   12290508    1948299     374646\ndelta                                346504 |   -2279538    2624895       1147\n\n\ndrivers                               total |       text       data        bss\n--------------------------------------------------------------------------------\ndrivers/built-in.a                  4060898 |    3757793     257384      45721\n--------------------------------------------------------------------------------\ndrivers/net/built-in.a               620309 |     589318      30918         73\ndrivers/usb/built-in.a               531811 |     500758      27947       3106\ndrivers/gpu/built-in.a               436282 |     426932       9262         88\ndrivers/media/built-in.a             305133 |     282425      12048      10660\ndrivers/mtd/built-in.a               287895 |     272626      12317       2952\ndrivers/tty/built-in.a               256154 |     225035      21385       9734\ndrivers/base/built-in.a              206309 |     191470      13710       1129\ndrivers/mmc/built-in.a               178193 |     168267       9882         44\ndrivers/scsi/built-in.a              150154 |     124680      24788        686\ndrivers/hid/built-in.a               106225 |      97793       8360         72\ndrivers/clk/built-in.a                90344 |      83123       7141         80\ndrivers/video/built-in.a              83938 |      76886       3240       3812\ndrivers/gpio/built-in.a               77888 |      74920       2920         48\ndrivers/i2c/built-in.a                73855 |      61913       8438       3504\ndrivers/input/built-in.a              71037 |      68181       2836         20\ndrivers/of/built-in.a                 64023 |      58745        602       4676\ndrivers/spi/built-in.a                56824 |      50320       6480         24\ndrivers/char/built-in.a               45568 |      34511      10265        792\ndrivers/dma/built-in.a                37291 |      35993       1062        236\ndrivers/firmware/built-in.a           36744 |      33437       2477        830\ndrivers/crypto/built-in.a             31999 |      27463       3292       1244\ndrivers/thermal/built-in.a            30926 |      27157       3752         17\ndrivers/dma-buf/built-in.a            29547 |      26747       2668        132\ndrivers/virtio/built-in.a             27405 |      25984       1413          8\ndrivers/iio/built-in.a                27146 |      26470        664         12\ndrivers/block/built-in.a              25557 |      24084       1393         80\ndrivers/power/built-in.a              22133 |      14605       6848        680\ndrivers/soc/built-in.a                19576 |      10632       8912         32\ndrivers/leds/built-in.a               14605 |      13945        636         24\ndrivers/pwm/built-in.a                13628 |      11708       1792        128\ndrivers/watchdog/built-in.a           13598 |      13067        501         30\ndrivers/ras/built-in.a                12633 |       8089       4528         16\ndrivers/nvmem/built-in.a              11866 |      10962        904          0\ndrivers/misc/built-in.a               10180 |       9916        264          0\ndrivers/perf/built-in.a                8979 |       7839        488        652\ndrivers/reset/built-in.a               8579 |       8095        484          0\ndrivers/phy/built-in.a                 7297 |       7138        151          8\ndrivers/irqchip/built-in.a             5992 |       5248        728         16\ndrivers/clocksource/built-in.a         3633 |       3229        400          4\ndrivers/canaan-hwtimer/built-in.a       3553 |       3273        224         56\ndrivers/mfd/built-in.a                 2350 |       2122        224          4\ndrivers/canaan-hardlock/built-in.a       1312 |       1096        208          8\ndrivers/pci/built-in.a                  164 |        164          0          0\n--------------------------------------------------------------------------------\nsum                                 4048635 |    3746366     256552      45717\ndelta                                 12263 |      11427        832          4\n\n\nfs                                    total |       text       data        bss\n--------------------------------------------------------------------------------\nfs/built-in.a                       3450902 |    2984349     439120      27433\n--------------------------------------------------------------------------------\nfs/nfs/built-in.a                    831393 |     586545     243616       1232\nfs/*.o                               605562 |     543984      44914      16664\nfs/ext4/built-in.a                   535651 |     439889      94598       1164\nfs/ubifs/built-in.a                  233606 |     232778        704        124\nfs/ntfs/built-in.a                   178875 |     175071       3724         80\nfs/nls/built-in.a                    147032 |     146220        552        260\nfs/proc/built-in.a                   103930 |     102710       1140         80\nfs/jffs2/built-in.a                   89382 |      88050       1032        300\nfs/hfsplus/built-in.a                 89010 |      66622      22372         16\nfs/fuse/built-in.a                    83342 |      82094       1192         56\nfs/jbd2/built-in.a                    79685 |      67144      12421        120\nfs/fat/built-in.a                     62368 |      61689        627         52\nfs/lockd/built-in.a                   56531 |      52860       1415       2256\nfs/ext2/built-in.a                    51552 |      51288        256          8\nfs/exfat/built-in.a                   50232 |      49891        293         48\nfs/hfs/built-in.a                     44570 |      44342        220          8\nfs/9p/built-in.a                      38537 |      37968        541         28\nfs/iomap/built-in.a                   29506 |      23726       5556        224\nfs/kernfs/built-in.a                  24668 |      20038        494       4136\nfs/debugfs/built-in.a                 24646 |      24342        288         16\nfs/configfs/built-in.a                23513 |      22733        752         28\nfs/autofs/built-in.a                  21641 |      21433        208          0\nfs/notify/built-in.a                  20350 |      18913        972        465\nfs/sysfs/built-in.a                   11121 |      10825        276         20\nfs/devpts/built-in.a                   4019 |       3383        628          8\nfs/tracefs/built-in.a                  3327 |       3191        120         16\nfs/exportfs/built-in.a                 2512 |       2488         24          0\nfs/ramfs/built-in.a                    2379 |       2299         80          0\nfs/nfs_common/built-in.a               1962 |       1833        105         24\n--------------------------------------------------------------------------------\nsum                                 3450902 |    2984349     439120      27433\ndelta                                     0 |          0          0          0\n\n\nnet                                   total |       text       data        bss\n--------------------------------------------------------------------------------\nnet/built-in.a                      3103220 |    2635627     392278      75315\n--------------------------------------------------------------------------------\nnet/wireless/built-in.a              537167 |     416358     118041       2768\nnet/mac80211/built-in.a              530597 |     448777      81720        100\nnet/core/built-in.a                  496384 |     441682      49334       5368\nnet/ipv4/built-in.a                  490329 |     455868      21793      12668\nnet/sunrpc/built-in.a                424309 |     301164      86725      36420\nnet/ipv6/built-in.a                  330602 |     305628      12017      12957\nnet/9p/built-in.a                     74446 |      59002      15140        304\nnet/ethtool/built-in.a                65232 |      64314        831         87\nnet/netlink/built-in.a                37972 |      36352       1584         36\nnet/unix/built-in.a                   31131 |      26138        876       4117\nnet/packet/built-in.a                 29875 |      29087        786          2\nnet/*.o                               26420 |      24930       1014        476\nnet/sched/built-in.a                  14230 |      12813       1417          0\nnet/bpf/built-in.a                     6775 |       6211        564          0\nnet/dns_resolver/built-in.a            4191 |       3835        344         12\nnet/ethernet/built-in.a                3560 |       3468         92          0\n--------------------------------------------------------------------------------\nsum                                 3103220 |    2635627     392278      75315\ndelta                                     0 |          0          0          0\n\n\nkernel                                total |       text       data        bss\n--------------------------------------------------------------------------------\nkernel/built-in.a                   2258370 |    1402705     668085     187580\n--------------------------------------------------------------------------------\nkernel/printk/built-in.a             639702 |      28763     469075     141864\nkernel/*.o                           395328 |     331882      45935      17511\nkernel/bpf/built-in.a                301274 |     289172      11737        365\nkernel/trace/built-in.a              291112 |     215997      64131      10984\nkernel/sched/built-in.a              196488 |     162431      27197       6860\nkernel/time/built-in.a               106971 |      81903      19636       5432\nkernel/events/built-in.a              92144 |      85731       5349       1064\nkernel/cgroup/built-in.a              81197 |      61877      17188       2132\nkernel/rcu/built-in.a                 59568 |      54698       4731        139\nkernel/irq/built-in.a                 54302 |      50862       2300       1140\nkernel/locking/built-in.a             24859 |      24667        188          4\nkernel/dma/built-in.a                 12733 |      12246        422         65\nkernel/power/built-in.a                2692 |       2476        196         20\n--------------------------------------------------------------------------------\nsum                                 2258370 |    1402705     668085     187580\ndelta                                     0 |          0          0          0\n\n\nlib                                   total |       text       data        bss\n--------------------------------------------------------------------------------\nlib/built-in.a                       494079 |     488689       3038       2352\n--------------------------------------------------------------------------------\nlib/*.o                              283551 |     279738       3605        208\nlib/zstd/built-in.a                  217655 |     217655          0          0\nlib/mpi/built-in.a                    38286 |      38206         32         48\nlib/crypto/built-in.a                 19029 |      18505        524          0\nlib/zlib_deflate/built-in.a           17786 |      15394        108       2284\nlib/lz4/built-in.a                    17757 |      17757          0          0\nlib/zlib_inflate/built-in.a           11310 |      11310          0          0\nlib/xz/built-in.a                     10127 |      10055         72          0\nlib/fonts/built-in.a                   4597 |       4597          0          0\nlib/lzo/built-in.a                     4048 |       4048          0          0\nlib/math/built-in.a                    2111 |       2099         12          0\n--------------------------------------------------------------------------------\nsum                                  626257 |     619364       4353       2540\ndelta                               -132178 |    -130675      -1315       -188\n\n\nblock                                 total |       text       data        bss\n--------------------------------------------------------------------------------\nblock/built-in.a                     242212 |     219496      20060       2656\n--------------------------------------------------------------------------------\nblock/*.o                            198068 |     176004      19428       2636\nblock/partitions/built-in.a           44144 |      43492        632         20\n--------------------------------------------------------------------------------\nsum                                  242212 |     219496      20060       2656\ndelta                                     0 |          0          0          0\n\n\ncrypto                                total |       text       data        bss\n--------------------------------------------------------------------------------\ncrypto/built-in.a                    165559 |     151371      14113         75\n--------------------------------------------------------------------------------\ncrypto/*.o                           145243 |     131544      13645         54\ncrypto/asymmetric_keys/built-in.a      20316 |      19827        468         21\n--------------------------------------------------------------------------------\nsum                                  165559 |     151371      14113         75\ndelta                                     0 |          0          0          0\n\n\narch/riscv                            total |       text       data        bss\n--------------------------------------------------------------------------------\narch/riscv/built-in.a                117201 |      46516      43788      26897\n--------------------------------------------------------------------------------\narch/riscv/kernel/built-in.a          67393 |      38009      27176       2208\narch/riscv/mm/built-in.a              49808 |       8507      16612      24689\narch/riscv/lib/built-in.a                24 |         16          8          0\n--------------------------------------------------------------------------------\nsum                                  117225 |      46532      43796      26897\ndelta                                   -24 |        -16         -8          0\n\n\nsecurity                              total |       text       data        bss\n--------------------------------------------------------------------------------\nsecurity/built-in.a                   45740 |      43716       1944         80\n--------------------------------------------------------------------------------\nsecurity/keys/built-in.a              40288 |      38340       1880         68\nsecurity/*.o                           5452 |       5376         64         12\n--------------------------------------------------------------------------------\nsum                                   45740 |      43716       1944         80\ndelta\n"})}),"\n",(0,l.jsx)(e.h4,{id:"113-nm\u547d\u4ee4",children:"1.1.3 nm\u547d\u4ee4"}),"\n",(0,l.jsx)(e.p,{children:"nm\u547d\u4ee4\u53ef\u4ee5\u67e5\u770b\u5185\u6838\u6a21\u5757\u4e2d\u5404\u4e2a\u7b26\u53f7\u7684\u5c3a\u5bf8\u3002\u4f8b\u5982"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"$ nm --size -r vmlinux | head -10\n0000000000058000 d _printk_rb_static_infos\n0000000000020000 b __log_buf\n0000000000018000 d _printk_rb_static_descs\n0000000000008000 b write_buf.0\n0000000000008000 d ftrace_stacks\n0000000000003b88 r edid_cea_modes_1\n0000000000003b2e T hidinput_connect\n00000000000039c0 R v4l2_dv_timings_presets\n0000000000002b4e t ntfs_fill_super\n0000000000002b4c t ext4_fill_super\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u8f93\u51fa\u7684\u7ed3\u679c\u5171\u6709\u4e09\u5217\u6570\u636e\uff0c\u5206\u522b\u6807\u8bc6\u5927\u5c0f\u3001\u7b26\u53f7\u7c7b\u578b\u3001\u7b26\u53f7\u540d\u3002\u5bf9\u4e8e\u7b26\u53f7\u7c7b\u578b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"b/B - \u7b26\u53f7\u4f4d\u4e8ebss\u6bb5"}),"\n",(0,l.jsx)(e.li,{children:"t/T - \u7b26\u53f7\u4f4d\u4e8etext\u6bb5"}),"\n",(0,l.jsx)(e.li,{children:"d/D - \u7b26\u53f7\u4f4d\u4e8edata\u6bb5"}),"\n",(0,l.jsx)(e.li,{children:"r/R - \u7b26\u53f7\u4f4d\u4e8erodata\u6bb5"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"12-linux\u52a8\u6001\u5360\u7528\u5206\u6790",children:"1.2 linux\u52a8\u6001\u5360\u7528\u5206\u6790"}),"\n",(0,l.jsx)(e.h4,{id:"121-free",children:"1.2.1 free"}),"\n",(0,l.jsx)(e.p,{children:"\u5728linux\u7528\u6237\u6001\u547d\u4ee4\u884c\u4e2d\uff0c\u6267\u884cfree\u547d\u4ee4\u5373\u53ef\u83b7\u5f97\u5f53\u524d\u7cfb\u7edf\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[root@canaan ~ ]#free\n              total        used        free      shared  buff/cache   available\nMem:         106028       28260       39824          84       37944       57024\nSwap:             0           0           0\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"total\uff1aLinux\u5185\u6838\u53ef\u652f\u914d\u7684\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"used\uff1a\u7cfb\u7edf\u5df2\u4f7f\u7528\u7684\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"free\uff1a\u7cfb\u7edf\u7a7a\u95f2\u7684\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"shared\uff1a\u5171\u4eab\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"buff/cache\uff1a\u88ab buffer \u548c cache \u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f"}),"\n",(0,l.jsx)(e.li,{children:"available\uff1a\u8fd8\u53ef\u4ee5\u88ab\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\u5927\u5c0f"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"122-procmeminfo\u8282\u70b9",children:"1.2.2 /proc/meminfo\u8282\u70b9"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u901a\u8fc7cat /proc/meminfo\u8fdb\u4e00\u6b65\u89c2\u5bdflinux\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"[root@canaan ~ ]#cat /proc/meminfo\nMemTotal:         106028 kB\nMemFree:           39744 kB\nMemAvailable:      56976 kB\nBuffers:             356 kB\nCached:            10052 kB\nSwapCached:            0 kB\nActive:             5024 kB\nInactive:           7008 kB\nActive(anon):         84 kB\nInactive(anon):     1624 kB\nActive(file):       4940 kB\nInactive(file):     5384 kB\nUnevictable:           0 kB\nMlocked:               0 kB\nSwapTotal:             0 kB\nSwapFree:              0 kB\nDirty:                 0 kB\nWriteback:             0 kB\nAnonPages:          1660 kB\nMapped:             3520 kB\nShmem:                84 kB\nKReclaimable:      27600 kB\nSlab:              39244 kB\nSReclaimable:      27600 kB\nSUnreclaim:        11644 kB\nKernelStack:         912 kB\nPageTables:          240 kB\nNFS_Unstable:          0 kB\nBounce:                0 kB\nWritebackTmp:          0 kB\nCommitLimit:       53012 kB\nCommitted_AS:      14572 kB\nVmallocTotal:   67108863 kB\nVmallocUsed:        2440 kB\nVmallocChunk:          0 kB\nPercpu:              136 kB\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"MemTotal\u3001MemFree\u3001Buffers\u3001Cached\u3001SwapCached\u53c2\u8003free\u7684\u8bf4\u660e"}),"\n",(0,l.jsx)(e.li,{children:"MemAvailable\uff1a\u4f7f\u7528MemFree\u3001Active(file)\u3001Inactive(file)\u3001SReclaimable\u548c/proc/zoneinfo\u4e2d\u7684low watermark\u6839\u636e\u7279\u5b9a\u7b97\u6cd5\u8ba1\u7b97\u5f97\u51fa\uff0c\u662f\u4e00\u4e2a\u4f30\u503c\uff0c\u5e76\u4e0d\u51c6\u786e\u3002\u53ef\u7528\u6765\u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u5c42\u9762\u53ef\u7528\u7684\u5185\u5b58\u3002"}),"\n",(0,l.jsx)(e.li,{children:"Active/Inactive: Active\u8868\u793a\u6700\u8fd1\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u56de\u6536\u7684\u4f18\u5148\u7ea7\u4f4e\uff1bInactive\u8868\u793a\u6700\u8fd1\u8f83\u5c11\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u56de\u6536\u7684\u4f18\u5148\u6781\u9ad8\u3002"}),"\n",(0,l.jsx)(e.li,{children:"AnonPages \u533f\u540d\u9875"}),"\n",(0,l.jsx)(e.li,{children:"Mapped\uff1a\u8bbe\u5907\u6216\u6587\u4ef6\u6620\u5c04\u7684\u5927\u5c0f\u3002\u6bd4\u5982\u5171\u4eab\u5185\u5b58\u3001\u52a8\u6001\u5e93\u3001mmap\u7684\u6587\u4ef6\u7b49\u90fd\u7edf\u8ba1\u5728\u8be5\u5185\u5b58\u4e2d\u3002"}),"\n",(0,l.jsx)(e.li,{children:"slab/SReclaimable/SUnreclaim:\u5185\u6838slab\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u5305\u62ec\u53ef\u56de\u6536\u4e0e\u4e0d\u53ef\u56de\u6536\u90e8\u5206\u3002"}),"\n",(0,l.jsx)(e.li,{children:"KernelStack\uff1a\u5185\u6838\u6808\u5927\u5c0f"}),"\n",(0,l.jsx)(e.li,{children:"PageTables\uff1a\u9875\u8868\u7684\u5927\u5c0f(\u7528\u4e8e\u5c06\u865a\u62df\u5730\u5740\u7ffb\u8bd1\u4e3a\u7269\u7406\u5730\u5740)\uff0c\u5185\u5b58\u5206\u914d\u8d8a\u591a\uff0c\u6b64\u5757\u513f\u5185\u5b58\u5c31\u4f1a\u589e\u5927\u3002"}),"\n",(0,l.jsx)(e.li,{children:"CommitLimit/Committed_AS: overcommit \u7684\u9608\u503c/\u5df2\u7ecf\u7533\u8bf7\u7684\u5185\u5b58\u5927\u5c0f(\u4e0d\u662f\u5df2\u5206\u914d)\u3002Overcommit\u662fLinux\u4e00\u79cd\u5185\u5b58\u7533\u8bf7\u5904\u7406\u65b9\u5f0f\uff0c\u4e3a\u4e86\u8dd1\u66f4\u591a\u66f4\u5927\u7684\u7a0b\u5e8f\uff0c\u5927\u90e8\u5206\u7533\u8bf7\u5185\u5b58\u7684\u8bf7\u6c42\u90fd\u56de\u590d\u201dyes\u201d, \u603b\u7533\u8bf7\u7684\u5185\u5b58\u5927\u4e8e\u603b\u7269\u7406\u5185\u5b58\u3002"}),"\n",(0,l.jsx)(e.li,{children:"VmallocTotal/VmallocUsed/VmallocChunk: vmalloc\u533a\u57df\u5927\u5c0f/vmalloc\u533a\u57df\u4f7f\u7528\u5927\u5c0f/vmalloc\u533a\u57df\u4e2d\u6700\u5927\u53ef\u7528\u7684\u8fde\u7eed\u533a\u5757\u5927\u5c0f\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"2\u5927\u6838\u5185\u5b58\u5360\u7528\u5206\u6790",children:"2.\u5927\u6838\u5185\u5b58\u5360\u7528\u5206\u6790"}),"\n",(0,l.jsx)(e.p,{children:"\u5927\u6838\u7684\u5185\u5b58\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"rt-smart\u5185\u6838\u955c\u50cf\u9759\u6001\u5360\u7528"}),"\n",(0,l.jsx)(e.li,{children:"rt-smart\u5806\u5185\u5b58\uff0c\u4e3b\u8981\u662frt-smart\u5185\u6838\u4f7f\u7528"}),"\n",(0,l.jsx)(e.li,{children:"rt-smart\u9875\u5185\u5b58\uff0c\u4e3b\u8981\u662f\u7528\u6237\u6001\u7684malloc\u4f7f\u7528"}),"\n",(0,l.jsx)(e.li,{children:"\u591a\u5a92\u4f53\u4f7f\u7528\u7684mmz\u5185\u5b58\uff0c\u591a\u5a92\u4f53\u8bbe\u5907\u4e13\u7528\u5185\u5b58"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"21-\u9759\u6001\u5206\u6790",children:"2.1 \u9759\u6001\u5206\u6790"}),"\n",(0,l.jsx)(e.h4,{id:"211-\u4f7f\u7528size\u5de5\u5177",children:"2.1.1 \u4f7f\u7528size\u5de5\u5177"}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528size\u5de5\u5177\u53ef\u4ee5\u67e5\u770brt-smart\u955c\u50cf\u7684text\u3001data\u3001bss\u7b49\u5927\u5c0f\uff0crtthread.elf\u6240\u5728\u4f4d\u7f6e\u4e3a ",(0,l.jsx)(e.code,{children:"k230_sdk/output/k230_evb_defconfig/big/rt-smart$"})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"$ size -G rtthread.elf\n      text       data        bss      total filename\n   3052420      26852     612126    3691398 rtthread.elf\n"})}),"\n",(0,l.jsx)(e.h3,{id:"22-\u52a8\u6001\u5206\u6790",children:"2.2 \u52a8\u6001\u5206\u6790"}),"\n",(0,l.jsx)(e.h4,{id:"221-\u5806\u5185\u5b58",children:"2.2.1 \u5806\u5185\u5b58"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528free\u547d\u4ee4\u67e5\u770brt-smart\u7684\u5806\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5355\u4f4d\u5b57\u8282"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"msh />free\nmemheap               pool size  max used size available size\n-------------------- ---------- ------------- --------------\nheap                 33554432   1111520       33141096\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"pool size \u5806\u7269\u7406\u5185\u5b58\u603b\u5927\u5c0f"}),"\n",(0,l.jsx)(e.li,{children:"max used size \u5386\u53f2\u6700\u5927\u5360\u7528\u7269\u7406\u5185\u5b58"}),"\n",(0,l.jsx)(e.li,{children:"available size \u5f53\u524d\u53ef\u7528\u7269\u7406\u5185\u5b58"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"222-\u9875\u5185\u5b58",children:"2.2.2 \u9875\u5185\u5b58"}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528list_page\u67e5\u770b\u9875\u5185\u5b58"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"msh />list_page\nlevel 0 [0x07ffc000][0x07b5c000][0x07b68000]\nlevel 1 [0x0315e000][0x07b6a000][0x07b5e000]\nlevel 2 [0x07ff8000][0x07b6c000][0x07b58000]\nlevel 3 [0x07b50000][0x07b60000]\nlevel 4 [0x07b40000][0x07b70000][0x07fe0000]\nlevel 5 [0x03160000][0x07fc0000]\nlevel 6 [0x07b00000][0x07f80000]\nlevel 7 [0x07b80000][0x03180000][0x07f00000]\nlevel 8 [0x07a00000][0x07e00000]\nlevel 9 [0x03200000][0x07800000][0x07c00000]\nlevel 10 [0x03400000]\nlevel 11 [0x07000000][0x03800000]\nlevel 12 [0x06000000]\nlevel 13 [0x04000000]\nlevel 14\nlevel 15\nlevel 16\nlevel 17\nlevel 18\nlevel 19\nlevel 20\nlevel 21\nlevel 22\nlevel 23\nlevel 24\nlevel 25\nlevel 26\nlevel 27\nlevel 28\nlevel 29\nlevel 30\nlevel 31\nlevel 32\nlevel 33\nlevel 34\nlevel 35\nlevel 36\nlevel 37\nlevel 38\nlevel 39\nlevel 40\nlevel 41\nlevel 42\nlevel 43\nlevel 44\nlevel 45\nlevel 46\nlevel 47\nlevel 48\nlevel 49\nlevel 50\nlevel 51\nfree pages is 00004e95\nused pages is 0000000d\nmax used pages is 00000992\nmax used pages memory is 10035200 bytes\n-------------------------------\n"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"free pages \u5f53\u524d\u53ef\u7528\u7684page\u7684\u4e2a\u6570"}),"\n",(0,l.jsx)(e.li,{children:"used pages \u5f53\u524d\u5df2\u7528\u7684page\u4e2a\u6570"}),"\n",(0,l.jsx)(e.li,{children:"max used pages \u5386\u53f2\u6700\u5927\u4f7f\u7528\u7684page\u4e2a\u6570"}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"223-\u591a\u5a92\u4f53\u4e13\u7528\u5185\u5b58",children:"2.2.3 \u591a\u5a92\u4f53\u4e13\u7528\u5185\u5b58"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4f7f\u7528/proc/\u6587\u4ef6\u7cfb\u7edf\u67e5\u770b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:'msh />cat /proc/media-mem\n+---ZONE: PHYS(0x10000000, 0x1FAFFFFF), GFP=0, nBYTES=257024KB,    NAME="anonymous"\n\n---MMZ_USE_INFO:\n total size=257024KB(251MB),used=0KB(0MB + 0KB),remain=257024KB(251MB + 0KB),zone_number=1,block_number=0\n'})})]})}function b(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(u,{...n})}):u(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>r});var l=i(96540);const t={},a=l.createContext(t);function s(n){const e=l.useContext(a);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),l.createElement(a.Provider,{value:e},n.children)}}}]);